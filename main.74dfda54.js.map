{"version":3,"sources":["../../src/main/api-types.ts","../../src/main/issue-forest.ts","../../src/main/worker-interface.ts","../../src/main/bundler-worker-factory.ts","../../src/main/minheap.ts","../../src/main/scheduling.ts","../../src/main/scheduling-async.ts","../../src/main/util.ts","../../src/main/you-track-rest.ts","../../src/main/you-track-oauth.ts","../../src/main/you-track-http.ts","../../src/main/you-track-project-planning.ts","../../../../src/main/components/alerts/alerts-ctrl.ts","../../node_modules/surplus/es/insert.js","../../node_modules/surplus/es/content.js","../../node_modules/surplus/es/dom.js","../../node_modules/surplus/es/fieldData.js","../../node_modules/surplus/es/spread.js","../../node_modules/s-js/dist/es/S.js","../../node_modules/surplus/es/index.js","../../../../src/main/components/alerts/alerts-view.tsx","../../../src/main/utils/counter.ts","../../node_modules/sortablejs/Sortable.js","../../../src/main/utils/surplus.ts","../../../src/main/utils/s.ts","../../../src/main/utils/typescript.ts","../../../../src/main/components/settings/settings-model.ts","../../../../src/main/components/settings/settings-ctrl.ts","../../../../src/main/components/you-track-metadata/you-track-metadata-ctrl.ts","../../../../src/main/components/app/app-ctrl.ts","../../node_modules/s-array/es/index.js","../../../../src/main/components/app/app-model.ts","../../../../src/main/components/contributor/contributor-model.ts","../../../../src/main/components/contributors/contributors-model.ts","../../../../src/main/components/contributors/contributors-ctrl.ts","../../../src/main/components/bootstrap.ts","../../../../src/main/components/contributor/contributor-view.tsx","../../../../src/main/components/contributors/contributors-view.tsx","../../../../src/main/components/depends-link-type/depends-link-type-model.ts","../../../src/main/components/base-views.tsx","../../../src/main/components/you-track-base-views.tsx","../../../../src/main/components/depends-link-type/depends-link-type-view.tsx","../../../../src/main/components/nav/nav-view.tsx","../../../../src/main/components/project-planning-settings/project-planning-settings-ctrl.ts","../../../src/main/utils/deep-equals.ts","../../../../src/main/components/contributor/contributor-ctrl.ts","../../../../src/main/components/project-planning-app/project-planning-app-ctrl.ts","../../../../src/main/components/project-planning-settings/project-planning-settings-model.ts","../../../../src/main/components/project-planning-app/project-planning-app-model.ts","../../../../src/main/components/project-planning-app/project-planning-app-view.ts","../../../../src/main/components/settings/settings-view.tsx","../../../../src/main/components/project-planning-settings/project-planning-settings-view.tsx","../../../src/main/components/router.ts","../../../../src/main/components/warnings/warnings-view.tsx","../../node_modules/object-assign/index.js","../../node_modules/assert/node_modules/util/support/isBufferBrowser.js","../../node_modules/assert/node_modules/inherits/inherits_browser.js","../../node_modules/process/browser.js","../../node_modules/assert/node_modules/util/util.js","../../node_modules/assert/assert.js","../../node_modules/viz.js/viz.es.js","../../src/main/graphviz-settings-ctrl.ts","../../src/main/graphviz-app-ctrl.ts","../../src/main/graphviz-settings-model.ts","../../src/main/graphviz-app-model.ts","../../node_modules/surplus-mixin-data/index.es.js","../../src/main/graphviz-settings-view.tsx","../../src/main/graphviz-app-view.tsx","graphviz-app-view.jsx","../../src/main/index.ts"],"names":["isFailure","value","leaveNode","makeForest","issues","idToNode","reduce","map","issue","index","set","id","children","dependencies","dependents","Map","nodes","Array","from","values","node","parentKey","parent","undefined","length","get","push","dependency","dependencyNode","Symbol","iterator","traverseIssueForest","rootNodes","enterNode","currentIterator","stack","iteratorResult","next","done","pop","isDedicatedWorkerGlobalScope","DedicatedWorkerGlobalScope","workerFactory","createWorker","Worker","JobSplitting","isSchedulingFailure","MinHeap","parentIdx","idx","Math","trunc","leftChildIdx","rightChildIdx","swap","array","leftIdx","rightIdx","temp","heapify","comparatorFn","rootIdx","currentIdx","minIdx","l","r","constructor","iterable","comparatorFn_","array_","i","add","element","p","extractMin","min","isEmpty","JOB_DEFAULTS","Object","freeze","deliveryTime","splitting","PREEMPTION","releaseTime","preAssignment","computeSchedule","instance","nonNegativeInteger","number","Number","isInteger","undefinedOrNonNegativeInteger","numMachines","machineSpeeds","numJobs","jobs","numbers","filter","positiveIntegers","job","size","undefinedOrNonNegativeIntegers","upperBoundExcl","undefinedOrIntegerWithinZeroTo","integersWithinZeroTo","minFragmentSize","assign","ListScheduling","schedule","numMachines_","machineSpeeds_","jobs_","minFragmentSize_","gapsLists_","ignoredMachineSpeed","head","startTime","MIN_SAFE_INTEGER","endTime","tail","MAX_SAFE_INTEGER","nextTimeStamp","minWallClockTime","earliestStart","machine","currentGap","gapsList","currentFragmentStart","timeStamp","max","previousGapsList","adjustGaps","machineState","end","commitGaps","start","createJobFragment","scheduledJob","jobFragment","isWaiting","scheduleJob","availableMachineIndices","isPreemptible","currentSpeed","lastTimestamp","remainingSize","machines","availableIdx","speed","eventTime","forEach","ceil","machineEventTime","isProjectedEndTime","currentProjectedEndTime","nextGap","ignoredIndex","scheduleDeliveryTime","machineIdx","processingCompletionTime","completionTime","deliveryJobFragment","allMachines","callbackfn","singleMachine","singleMachineIdx","noDependencyNodes","jobGraphNodes","numDependencies","jobGraphNode","dependencyIdx","newSchedule","ignoredJob","finishTimes","numScheduledJobs","noDependencyNodesHeap","left","right","NONE","earliestStartTime","previousEarliestStartTime","dependencyFinishTime","availableMachines","deliveryMachineIdx","MULTIPLE_MACHINES","maxCompletionTime","currentAvailableMachines","currentCompletionTime","dependent","promise","computeScheduleAsync","args","worker","failure","Promise","reject","resolve","onmessage","event","result","data","onerror","terminate","filename","lineno","colno","message","postMessage","assignDefined","target","source","typedTarget","key","entries","deepClone","original","isArray","obj","coalesce","scheduleUnresolved","options","actualOptions","newDefaultSchedulingOptions","jobIdxToExtendedIssue","machineIdxToContributorIdx","schedulingInstance","makeSchedulingInstance","machineSchedule","ProjectPlanningJs","realTimeFactor","MINUTES_PER_WEEK_REAL_TIME","minutesPerWeek","scheduleTimestampToEpochTime","timestamp","predictionStartTimeMs","resolutionMs","j","scheduledIssue","issueIdx","issueActivity","assignee","contributors","appendSchedule","projectPlan","divisionTimestamp","collator","Intl","Collator","newProjectPlan","assigneeToActivities","existingActivities","issueActivities","has","createIfAbsent","returnValue","scheduledActivity","newActivity","assigneeActivities","sort","diff","compare","groupByIntervalAndWaitStatus","activities","IssueEventType","events","activity","filterActivity","type","ADDED","REMOVED","first","second","lastActivity","assignees","assigneeToActivityCount","timePassed","assigneeActiveCount","newDefaultSchedulableIssue","remainingWaitTimeMs","splittable","minActivityDuration","Date","now","n","assigneeToContributorIdx","contributor","numMembers","fill","extendedIssues","jobIdx","extendedIssue","asDependencyJobIdx","nodesWithDummyJobs","remainingEffortMs","childNode","concat","currentAssignees","assigneesChanged","activeCount","predicate","youTrackPath","ACTIVITIES_PAGE","CUSTOM_FIELD","customFieldId","ISSUES","queryId","SAVED_QUERY","SORTED_ISSUES","STATE_BUNDLES","WORK_TIME_SETTINGS","hubPath","OAUTH","isPeriodIssueCustomField","field","$type","isSingleUserIssueCustomField","isSingleEnumIssueCustomField","isStateIssueCustomField","secret","STORAGE_PREFIX","baseUrlToAccessTokenMap","storageKeyForOauthId","oAuthId","normalizeUrl","baseUrl","URL","toString","goToOauthPage","youTrackBaseUrl","hubUrl","serviceId","appState","redirectUrl","window","location","href","normalizedBaseUrl","normalizedHubUrl","strippedRedirectUrl","hash","username","password","search","floor","random","youTrackOauthUrl","RestApi","response_type","state","redirect_uri","request_credentials","client_id","scope","searchParams","append","baseUrlAndAppState","sessionStorage","setItem","JSON","stringify","handlePotentialOauthRedirect","url","fragmentParams","URLSearchParams","slice","storedValue","getItem","parse","removeItem","expiresIn","validUntil","parseInt","history","replaceState","authorizationFor","accessToken","isYouTrackError","error","error_description","httpGet","resourcePath","queryParams","authorization","urlSearchParams","xhr","XMLHttpRequest","open","setRequestHeader","responseType","onloadend","onRequestFinished","send","httpGetAll","restBatchSize","httpGetAllWithOptions","batch","processBatch","initial","numElementsRetrieved","busy","$top","batchPromise","$skip","response","status","retrieveProjectPlan","youTrackConfig","actualYouTrackConfig","newDefaultYouTrackConfig","newDefaultRequestProjectPlanOptions","YouTrackIssueActivities","getMinutesPerWorkWeek","fields","daysAWeek","minutesADay","remainingEffortFieldId","remainingWaitFieldId","assigneeFieldId","otherCustomFieldIds","doesInwardDependOnOutward","overlaySavedQueryId","minStateChangeDurationMs","defaultRemainingEffortMs","defaultWaitTimeMs","isSplittableFn","progressCallback","omitIssueActivities","progressUpdateIntervalMs","YOUTRACK_CUSTOM_FIELDS_CATEGORY","baseUrl_","config_","options_","dependsOnDirection_","idToActiveState_","inactiveStateIds","inactiveState","projectPlan_","warnings","run","retrieveNumIssues","retrieveSavedQueryName","stateBundleId","getStateBundleId","buildIdToActiveStateMap","progressUpdate","retrieveIssues","retrieveOverlayOrder","retrieveActivities","finalizeSchedule","lastProgressUpdate_","percentageDone","numIssues_","numTasksWithDetails_","minTimeStamp_","maxActivityTimeStamp_","maxUpdateTimeStamp_","newHttpRequest","getAll","folderId","savedQueryId","count","customField","stateFieldId","fieldDefaults","bundle","savedQuery","savedQueryName_","name","restStateBundles","restStateBundle","isRelevantStateBundle","restElement","isResolved","includes","lowerCaseNameToActiveState_","toLowerCase","parseIssueCustomFields","restIssue","customFields","fieldId","projectCustomField","minutes","activeState","stateBundleElementIdToActiveState","find","restIssues","idReadable","summary","resolved","internalId","parentIssueId","subtaskIssueIds","subtasks","subissue","dependencyIssueIds","stateTransitions","created","lastUpdate","updated","issues_","idToIssueMap_","restLink","links","direction","linkType","dependsLinkTypeId","linkedIssue","overlayIds","idToOverlayIdx","overlayIdx","categories","issueQuery","activitiesPage","hasAfter","cursor","afterCursor","parseActivityItems","arrayOrObject","object","lowerCaseName","addStateTransition","newStateTransition","replacementForPreviousUnknown","a","c","activityItems","activityItem","added","removed","finalizeIssueActivities","description","issueId","unknownDependencies","join","unknownSubtasks","subIssue","youTrackIssue","finalStateTransition","AlertsCtrl","alerts_","alert","title","Error","remove","DOCUMENT_FRAGMENT_NODE","TEXT_NODE","insert","range","parentNode","test","good","t","nodeType","document","createTextNode","replaceChild","Node","insertArray","len","nextSibling","insertBefore","appendChild","previousSibling","removeChild","Function","firstChild","lastChild","textContent","content","current","clear","normalizeIncomingArray","appendNodes","reconcileArrays","NOMATCH","NOINSERT","RECONCILE_ARRAY_BATCH","RECONCILE_ARRAY_BITS","RECONCILE_ARRAY_INC","RECONCILE_ARRAY_MASK","ns","us","ulen","k","nmin","nmax","umin","umax","u","nx","ux","ul","loop","fixes","equable","insertOrAppend","ntext","__surplus_order","defineProperty","writable","Text","src","utext","preserved","lcs","longestPositiveIncreasingSubsequence","utexti","lcsj","ntextk","marker","normalized","item","seq","is","pre","findGreatestIndexLEQ","lo","hi","mid","svgNS","createElement","tag","className","el","createSvgElement","createElementNS","setAttribute","createComment","text","comment","removeAttribute","setAttributeNS","namespace","removeAttributeNS","htmlFieldCache","style","ref","fn","class","for","onDoubleClick","spellCheck","allowFullScreen","autoCapitalize","autoFocus","autoPlay","role","svgFieldCache","htmlFor","tabIndex","allowReorder","attributeName","attributeType","autoReverse","baseFrequency","calcMode","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan","attributeOnlyRx","deepAttrRx","isAttrOnlyField","propOnlyRx","isPropOnlyField","propPartRx","getAttrName","replace","m","jsxEventPropRx","attrPartRx","getPropName","prop","toUpperCase","deepPropRx","buildPropData","exec","substr","attrNamespaces","xlink","xml","attrNamespaceRx","RegExp","keys","buildAttrData","attr","getFieldData","svg","cache","cached","b","props","spread","setField","_a","S","ComputationNode","topLevelRoot","disposer","owner","Owner","callAll","ss","root","UNOWNED","RunningClock","RootClock","disposes","dispose","on","ev","seed","onchanges","running","RunningNode","effect","DataNode","arguments","eq","age","update","time","changes","reset","sample","cleanup","cleanups","console","warn","makeDataNode","makeComputationNode","isFrozen","isListening","Clock","Queue","updates","RootClockProxy","pending","NOTPENDING","log","prototype","logDataRead","clock","CURRENT","source1","source1slot","sources","sourceslots","owned","toplevelComputation","RUNNING","updateNode","logComputationRead","Log","node1","node1slot","nodeslots","items","STALE","logRead","to","fromslot","toslot","applyDataChange","markComputationsStale","markNodeStale","markOwnedNodesForDisposal","child","final","cleanupSource","slot","last","lastslot","alerts","Counter","countChangedSignal_","numTrueSignals_","signal","signalToDisposeFnMap_","disposeFn","didAddToCounter","isCurrentlyTrue","delete","sortableBindSarray","sArray","sortableOptions","create","onEnd","oldIndex","newIndex","splice","bind","invalidCounter","isCurrentlyUpdatingSignal","isInvalidSignal","newValue","checkValidity","valueListener","addEventListener","removeEventListener","bindNumber","valueAsNumber","bindString","bindToOnValue","onValue","currentlyUpdatingSignal","checked","radioListener","bindStringSet","activeOptions","option","selected","Set","setEquals","withClassIff","classes","classList","focusOnChangeToValue","previousValue","setTimeout","focus","hrefFrom","jsonable","s","augmentedSignal","toJSON","toPlain","typedSource","hasOwnProperty","plainValue","defaultValue","unreachableCase","x","ensureString","actualValue","ensureNumber","ensureBoolean","ensureArray","validElementPredicate","findIndex","createSettings","youTrackServiceId","assignSettings","settings","plain","toNormalizedPlainSettings","plainSettings","toNormalizedUrl","urlString","host","pathname","charAt","exception","TypeError","SettingsCtrl","settings_","isInCloudUrlSignal","isInCloudUrl","previousNormalizedBaseUrl","hubUrlFromYouTrackBaseUrl","previousHubUrl","currentUri","uri","currentOrigin","hrefRelativeToBaseUrl","relativePath","hubRelativeToBaseUrlAndServiceId","inCloudMatch","match","YouTrackRestUrl","YouTrackMetadataCtrl","youTrackMetadata","alertCtrl","pendingMetadata","definedYouTrackMetadata","currentYouTrackMetadata","emptyYouTrackMetadata","youTrackUserMap","users","user","directedIssueLinkTypes","issueLinkTypes","directed","savedQueries","savedSearches","currentBaseUrl","all","loadCustomFields","loadIssueLinkTypes","loadSavedSearches","loadUsers","then","minutesPerWorkWeek","catch","finally","mapOfCustomFieldTypes","fieldTypeId","fieldType","CUSTOM_FIELDS","ISSUE_LINK_TYPES","SAVED_QUERIES","USERS","AppCtrl","app_","appComputation_","settingsCtrl","alertsCtrl","youTrackMetadataCtrl","connect","appName","createDefaultAppCtrl","app","appComputation","numInvalidSettings","showErrorIfFailure","progress","SArray","dirty","mutations","mutcount","pops","shifts","newvalues","mutation","unshift","shift","call","apply","removeAll","lift","_seq","chainConcat","every","chainEvery","chainFilter","chainFind","chainForEach","chainIncludes","chainMap","chainSort","chainReduce","reduceRight","chainReduceRight","reverse","chainReverse","chainSlice","some","chainSome","mapS","chainMapS","mapSample","chainMapSample","mapSequentially","chainMapSequentially","orderBy","chainOrderBy","enter","exit","move","mapped","disposers","d","new_items","new_len","tempdisposers","NEXT","mapper","_item","_i","combine","chainCombine","new_indices","new_indices_next","new_end","found","pred","o","copy","by","v","others","e","Page","ensurePage","HOME","WARNINGS","SETTINGS","createApp","currentPage","createAppComputation","createSDataArray","assignApp","DEFAULT_HOURS_PER_WEEK","DEFAULT_NUM_MEMBERS","ensureContributorKind","createContributor","plainCopy","createYouTrackContributor","createExternalContributor","createContributorBase","hoursPerWeek","EXTERNAL_CONTRIBUTOR_VALUE","createContributors","createContributorEditArea","assignContributors","assignContributorEditArea","contributorEditArea","ContributorsCtrl","contributors_","contributorEditArea_","createContributorCtrl","contributorCtrls","newEntryType","sharedProperties","plainContributor","FORM_GROUP_CLASS","LABEL_CLASS","OFFSET_CLASS","INPUT_CLASS","INPUT_CLASS_RIGHT","PLAINTEXT_CLASS","SELECT_CLASS","EDIT_AREA_CLASS","HELP_CLASS","CHECK_CLASS","CHECK_LABEL_CLASS","DRAGGABLE_HANDLE_CLASS","MAX_HOURS_PER_WEEK","youTrackUserName","MAX_PERSONS_PER_CONTRIBUTORS","label","ContributorView","contributorCtrl","createDependsLinkType","assignDependsLinkType","required","SinglePlaceholder","elementId","elements","optionTextFromElement","idFromElement","multiplePlaceholders","inactiveStateId","names","asString","SelectView","IssueFieldView","optionTextFromSavedQuery","SecondarySelectView","primaryElementId","MultiSelectView","elementIds","bundleElements","LinkTypeView","dependsLinkType","RadioToggleView","ProgressBarView","numWarnings","actionBtnLabel","ProjectPlanningSettingsCtrl","contributorsCtrl","enumFields","periodFields","stateFields","userFields","states","stateBundleElement","ordinal","types","typeFieldId","deepEquals","leftKeys","rightKeys","leftKey","ContributorCtrl","contributor_","NOTHING","MIN_STATE_CHANGE_DURATION_MS","DEFAULT_REMAINING_EFFORT_MS","DEFAULT_WAIT_TIME_MS","SCHEDULING_RESOLUTION_MS","MIN_ACTIVITY_DURATION","EXTERNAL_CONTRIBUTOR_ID_PREFIX","Action","ProjectPlanningAppCtrl","appCtrl","action","actionFromState","extendedProjectPlan_","extendedProjectPlan","plan","doAction","defaultAction","createDefaultProjectPlanningAppCtrl","transient","COMPLETE_SETTINGS","CONNECT","BUILD_PLAN","buildPlan","UPDATE_PREDICTION","updatePrediction","STOP","currentConfig","splittableTypeIds","percentDone","retrieveProjectPlanResult_","retrievedProjectPlanTimestamp_","idToContributorIdx","schedulingOptions","finalPlan","youTrackTimestamp","currentSettings","validSettings","newWithoutContributors","lastWithoutContributors","youTrackConfigChanged","contributorsChanged","createProjectPlanningSettings","assignProjectPlanningSettings","isValidId","createProjectPlanningApp","createProjectPlanningAppComputation","assignProjectPlanningApp","projectPlanningActionLabel","ctrl","SettingsView","connectSignal","BundleElementsView","AssigneeFieldView","IssueTypeFieldView","DependsLinkTypeView","SavedQueryView","OverlaySavedQueryView","ContributorsView","Router","FABRICATED_HOST","isParsedHash","parseWindowLocation","theHash","startsWith","fabricatedUrl","path","params","raw","savedState","setStateFromHash","needsNormalization","hashFromConfig","currentHash","candidatePageName","config","substring","warning","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","val","shouldUseNative","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","test3","split","letter","err","module","exports","symbols","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","Item","noop","nextTick","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","formatRegExp","format","f","isString","objects","inspect","str","_","isNull","isObject","deprecate","msg","isUndefined","global","noDeprecation","warned","deprecated","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","formatValue","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","styleType","styles","arrayToHash","recurseTimes","isFunction","ret","primitive","formatPrimitive","visibleKeys","isError","indexOf","formatError","isRegExp","isDate","base","output","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","isNumber","desc","getOwnPropertyDescriptor","line","prev","cur","numLinesEst","ar","arg","isNullOrUndefined","isSymbol","re","objectToString","isPrimitive","pad","debuglog","pid","isBuffer","require","months","getHours","getMinutes","getSeconds","getDate","getMonth","inherits","origin","Viz","_typeof","classCallCheck","Constructor","createClass","defineProperties","descriptor","enumerable","configurable","protoProps","staticProps","_extends","WorkerWrapper","_this","nextId","_this2","fileName","lineNumber","ModuleWrapper","render","b64EncodeUnicode","btoa","encodeURIComponent","p1","defaultScale","devicePixelRatio","svgXmlToImageElement","svgXml","_ref","_ref$scale","scale","_ref$mimeType","mimeType","_ref$quality","quality","svgImage","Image","onload","canvas","width","height","getContext","drawImage","toBlob","blob","image","createObjectURL","svgXmlToImageElementFabric","_ref2","_ref2$scale","_ref2$mimeType","_ref2$quality","multiplier","fabric","loadSVGFromString","Canvas","enableRetinaScaling","util","groupSVGElements","renderAll","toDataURL","_ref3","workerURL","Module","wrapper","_ref4","_ref4$format","_ref4$engine","engine","_ref4$files","files","_ref4$images","images","_ref4$yInvert","yInvert","_ref4$nop","nop","renderString","parser","DOMParser","parseFromString","documentElement","arg1","arg2","HTMLInputElement","checkboxData","radioData","valueData","HTMLSelectElement","HTMLTextAreaElement","isContentEditable","nodeName","textContentData","checkboxListener","textContentListener"],"mappings":"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","file":"main.74dfda54.js","sourceRoot":"../../src/html","sourcesContent":["/**\n * Contributor to a project to whom work can be assigned.\n *\n * A contributor can have one or more members.\n */\nexport interface Contributor {\n  /**\n   * Identifier for this contributor. If the contributor exists in YouTrack as a user, this should be the\n   * YouTrack-internal ID (YouTrack REST API entity name\n   * [User](https://www.jetbrains.com/help/youtrack/standalone/api-entity-User.html)), so that issue assignees in\n   * YouTrack can be considered for scheduling.\n   */\n  id: string;\n\n  /**\n   * The number of minutes per week each member of this contributor is available.\n   */\n  minutesPerWeek: number;\n\n  /**\n   * The number of members in this group.\n   *\n   * By default, there is only a single member; that is, 1.\n   */\n  numMembers?: number;\n}\n\n/**\n * Human-readable error message that can be displayed to the user.\n */\nexport type Failure = string;\n\n/**\n * Returns whether the given value is a {@link Failure}.\n */\nexport function isFailure(value: any): value is Failure {\n  return typeof value === 'string';\n}\n\n/**\n * An issue activity is a time period in which work was or is scheduled to be performed on an issue.\n *\n * Timestamps are in milliseconds since January 1, 1970 00:00:00 UTC. That is, all timestamps are in real time (and not\n * relative to work time).\n */\nexport interface IssueActivity {\n  /**\n   * If the activity is in the past: YouTrack-internal ID of the assignee (YouTrack REST API entity name\n   * [User](https://www.jetbrains.com/help/youtrack/standalone/api-entity-User.html)) or, if there was no assignee,\n   * the empty string. If the activity is scheduled for the future: the contributor id {@link Contributor.id}.\n   */\n  assignee: string;\n\n  /**\n   * The start timestamp of the activity (including).\n   */\n  start: number;\n\n  /**\n   * The end timestamp of the activity (excluding).\n   *\n   * If the issue activity has no scheduled end, this property is `Number.MAX_SAFE_INTEGER`.\n   */\n  end: number;\n\n  /**\n   * Whether this activity represents wait time.\n   *\n   * If true, this activity does not prevent other issues from being assigned concurrently to the same assignee.\n   * However, any dependent issue can only start once all work on this issue has finished and all wait time has elapsed.\n   */\n  isWaiting: boolean;\n}\n\n/**\n * Node in an issue tree (or forest).\n *\n * In an issue tree (or forest), there is a one-to-one correspondence between {@link SchedulableIssue} objects and\n * {@link IssueNode} objects. Parent-child and dependency relationships are lifted to {@link IssueNode}. That is, the\n * dependencies of an {@link IssueNode} `a` are just those nodes that correspond to the issues referenced by\n * `a.issue.dependencies`.\n *\n * See also {@link makeForest}().\n */\nexport interface IssueNode<T extends SchedulableIssue> {\n  /**\n   * Index of {@link issue} in the underlying (flat) array that was used to create this tree.\n   */\n  index: number;\n\n  /**\n   * The issue corresponding to the current node.\n   */\n  issue: T;\n\n  /**\n   * The parent of the the current issue node, or `undefined` if this node is a root node.\n   */\n  parent?: IssueNode<T>;\n\n  /**\n   * Children of the current issue node.\n   */\n  children: IssueNode<T>[];\n\n  /**\n   * Dependencies of the current issue node.\n   */\n  dependencies: IssueNode<T>[];\n\n  /**\n   * Dependents of the current issue node.\n   */\n  dependents: IssueNode<T>[];\n}\n\n/**\n * An issue activity with one or more assignees.\n *\n * See {@link IssueActivity} and {@link groupByIntervalAndWaitStatus}().\n */\nexport interface MultiAssigneeIssueActivity extends Omit<IssueActivity, 'assignee'> {\n  /**\n   * Assignees for this issue activity, during the time interval from {@link IssueActivity.start} to\n   * {@link IssueActivity.end}.\n   *\n   * The same guarantees hold as for {@link IssueActivity.assignee}. Additionally, the array is non-empty.\n   */\n  assignees: string[];\n}\n\n/**\n * Callback for progress updates.\n *\n * @param ProgressCallback.percentageDone progress in percent; that is, a number (not necessarily integer) between\n *     0 and 100\n */\nexport type ProgressCallback = (percentageDone: number) => void;\n\n/**\n * A project plan.\n *\n * A project plan contains the current status of the issues in a YouTrack saved search. Additionally, it may also\n * contain the past project schedule reconstructed from the YouTrack activity log, and the future schedule computed from\n * YouTrack issue metadata plus the list of available contributors.\n */\nexport interface ProjectPlan {\n  /**\n   * Issues and their computed scheduling.\n   */\n  issues: YouTrackIssue[];\n\n  /**\n   * Warnings that may indicate incomplete or invalid data in YouTrack.\n   */\n  warnings: ProjectPlanWarning[];\n}\n\n/**\n * A warning concerning a project plan.\n */\nexport interface ProjectPlanWarning {\n  /**\n   * Human-readable warning message that can be displayed to the user.\n   */\n  description: string;\n\n  /**\n   * Issue identifier if the warning pertains to a specific issue, otherwise undefined.\n   */\n  issueId?: string;\n}\n\n/**\n * Options for retrieving YouTrack issue data and building a project plan.\n */\nexport interface RetrieveProjectPlanOptions {\n  /**\n   * Callback for progress updates.\n   *\n   * By default, there is no callback.\n   */\n  progressCallback?: ProgressCallback;\n\n  /**\n   * Whether issue activities should be omitted, in which case {@link YouTrackIssue.issueActivities} will be the empty\n   * array for all issues.\n   *\n   * Retrieving past issue activities is the most time-consuming part of reconstructing a project plan. If the activity\n   * information is not required, this option should therefore be set to `true`.\n   *\n   * By default, this is `false`; that is, issue activities *are* retrieved.\n   */\n  omitIssueActivities?: boolean;\n\n  /**\n   * Interval (in milliseconds) in which progress updates will be provided to the callback.\n   *\n   * By default, this is 200 milliseconds.\n   */\n  progressUpdateIntervalMs?: number;\n\n  /**\n   * Number of elements per HTTP request to array resources. See also {@link httpGetAll}().\n   *\n   * By default, this is 100.\n   */\n  restBatchSize?: number;\n}\n\n/**\n * An issue that can be scheduled.\n *\n * This interface contains all issue information relevant to its (future) scheduling.\n */\nexport interface SchedulableIssue {\n  /**\n   * Identifier.\n   *\n   * This corresponds to property `idReadable` of YouTrack REST API entity\n   * [Issue](https://www.jetbrains.com/help/youtrack/standalone/api-entity-Issue.html).\n   */\n  id: string;\n\n  /**\n   * The remaining ideal time (aka effort) for this issue, in milliseconds.\n   *\n   * The ideal time is relative to the regular work time. It *does not* include time for subissues. If this issue is a\n   * parent issue, this number is therefore typically different from the corresponding property stored in the issue\n   * tracker (where, by assumption, the remaining effort required for subissues *is* included in the remaining effort of\n   * the parent issue). If, in the issue tracker, the remaining effort is less than the total remaining effort of all\n   * subissues, the property in this interface is 0 (it is *never* negative).\n   */\n  remainingEffortMs: number;\n\n  /**\n   * The remaining wait time for this issue, in milliseconds.\n   *\n   * The wait time is relative to the regular work time. For example, if the regular work time is 40h/week, and the\n   * wait time is 16h, then this is 2 days in real time. This number is independent of the wait time of any subissues.\n   * (And it would *not* make sense to configure the issue tracker to sum or otherwise aggregate the wait time of\n   * subissues.)\n   *\n   * By default, there is no remaining wait time; that is, this property is 0.\n   */\n  remainingWaitTimeMs?: number;\n\n  /**\n   * Issue identifier (see {@link id}) of the parent issue.\n   *\n   * By default, the issue has no parent; that is, this property is the empty string.\n   */\n  parent?: string;\n\n  /**\n   * Whether this issue can be split across more than one person.\n   *\n   * By default, this is false.\n   */\n  splittable?: boolean;\n\n  /**\n   * Identifiers (see {@link id}) of the issues that this issue depends on.\n   *\n   * This includes only dependencies that are known.\n   *\n   * By default, there are no dependencies.\n   */\n  dependencies?: string[];\n\n  /**\n   * YouTrack-internal ID of the current assignee (YouTrack REST API entity name\n   * [User](https://www.jetbrains.com/help/youtrack/standalone/api-entity-User.html)), or empty string if none.\n   */\n  assignee?: string;\n}\n\n/**\n * A schedule for issues with remaining effort or wait time.\n */\nexport type Schedule = ScheduledIssue[];\n\n/**\n * Scheduled activities for an issue with remaining effort or wait time.\n *\n * The same guarantees hold as for {@link YouTrackIssue.issueActivities}.\n */\nexport type ScheduledIssue = IssueActivity[];\n\n/**\n * Options for scheduling issues with remaining effort or wait time.\n *\n * Its important to distinguish:\n * - Elapsed time (aka duration). [Cohn (2006, Agile Estimating and Planning)](http://www.worldcat.org/oclc/935197594)\n *   defines this as the amount of time that passes on a clock (or perhaps a calendar).\n * - Ideal time (aka effort or work). This, in contrast, is the amount of time that something takes when stripped of\n *   all peripheral activities (ibid.). Ideal time also does not contain time off work (such as nights or weekend).\n *\n * It is further important to define whether a quantity is given relative to the:\n * - actual work time of a contributor (say, 20h/week in case of part-time),\n * - regular work time (say, 40h/week), or\n * - real time (aka elapsed or wall-clock time; that is, 7 * 24h/week).\n *\n * In practice, this usually only affects the conversion factors between hours and days (say, 8h/d or 24h/d), and\n * between days and weeks (say, 5d/week vs. 7d/week).\n *\n * Finally, there are different options for mapping from work time to real time:\n * - Using the contributorss work schedule (say, Monday through Friday, between 9am and 5pm) as a step function. No\n *   activity is scheduled outside these time windows.\n * - Interpolation. Here, the simplified assumption is that work time is evenly distributed over the entire real week.\n *   While this choice is arguably less realistic, it has the benefit of simplicity, and is often still sufficient for\n *   estimation purposes.\n *\n * In this module, in the absence of further qualification, elapsed time is meant relative to real time (24h/d and\n * 7d/week), and ideal time is meant relative to regular work time (which is\n * [configurable in YouTrack](https://www.jetbrains.com/help/youtrack/standalone/resource-api-admin-timeTrackingSettings-workTimeSettings.html)).\n * This module uses interpolation to convert from work time to real time. (The ceiling function is used for any integer\n * conversion.)\n */\nexport interface SchedulingOptions {\n  /**\n   * Contributors between whom all work will be allocated.\n   */\n  contributors: Contributor[];\n\n  /**\n   * The number of minutes in a work week.\n   *\n   * This number defines the conversion factor between regular work time (say, 40h/week) and real time (7 * 24h/week).\n   *\n   * By default, this is 5d * 8h/d * 60min/h = 2400min.\n   */\n  minutesPerWeek?: number;\n\n  /**\n   * Resolution (in milliseconds) of the computed schedule. More precisely, the duration of one quantum (unit) of\n   * regular work time.\n   *\n   * The effect of this property is a quantization of time. Specifically, any elapsed time *relative to regular work\n   * time* is always a multiple of this setting.\n   *\n   * By default, this is 1 hour; that is, 3,600,000ms.\n   */\n  resolutionMs?: number;\n\n  /**\n   * Minimum ideal time (in multiples of {@link resolutionMs}) that each issue activity must have in order\n   * for the issue to be preemptable or splittable across more than one person.\n   *\n   * By default, this is 1.\n   */\n  minActivityDuration?: number;\n\n  /**\n   * Timestamp of the earliest point in time when unresolved issues with remaining effort or wait time can be scheduled.\n   *\n   * By default, the current time returned by `Date.now()` will be used.\n   */\n  predictionStartTimeMs?: number;\n}\n\n/**\n * Configuration of YouTrack.\n *\n * This defines the meaning of the\n * [YouTrack custom fields](https://www.jetbrains.com/help/youtrack/standalone/Custom-Fields.html) that pertain to\n * reconstructing a project plan from the activity log.\n */\nexport interface YouTrackConfig {\n  /**\n   * YouTrack-internal ID of the custom field (YouTrack REST API entity name\n   * [CustomField](https://www.jetbrains.com/help/youtrack/standalone/api-entity-CustomField.html)) that contains the\n   * state of an issue.\n   *\n   * The [field type](https://www.jetbrains.com/help/youtrack/standalone/Supported-Custom-Field-Types.html) must be\n   * `state`.\n   */\n  stateFieldId: string;\n\n  /**\n   * YouTrack-internal IDs of the unresolved states (YouTrack REST API entity name\n   * [StateBundleElement](https://www.jetbrains.com/help/youtrack/standalone/api-entity-StateBundleElement.html)) that\n   * should be considered inactive (that is, not being worked on).\n   */\n  inactiveStateIds: string[];\n\n  /**\n   * YouTrack-internal ID of the custom field that contains the remaining effort of an issue.\n   */\n  remainingEffortFieldId?: string;\n\n  /**\n   * YouTrack-internal ID of the custom field that contains the remaining wait time of an issue.\n   */\n  remainingWaitFieldId?: string;\n\n  /**\n   * YouTrack-internal ID of the custom field (YouTrack REST API entity name\n   * [CustomField](https://www.jetbrains.com/help/youtrack/standalone/api-entity-CustomField.html)) that contains the\n   * assignee of an issue.\n   *\n   * The [field type](https://www.jetbrains.com/help/youtrack/standalone/Supported-Custom-Field-Types.html) must be\n   * `user[1]`.\n   */\n  assigneeFieldId?: string;\n\n  /**\n   * Array of IDs of custom fields whose value should be included in the result.\n   *\n   * The values of these custom fields will be reported in {@link YouTrackIssue.customFields}. Currently, only\n   * single-value enum custom fields are supported. If an issue has no value for the custom field type (or a value that\n   * is not a single-value enum), the property will not be set in the result.\n   */\n  otherCustomFieldIds?: string[];\n\n  /**\n   * YouTrack-internal ID of the issue link type (YouTrack REST API entity name\n   * [IssueLinkType](https://www.jetbrains.com/help/youtrack/standalone/api-entity-IssueLinkType.html)) that\n   * establishes a finish-to-start dependency.\n   *\n   * Property {@link doesInwardDependOnOutward} determines the direction of the link type.\n   */\n  dependsLinkTypeId: string;\n\n  /**\n   * Whether the issue on the inward (target) side of the connection identified by {@link dependsLinkTypeId} depends on\n   * the issue on the outward (source) side.\n   *\n   * If this property is false, then it is the other way round.\n   *\n   * By default, this is true (which corresponds to the\n   * [YouTrack default setting](https://www.jetbrains.com/help/youtrack/standalone/Link-Issues.html) for the Depend\n   * issue link type).\n   */\n  doesInwardDependOnOutward?: boolean;\n\n  /**\n   * YouTrack-internal ID of the saved search whose issues will be retrieved.\n   *\n   * The order of the issues in the saved search is significant, as the list scheduling algorithm depends on it. Field\n   * {@link overlaySavedQueryId} can be used to override the order for a subset of the issues.\n   *\n   * Note that {@link ProjectPlan.issues} will follow the order of {@link savedQueryId} (with overlay).\n   */\n  savedQueryId: string;\n\n  /**\n   * YouTrack-internal ID of the saved search that contains an overlay order for a subset of the issues.\n   *\n   * As an example, suppose the issues in {@link savedQueryId} are A, B, C, D (in that order), and the issues in\n   * {@link overlaySavedQueryId} are F, D, E, B. In this case, issues E and F are ignored (because they are not\n   * contained in {@link savedQueryId}). The remaining issues B and D must appear in the overlay order, but any issue\n   * not in {@link overlaySavedQueryId} must be left in place. Consequently, the final order for the algorithm (and\n   * also in the output {@link ProjectPlan.issues}) is A, D, C, B.\n   */\n  overlaySavedQueryId?: string;\n\n  /**\n   * Duration (in milliseconds) below which a state change from active to inactive and back (or vice versa) is removed.\n   *\n   * For example, if `minStateChangeDurationMs` is 301, and the activity logs show that an issue was worked on between\n   * timestamp 100 and 400, and then again between timestamp 700 to 1000, then only one active period from 100 to 1000\n   * will actually be reported. On the other hand, if `minStateChangeDurationMs` is 901, then no active periods would be\n   * reported. If there is ambiguity whether to remove an inactive or active phase (as in the example), the inactive\n   * phase is removed.\n   */\n  minStateChangeDurationMs?: number;\n\n  /**\n   * The remaining effort (in milliseconds) for an unresolved issue where the custom field identified by\n   * {@link YouTrackConfig.remainingEffortFieldId} has no value.\n   *\n   * If the remaining effort for an issue has no value, a warning will be added to {@link ProjectPlan.warnings}.\n   *\n   * By default (if this property is undefined), this is 0.\n   */\n  defaultRemainingEffortMs?: number;\n\n  /**\n   * The remaining wait time (in milliseconds) for an unresolved issue where the custom field identified by\n   * {@link YouTrackConfig.remainingWaitFieldId} has no value.\n   *\n   * If the remaining wait time for an issue has no value, a warning will be added to {@link ProjectPlan.warnings}.\n   *\n   * By default (if this property is undefined), this is 0.\n   */\n  defaultWaitTimeMs?: number;\n\n  /**\n   * User-defined function that determines whether a given YouTrack issue is splittable across multiple persons.\n   *\n   * The function must not modify the issue given as argument.\n   *\n   * By default, no issue is splittable across multiple persons.\n   *\n   * @param issue the YouTrack issue\n   * @return whether the given issue is splittable\n   */\n  isSplittableFn?(issue: YouTrackIssue): boolean;\n}\n\n/**\n * A YouTrack issue and its scheduling.\n *\n * Timestamps are in milliseconds since January 1, 1970 00:00:00 UTC.\n *\n * Note that this interface inherits from Required<{@link SchedulableIssue}> (unfortunately, TypeDoc is unable to\n * interpret the extends clause of this class).\n */\nexport interface YouTrackIssue extends Required<SchedulableIssue> {\n  /**\n   * The issue summary (that is, title).\n   */\n  summary: string;\n\n  /**\n   * Issue activities; that is, periods in which the issue is active/scheduled.\n   *\n   * The activities are sorted by {@link IssueActivity.end}. If there are several issue activities with the same end\n   * timestamp but different assignees, the order among them is undefined (though deterministic). Issue activities with\n   * the same assignee are guaranteed to not overlap (assuming each activity is a half-closed interval that excludes its\n   * end timestamp). Moreover, if `a` and `b` are two activities with `a.assignee === b.assignee` and\n   * `a.end === b.start`, then they differ in {@link IssueActivity.isWaiting}.\n   *\n   * It is guaranteed that activities representing wait time (where {@link IssueActivity.isWaiting} is true) do not\n   * overlap with any other activities.\n   *\n   * Note that {@link groupByIntervalAndWaitStatus}() can be used if activities need to be grouped by interval.\n   */\n  issueActivities: IssueActivity[];\n\n  /**\n   * Timestamp when the issue was resolved, or `Number.MAX_SAFE_INTEGER` if it is unresolved.\n   *\n   * If an issue is resolved, then the inherited properties {@link SchedulableIssue.remainingEffortMs} and\n   * {@link SchedulableIssue.remainingWaitTimeMs} are both 0 (irrespective of their actual values in YouTrack).\n   */\n  resolved: number;\n\n  /**\n   * YouTrack-internal ID of the current state of the issue (YouTrack REST API entity name\n   * [StateBundleElement](https://www.jetbrains.com/help/youtrack/standalone/api-entity-StateBundleElement.html)), or\n   * empty string if the state field is not set.\n   */\n  state: string;\n\n  /**\n   * Dictionary of custom field values.\n   *\n   * The keys in this dictionary are (possibly a subset of) the elements in\n   * {@link YouTrackConfig.otherCustomFieldIds}. Each value is the ID of the enum bundle element (YouTrack REST API\n   * entity name\n   * [EnumBundleElement](https://www.jetbrains.com/help/youtrack/standalone/api-entity-EnumBundleElement.html)).\n   * If an issue has no value for a custom field, the entry is omitted from the dictionary.\n   */\n  customFields: {[id: string]: string};\n}\n","import { IssueNode, SchedulableIssue } from './api-types';\n\n/**\n * Creates an issue tree (or forest) representing the given issues, and returns an iterable over all root nodes.\n *\n * @typeparam T the issue type\n * @param issues Array of issues. The array is expected to be closed in the sense that a parent or dependency\n *     referenced by any of the issues is guaranteed to be contained in `issues`, too.\n * @return An iterable over all root nodes. The iterable will return the root nodes in the order they appeared in the\n *     array. Likewise, the children of each node (at any level) will be stored in input order.\n */\nexport function makeForest<T extends SchedulableIssue>(issues: T[]): Iterable<IssueNode<T>> {\n  const idToNode: Map<string, IssueNode<T>> = issues\n      .reduce((map, issue, index) => map.set(issue.id, {\n        index,\n        issue,\n        children: [],\n        dependencies: [],\n        dependents: [],\n      }), new Map<string, IssueNode<T>>());\n  // Creating array, so we later close over a simple data structure instead of a map.\n  const nodes: IssueNode<T>[] = Array.from(idToNode.values());\n  for (const node of nodes) {\n    const issue: T = node.issue;\n    const parentKey: string | undefined = issue.parent;\n    if (parentKey !== undefined && parentKey.length > 0) {\n      node.parent = idToNode.get(parentKey)!;\n      node.parent.children.push(node);\n    }\n\n    if (issue.dependencies !== undefined) {\n      for (const dependency of issue.dependencies) {\n        const dependencyNode: IssueNode<T> = idToNode.get(dependency)!;\n        dependencyNode.dependents.push(node);\n        node.dependencies.push(dependencyNode);\n      }\n    }\n  }\n  return {\n    * [Symbol.iterator]() {\n      for (const node of nodes[Symbol.iterator]()) {\n        if (node.parent === undefined) {\n          yield node;\n        }\n      }\n    },\n  };\n}\n\n/**\n * Traverses each of the given issue trees and invokes the given visitor functions.\n *\n * @typeparam T the issue type\n * @param rootNodes The root nodes of the trees making up the forest.\n * @param enterNode Visitor function that will be called on entering a node (that is, before any of its children have\n *     been visited).\n * @param enterNode.node The node that is currently being visited.\n * @param leaveNode Visitor function that will be called on leaving a node (that is, after all of its children have been\n *     visited).\n * @param leaveNode.node The node that is currently being visited.\n */\nexport function traverseIssueForest<T extends SchedulableIssue>(\n    rootNodes: Iterable<IssueNode<T>>,\n    enterNode: (node: IssueNode<T>) => void,\n    leaveNode: (node: IssueNode<T>) => void = () => { /* no-op */ }\n): void {\n  let currentIterator: Iterator<IssueNode<T>> = rootNodes[Symbol.iterator]();\n  const stack: [IssueNode<T>, Iterator<IssueNode<T>>][] = [];\n  while (true) {\n    const iteratorResult = currentIterator.next();\n    if (iteratorResult.done) {\n      if (stack.length === 0) {\n        break;\n      }\n      let node: IssueNode<T>;\n      [node, currentIterator] = stack.pop()!;\n      leaveNode(node);\n    } else {\n      const node: IssueNode<T> = iteratorResult.value;\n      enterNode(node);\n      if (node.children.length > 0) {\n        stack.push([node, currentIterator]);\n        currentIterator = node.children[Symbol.iterator]();\n      } else {\n        leaveNode(node);\n      }\n    }\n  }\n}\n","/**\n * Internal message interface between the worker and the master.\n *\n * None of this is public API.\n */\n\n/* API documentation barrier. */\n\nimport { SchedulingFailure } from './api-types';\nimport { computeSchedule } from './scheduling';\n\n// Ambient declarations.\n//\n// We do not rely on the TypeScript webworker library, because the current file is meant to be importable also by code\n// that requires the DOM library. However, Web Worker API and DOM are at present mutually exclusive.\n// https://github.com/Microsoft/TypeScript/issues/20595\n// Since the Web Worker API used in this file is extremely simple, we just make the declarations ourselves here.\n\ndeclare global {\n  /**\n   * A web workers global scope.\n   */\n  interface DedicatedWorkerGlobalScope {\n    /**\n     * EventHandler to be called when a message is sent to the worker using its `postMessage()` method.\n     */\n    onmessage: ((this: DedicatedWorkerGlobalScope, event: MessageEvent) => any) | null;\n\n    /**\n     * Sends a message to the main thread that spawned the worker.\n     *\n     * The web worker API specifies an optional second argument for postMessage(), which we do not use. Unfortunately,\n     * information on the web is not crystal clear on whether it should be possible to transfer (without copying) a\n     * plain JavaScript object from the worker to the thread that spawned it. In C++ terminology, this would be called\n     * move semantics.\n     *\n     * See for instance a discussion on\n     * [StackOverflow](https://stackoverflow.com/questions/33544994/pass-object-by-reference-from-to-webworker) or a\n     * related\n     * [issue of the TypeScript project on GitHub]\n     * (https://github.com/Microsoft/TypeScript/issues/25176#issuecomment-400117198).\n     *\n     * For now the answer is, however, very clear. It is not possible. Chrome 74 reports \"Value at index 0 does not have\n     * a transferable type\" if we were to set the `transfer` argument in the postMessage() invocation to `[plainObject]`\n     * (i.e., an array with a plain JavaScript object as only element).\n     */\n    postMessage(message: any): void;\n\n    /**\n     * Closes the worker from inside the worker itself.\n     */\n    close(): void;\n  }\n\n  /**\n   * The DedicatedWorkerGlobalScope constructor.\n   */\n  // tslint:disable-next-line:variable-name\n  let DedicatedWorkerGlobalScope: new() => DedicatedWorkerGlobalScope;\n}\n\n/**\n * Type guard that returns whether the given value is a {@link DedicatedWorkerGlobalScope}.\n */\nexport function isDedicatedWorkerGlobalScope(value: any): value is DedicatedWorkerGlobalScope {\n  return typeof DedicatedWorkerGlobalScope === 'function' && value instanceof DedicatedWorkerGlobalScope;\n}\n\n\n// Internal interfaces\n\n/**\n * Message from master to worker with all information to start processing.\n */\nexport type ComputeScheduleParameters = Parameters<typeof computeSchedule>;\n\n/**\n * Message from worker to master containing the result.\n */\nexport type ComputeScheduleReturnType = ReturnType<typeof computeSchedule>;\n\n/**\n * Factory for a web worker.\n *\n * The {@link Worker} constructor requires a script URL that is either absolute or relative *to the the domain* of the\n * current script. See: https://html.spec.whatwg.org/multipage/workers.html#dom-worker\n *\n * Unfortunately, the location of the current script is generally unknowable. Additionally, in case of the UMD\n * distribution of this module, the worker script is the simply the current script (for ease of distribution).\n * Otherwise, the worker script is in a separate file, and we expect a bundler to substitute the correct absolute URL at\n * build time.\n */\nexport interface WorkerFactory {\n  /**\n   * Creates and returns a new {@link Worker}, or a failure if an error occurs.\n   */\n  createWorker?: () => Worker | SchedulingFailure;\n}\n\nexport const workerFactory: WorkerFactory = {};\n","// Builders like Parcel substitute the constructor argument if it is a relative path.\nimport { workerFactory } from './worker-interface';\n\nworkerFactory.createWorker = () => new Worker('./worker.ts');\n","/**\n * A classical min-heap.\n */\n\n/** API documentation barrier */\n\n/**\n * Comparator function for the min-heap.\n */\nexport type Comparator<T> = (left: T, right: T) => number;\n\nfunction parentIdx(idx: number): number {\n  return Math.trunc((idx - 1) / 2);\n}\n\nfunction leftChildIdx(idx: number): number {\n  return 2 * idx + 1;\n}\n\nfunction rightChildIdx(idx: number): number {\n  return 2 * idx + 2;\n}\n\nfunction swap<T>(array: T[], leftIdx: number, rightIdx: number): void {\n  const temp = array[leftIdx];\n  array[leftIdx] = array[rightIdx];\n  array[rightIdx] = temp;\n}\n\nfunction heapify<T>(array: T[], comparatorFn: Comparator<T>, rootIdx: number) {\n  // Precondition: indices leftChildIdx(rootIdx) and rightChildIdx(rootIdx) are roots of heaps\n  let currentIdx = rootIdx;\n  do {\n    let minIdx = currentIdx;\n    const l = leftChildIdx(currentIdx);\n    if (l < array.length && comparatorFn(array[l], array[minIdx]) < 0) {\n      minIdx = l;\n    }\n    const r = rightChildIdx(currentIdx);\n    if (r < array.length && comparatorFn(array[r], array[minIdx]) < 0) {\n      minIdx = r;\n    }\n    if (minIdx === currentIdx) {\n      break;\n    }\n    swap(array, currentIdx, minIdx);\n    currentIdx = minIdx;\n  } while (true);\n}\n\n/**\n * A binary min-heap.\n *\n * @typeparam T the type of elements held in this min heap\n */\nexport default class MinHeap<T> {\n  private readonly comparatorFn_: Comparator<T>;\n  private readonly array_: T[];\n\n  constructor(iterable: Iterable<T>, comparatorFn: Comparator<T>) {\n    this.comparatorFn_ = comparatorFn;\n    this.array_ = Array.from(iterable);\n    for (let i = Math.trunc(this.array_.length / 2) - 1; i >= 0; --i) {\n      heapify(this.array_, this.comparatorFn_, i);\n    }\n  }\n\n  /**\n   * Inserts the given element into this min-heap.\n   *\n   * The runtime of this operation is O(log n).\n   *\n   * @param element the element to add\n   */\n  public add(element: T): void {\n    this.array_.push(element);\n    let currentIdx = this.array_.length - 1;\n    do {\n      const p = parentIdx(currentIdx);\n      if (currentIdx <= 0 || this.comparatorFn_(this.array_[p], this.array_[currentIdx]) < 0) {\n        break;\n      }\n      swap(this.array_, p, currentIdx);\n      currentIdx = p;\n    } while (true);\n  }\n\n  /**\n   * Retrieves and removes the minimum element of this min-heap.\n   *\n   * The runtime of this operation is O(log n).\n   *\n   * @return the minimum element or undefined if the min-heap is empty\n   */\n  public extractMin(): T | undefined {\n    if (this.array_.length === 0) {\n      return undefined;\n    } else if (this.array_.length === 1) {\n      return this.array_.pop();\n    }\n\n    const min = this.array_[0];\n    this.array_[0] = this.array_.pop()!;\n    heapify(this.array_, this.comparatorFn_, 0);\n    return min;\n  }\n\n  /**\n   * Returns whether this min-heap is empty.\n   */\n  public isEmpty(): boolean {\n    return this.array_.length === 0;\n  }\n}\n","/**\n * Algorithm for project planning. More precisely, *list scheduling* with support for machines running at different\n * speeds, optional preemption, optional splitting of jobs across machines, release dates, and delivery times.\n *\n * See README file for details.\n */\n\n/** API documentation barrier */\n\nimport { strict as assert } from 'assert';\nimport {\n  Job,\n  JobFragment,\n  JobSplitting,\n  Schedule,\n  ScheduledJob,\n  SchedulingFailure,\n  SchedulingInstance,\n} from './api-types';\nimport MinHeap from './minheap';\n\n/**\n * Type that consists of the union of all properties that are marked as optional through a question mark.\n *\n * Note that properties that have undefined in their domain, but no question mark next to the property name are *not*\n * included. Also note that, in strict compilation mode, TypeScript will add undefined to the domain of the property if\n * there is a question mark next to the property name.\n *\n * @typeparam T generic type parameter\n */\ntype OptionalPropertyNames<T extends {}> = {[K in keyof T]-?: {} extends {[_ in K]: T[K]} ? K : never}[keyof T];\ntype Defined<T> = T extends undefined ? never : T;\ntype OnlyOptionals<T extends {}> = {[K in OptionalPropertyNames<T>]: Defined<T[K]>};\n\nconst JOB_DEFAULTS = Object.freeze<OnlyOptionals<Job>>({\n  deliveryTime: 0,\n  splitting: JobSplitting.PREEMPTION,\n  dependencies: [],\n  releaseTime: 0,\n  preAssignment: -1,\n});\n\n/**\n * Runs the list scheduling algorithm on the given problem instance and returns the result.\n *\n * See [the project page](https://github.com/fschopp/project-planning-js) for more information on the algorithm.\n *\n * @param instance the problem instance\n * @return solution or a human-readable failure description if the problem instance is invalid (for example, has a\n *     cyclic dependency graph)\n */\nexport function computeSchedule(instance: SchedulingInstance): Schedule | SchedulingFailure {\n  const nonNegativeInteger = (number: number) => number >= 0 && Number.isInteger(number);\n  const positiveIntegers = (numbers: number[]) =>\n      numbers.filter((number) => number <= 0 || !Number.isInteger(number)).length === 0;\n  const undefinedOrNonNegativeInteger = (number: number | undefined) =>\n      number === undefined || nonNegativeInteger(number);\n  const undefinedOrNonNegativeIntegers = (...numbers: (number | undefined)[]) =>\n      numbers.filter((number) => !undefinedOrNonNegativeInteger(number)).length === 0;\n  const undefinedOrIntegerWithinZeroTo = (upperBoundExcl: number, number: number | undefined) =>\n      number === undefined || nonNegativeInteger(number) && number < upperBoundExcl;\n  const integersWithinZeroTo = (upperBoundExcl: number, numbers: number[]) =>\n      numbers.filter((number) => !(number >= 0 && nonNegativeInteger(number) && number < upperBoundExcl)).length === 0;\n\n  const numMachines: number = instance.machineSpeeds.length;\n  const numJobs: number = instance.jobs.length;\n\n  if (numMachines === 0) {\n    return 'At least one machine is required to compute a schedule.';\n  } else if (\n      !positiveIntegers(instance.machineSpeeds) ||\n      instance.jobs.filter((job) =>\n          !nonNegativeInteger(job.size) ||\n          !undefinedOrNonNegativeIntegers(job.deliveryTime, job.releaseTime) ||\n          !undefinedOrIntegerWithinZeroTo(numMachines, job.preAssignment) ||\n          (job.dependencies !== undefined && !integersWithinZeroTo(numJobs, job.dependencies))\n      ).length > 0 ||\n      !undefinedOrNonNegativeInteger(instance.minFragmentSize)\n  ) {\n    return 'All job processing times and machine speeds need to be non-negative integers. ' +\n        'All job dependency and pre-assignment indices need to be within bounds.';\n  }\n\n  const jobs: Required<Job>[] = instance.jobs.map((job) => Object.assign({}, JOB_DEFAULTS, job));\n  const minFragmentSize: number = instance.minFragmentSize === undefined ? 0 : instance.minFragmentSize;\n  return new ListScheduling(numMachines, instance.machineSpeeds, jobs, minFragmentSize).schedule;\n}\n\n/**\n * A gap in the schedule for a particular machine. A gap can be filled when scheduling subsequent jobs.\n */\ninterface Gap {\n  startTime: number;\n  endTime: number;\n}\n\n/**\n * Linked list of gaps.\n */\ninterface GapsList {\n  head: Gap;\n  tail: GapsList | null;\n}\n\n/**\n * A machine and associated data required by {@link ListScheduling.scheduleJob}().\n */\ninterface Machine {\n  /**\n   * Index in array of all machines.\n   *\n   * This is a value between 0 (inclusive) and the length of {@link SchedulingInstance.machineSpeeds} (exclusive).\n   */\n  readonly index: number;\n\n  /**\n   * Index in array of available machines for the current job.\n   */\n  readonly availableIdx: number;\n\n  /**\n   * Speed of the machine.\n   */\n  readonly speed: number;\n\n  /**\n   * Time when the current job fragment started on the machine, or null if the current job is not currently running on\n   * the machine.\n   */\n  currentFragmentStart: number | null;\n\n  /**\n   * Linked list of gaps.\n   *\n   * Whenever starting to schedule a job, this is initialized with a tail list of {@link ListScheduling.gapsLists_}.\n   */\n  gapsList: GapsList;\n\n  /**\n   * Node of the linked list of gaps before the current node (which is {@link gapsList}).\n   *\n   * This field is only needed to commit the insertion of job fragments by making changes to the gap list shared\n   * between scheduling of individual jobs.\n   */\n  previousGapsList: GapsList;\n}\n\n/**\n * Node in the job graph induced by the dependencies.\n */\ninterface JobGraphNode {\n  idx: number;\n  numDependencies: number;\n  dependents: JobGraphNode[];\n}\n\n/**\n * Abstraction for a collection of machines available for a job.\n */\ninterface AvailableMachineIndices {\n  readonly length: number;\n  forEach(callbackfn: (index: number, availableIdx: number) => void): void;\n  map<T>(callbackfn: (index: number, availableIdx: number) => T): T[];\n}\n\n/**\n * Internal class whose sole purpose is to store algorithm state, so it does not have to be inconveniently passed around\n * between functions.\n */\nclass ListScheduling {\n  public readonly schedule: Schedule | SchedulingFailure;\n\n  private readonly numMachines_: number;\n  private readonly machineSpeeds_: number[];\n  private readonly jobs_: Required<Job>[];\n  private readonly minFragmentSize_: number;\n\n  private readonly gapsLists_: GapsList[];\n\n  constructor(numMachines: number, machineSpeeds: number[], jobs: Required<Job>[], minFragmentSize: number) {\n    this.numMachines_ = numMachines;\n    this.machineSpeeds_ = machineSpeeds;\n    this.jobs_ = jobs;\n    this.minFragmentSize_ = minFragmentSize;\n\n    this.gapsLists_ = this.machineSpeeds_.map((ignoredMachineSpeed) => ({\n      head: {\n        startTime: Number.MIN_SAFE_INTEGER,\n        endTime: 0,\n      },\n      tail: {\n        head: {\n          startTime: 0,\n          endTime: Number.MAX_SAFE_INTEGER,\n        },\n        tail: null,\n      },\n    }));\n    this.schedule = this.computeSchedule();\n  }\n\n  /**\n   * Returns the next event for the given machine.\n   *\n   * This method has side-effects. It updates field {@link Machine.previousGapsList} and {@link Machine.gapsList} of the\n   * given machine.\n   */\n  private static nextTimeStamp(minWallClockTime: number, earliestStart: number, machine: Machine): number {\n    let currentGap: Gap = machine.gapsList.head;\n\n    assert(Number.isInteger(minWallClockTime) && Number.isInteger(earliestStart) &&\n        Number.isInteger(currentGap.startTime) && Number.isInteger(currentGap.endTime), 'Invalid arguments');\n\n    if (machine.currentFragmentStart === null) {\n      while (true) {\n        const timeStamp = Math.max(earliestStart, currentGap.startTime) + minWallClockTime;\n        if (timeStamp <= currentGap.endTime) {\n          return timeStamp;\n        }\n        assert(machine.gapsList.tail !== null, 'Invariant: last gap has endTime === Number.MAX_SAFE_INTEGER');\n        machine.previousGapsList = machine.gapsList;\n        machine.gapsList = machine.gapsList.tail!;\n        currentGap = machine.gapsList.head;\n      }\n    } else {\n      return currentGap.endTime;\n    }\n  }\n\n  /**\n   * Adjust the linked list of gaps to account for the newly scheduled job fragment.\n   *\n   * There are 4 cases to consider. The new job fragment either:\n   * 1. Fills out the current gap completely. In this case, the current gap needs to be removed\n   *    entirely.\n   * 2. Aligns with the start of the current gap, but ends before it. In this case, the start of the current gap is\n   *    changed to when the new job fragment ends.\n   * 3. Does not start with the current gap, but aligns with the end of it. In this case, the end of the current gap is\n   *    changed to when the job fragment starts.\n   * 4. If the current gap aligns with neither start nor end of the current gap, a new gap is inserted before the\n   *    current gap. It starts with the current gap and ends with the start of the job fragment. The start of the\n   *    current gap is then changed to the end of the job fragment.\n   *\n   * @param machineState State of the machine that the job fragment has been scheduled on.\n   * @param end end time of the job fragment\n   * @param commitGaps if true, then commit the updated gaps to the state that is shared across scheduling of individual\n   *     jobs\n   */\n  private adjustGaps(machineState: Machine, end: number, commitGaps: boolean): void {\n    assert(machineState.index >= 0 && machineState.index < this.numMachines_ &&\n        machineState.currentFragmentStart !== null && Number.isInteger(machineState.currentFragmentStart) &&\n        Number.isInteger(end) && machineState.currentFragmentStart <= end, 'Invalid arguments');\n\n    // machineState also points to state that is shared across scheduling of individual jobs. This shared state we must\n    // not modify if dryRun is true. We therefore cannot make modifications to the properties of\n    // machineState.previousGapsList or machineState.gap.\n\n    const start: number = machineState.currentFragmentStart!;\n    const currentGap = machineState.gapsList.head;\n\n    if (commitGaps) {\n      if (start === currentGap.startTime && end === currentGap.endTime) {\n        machineState.previousGapsList.tail = machineState.gapsList.tail;\n      } else if (start === currentGap.startTime) {\n        currentGap.startTime = end;\n      } else if (end === currentGap.endTime) {\n        currentGap.endTime = start;\n        machineState.previousGapsList = machineState.gapsList;\n        // Note that machineState.gapsList will be updated below.\n      } else {\n        machineState.previousGapsList.tail = {\n          head: {\n            startTime: currentGap.startTime,\n            endTime: start,\n          },\n          tail: machineState.gapsList,\n        };\n        currentGap.startTime = end;\n      }\n    }\n\n    if (end === currentGap.endTime) {\n      // Note that machineState.gapsList.tail === null would imply that the current gap is the last gap; that is,\n      // currentGap.endTime === Number.MAX_SAFE_INTEGER. But we are also in the case where (end === currentGap.endTime).\n      // Since we don't support schedules that long, it is safe to assert:\n      assert(machineState.gapsList.tail !== null, 'Expected currentGap.endTime < Number.MAX_SAFE_INTEGER');\n      machineState.gapsList = machineState.gapsList.tail!;\n    } else if (!commitGaps) {\n      machineState.gapsList = {\n        head: {\n          startTime: end,\n          endTime: currentGap.endTime,\n        },\n        tail: machineState.gapsList.tail,\n      };\n    }\n\n    // Upon return, we will be \"before\" the gap represented by machineState.gapsList.head.\n    machineState.currentFragmentStart = null;\n  }\n\n  private createJobFragment(machineState: Machine, end: number, scheduledJob?: ScheduledJob): void {\n    if (scheduledJob) {\n      const start: number = machineState.currentFragmentStart!;\n      if (end - start > 0) {\n        const jobFragment: JobFragment = {\n          machine: machineState.index,\n          start,\n          end,\n          isWaiting: false,\n        };\n        scheduledJob.push(jobFragment);\n      }\n    }\n    this.adjustGaps(machineState, end, scheduledJob !== undefined);\n  }\n\n  /**\n   * Schedules processing of a job and returns its completion time (excluding delivery time).\n   */\n  private scheduleJob(availableMachineIndices: AvailableMachineIndices, size: number, isPreemptible: boolean,\n      earliestStart: number, scheduledJob?: ScheduledJob): number {\n    assert(availableMachineIndices.length > 0 && Number.isInteger(size) && size >= 0 &&\n        Number.isInteger(earliestStart), 'Invalid arguments');\n\n    const minFragmentSize = isPreemptible ? Math.min(size, this.minFragmentSize_) : size;\n    let currentSpeed = 0;\n    let lastTimestamp = earliestStart;\n    let remainingSize = size;\n    const machines: Machine[] = availableMachineIndices.map((index, availableIdx): Machine => {\n      const gapsList = this.gapsLists_[index];\n      assert(gapsList.tail !== null, 'Invariant: at least 2 elements in linked list gapsList');\n      return {\n        index,\n        availableIdx,\n        speed: this.machineSpeeds_[index],\n        currentFragmentStart: null,\n        previousGapsList: gapsList,\n        gapsList: gapsList.tail!,\n      };\n    });\n\n    while (remainingSize > 0) {\n      let eventTime: number = Number.MAX_SAFE_INTEGER;\n      let machine: Machine = machines[0];\n      availableMachineIndices.forEach((index, availableIdx) => {\n        const minWallClockTime = Math.ceil(minFragmentSize / machines[availableIdx].speed);\n        const machineEventTime = ListScheduling.nextTimeStamp(minWallClockTime, earliestStart, machines[availableIdx]);\n        if (machineEventTime < eventTime) {\n          eventTime = machineEventTime;\n          machine = machines[availableIdx];\n        }\n      });\n      let isProjectedEndTime: boolean = false;\n      const currentProjectedEndTime: number = Math.ceil(lastTimestamp + remainingSize / currentSpeed);\n      if (currentProjectedEndTime < eventTime) {\n        eventTime = currentProjectedEndTime;\n        isProjectedEndTime = true;\n      }\n      assert(Number.isInteger(eventTime) && Number.isInteger(lastTimestamp) && Number.isInteger(currentSpeed),\n          'Invariant: timestamps and speeds are integers');\n      remainingSize -= (eventTime - lastTimestamp) * currentSpeed;\n      assert(!isProjectedEndTime || remainingSize <= 0,\n          'Invariant: isProjectedEndTime implies remainingSize <= 0');\n\n      if (!isProjectedEndTime) {\n        if (machine.currentFragmentStart === null) {\n          const nextGap: Gap = machine.gapsList.head;\n          machine.currentFragmentStart = Math.max(earliestStart, nextGap.startTime);\n          remainingSize -= (eventTime - machine.currentFragmentStart) * machine.speed;\n          currentSpeed += machine.speed;\n        } else {\n          this.createJobFragment(machine, eventTime, scheduledJob);\n          currentSpeed -= machine.speed;\n          assert(machine.currentFragmentStart === null && currentSpeed >= 0);\n        }\n      }\n\n      lastTimestamp = eventTime;\n      assert(Number.isInteger(lastTimestamp) && Number.isInteger(remainingSize),\n          'Invariant: timestamps and durations are integers');\n    }\n\n    availableMachineIndices.forEach((ignoredIndex, availableIdx) => {\n      if (machines[availableIdx].currentFragmentStart !== null) {\n        this.createJobFragment(machines[availableIdx], lastTimestamp, scheduledJob);\n      }\n    });\n\n    return lastTimestamp;\n  }\n\n  /**\n   * Adds the given delivery time on the given machine to the given job schedule, and returns the overall completion\n   * time of the job.\n   */\n  private static scheduleDeliveryTime(machineIdx: number, processingCompletionTime: number, deliveryTime: number,\n      scheduledJob: ScheduledJob): number {\n    assert(Number.isInteger(deliveryTime), 'Invalid arguments');\n    assert(scheduledJob.length > 0 ? processingCompletionTime === scheduledJob[scheduledJob.length - 1].end : true,\n        'Processing completion time is end timestamp of last job fragment');\n    let completionTime: number = processingCompletionTime;\n    if (deliveryTime > 0) {\n      completionTime += deliveryTime;\n      const deliveryJobFragment: JobFragment = {\n        machine: machineIdx,\n        start: processingCompletionTime,\n        end: completionTime,\n        isWaiting: true,\n      };\n      scheduledJob.push(deliveryJobFragment);\n    }\n    return completionTime;\n  }\n\n  private allMachines(): AvailableMachineIndices {\n    return {\n      length: this.machineSpeeds_.length,\n      forEach(callbackfn: (index: number, availableIdx: number) => void): void {\n        for (let i = 0; i < this.length; ++i) {\n          callbackfn(i, i);\n        }\n      },\n      map<T>(callbackfn: (index: number, availableIdx: number) => T): T[] {\n        const array: T[] = [];\n        array.length = this.length;\n        for (let i = 0; i < this.length; ++i) {\n          array[i] = callbackfn(i, i);\n        }\n        return array;\n      },\n    };\n  }\n\n  private static singleMachine(singleMachineIdx: number): AvailableMachineIndices {\n    return {\n      length: 1,\n      forEach(callbackfn: (index: number, availableIdx: number) => void): void {\n        callbackfn(singleMachineIdx, 0);\n      },\n      map<T>(callbackfn: (index: number, availableIdx: number) => T): T[] {\n        return [callbackfn(singleMachineIdx, 0)];\n      },\n    };\n  }\n\n  private computeSchedule(): Schedule | SchedulingFailure {\n    const noDependencyNodes: JobGraphNode[] = [];\n    const jobGraphNodes: JobGraphNode[] = this.jobs_.map((job, index): JobGraphNode => ({\n      idx: index,\n      numDependencies: job.dependencies.length,\n      dependents: [],\n    }));\n    for (let i = 0; i < this.jobs_.length; ++i) {\n      const job = this.jobs_[i];\n      const jobGraphNode = jobGraphNodes[i];\n      for (const dependencyIdx of job.dependencies) {\n        jobGraphNodes[dependencyIdx].dependents.push(jobGraphNode);\n      }\n      if (job.dependencies.length === 0) {\n        noDependencyNodes.push(jobGraphNode);\n      }\n    }\n\n    const allMachines: AvailableMachineIndices = this.allMachines();\n    const newSchedule: Schedule = this.jobs_.map((ignoredJob) => []);\n    const finishTimes: number[] = this.jobs_.map((ignoredJob) => -1);\n    let numScheduledJobs = 0;\n    const noDependencyNodesHeap = new MinHeap<JobGraphNode>(noDependencyNodes, (left, right) => left.idx - right.idx);\n    while (!noDependencyNodesHeap.isEmpty()) {\n      const jobGraphNode: JobGraphNode = noDependencyNodesHeap.extractMin()!;\n      const job = this.jobs_[jobGraphNode.idx];\n      const isPreemptible: boolean = job.splitting !== JobSplitting.NONE;\n      const earliestStartTime = job.dependencies.reduce((previousEarliestStartTime, dependencyIdx) => {\n        const dependencyFinishTime: number = finishTimes[dependencyIdx];\n        assert(dependencyFinishTime >= 0, 'Dependencies are scheduled before their dependents');\n        return Math.max(previousEarliestStartTime, dependencyFinishTime);\n      }, job.releaseTime);\n      let availableMachines: AvailableMachineIndices = allMachines;\n      let deliveryMachineIdx: number | undefined;\n      if (job.splitting === JobSplitting.MULTIPLE_MACHINES) {\n        deliveryMachineIdx = job.preAssignment >= 0\n            ? job.preAssignment\n            : 0;\n      } else if (job.preAssignment >= 0) {\n        availableMachines = ListScheduling.singleMachine(job.preAssignment);\n        deliveryMachineIdx = job.preAssignment;\n      } else {\n        let maxCompletionTime: number = Number.MAX_SAFE_INTEGER;\n        for (let i = 0; i < this.numMachines_; ++i) {\n          const currentAvailableMachines = ListScheduling.singleMachine(i);\n          const currentCompletionTime =\n              this.scheduleJob(currentAvailableMachines, job.size, isPreemptible, earliestStartTime);\n          if (currentCompletionTime < maxCompletionTime) {\n            availableMachines = currentAvailableMachines;\n            deliveryMachineIdx = i;\n            maxCompletionTime = currentCompletionTime;\n          }\n        }\n      }\n      assert(deliveryMachineIdx !== undefined);\n      const completionTime: number = this.scheduleJob(\n          availableMachines, job.size, isPreemptible, earliestStartTime, newSchedule[jobGraphNode.idx]);\n      finishTimes[jobGraphNode.idx] = ListScheduling.scheduleDeliveryTime(\n          deliveryMachineIdx!, completionTime, job.deliveryTime, newSchedule[jobGraphNode.idx]);\n      ++numScheduledJobs;\n      for (const dependent of jobGraphNode.dependents) {\n        --dependent.numDependencies;\n        if (dependent.numDependencies === 0) {\n          noDependencyNodesHeap.add(dependent);\n        }\n      }\n    }\n\n    return numScheduledJobs !== this.jobs_.length\n        ? 'Detected a cycle in the dependency graph.'\n        : newSchedule;\n  }\n}\n","import { strict as assert } from 'assert';\nimport { isSchedulingFailure, Schedule, SchedulingFailure } from './api-types';\nimport { ComputeScheduleParameters, ComputeScheduleReturnType, workerFactory } from './worker-interface';\n\n/**\n * Runs (in a separate thread) the list scheduling algorithm on the given problem instance and returns the result\n * asynchronously.\n *\n * See [the project page](https://github.com/fschopp/project-planning-js) for more information on the algorithm.\n *\n * @param args argument list that will be passed on to {@link computeSchedule}() unaltered\n * @return promise that will be resolved with the solution or rejected with a {@link SchedulingFailure} containing a\n *     human-readable failure description if the problem instance is invalid (for example, has a cyclic dependency\n *     graph)\n */\nexport function computeScheduleAsync(...args: ComputeScheduleParameters): Promise<Schedule> {\n  assert(workerFactory.createWorker !== undefined, 'workerFactory.createWorker cannot be undefined');\n  const worker: Worker | SchedulingFailure = workerFactory.createWorker!();\n  if (isSchedulingFailure(worker)) {\n    const failure: SchedulingFailure = worker;\n    return Promise.reject(failure);\n  }\n\n  let isSettled: boolean = false;\n  // From MDN: \"the executor is called before the Promise constructor even returns the created object\"\n  // Hence all worker callbacks are in place before we send it the \"go\" message below.\n  const promise = new Promise<Schedule>((resolve, reject) => {\n    worker.onmessage = (event: MessageEvent) => {\n      const result: ComputeScheduleReturnType = event.data;\n      if (isSchedulingFailure(result)) {\n        assert(!isSettled, 'Attempted to settle promise more than once.');\n        reject(result);\n        isSettled = true;\n      } else {\n        assert(!isSettled, 'Attempted to settle promise more than once.');\n        resolve(result);\n        isSettled = true;\n      }\n    };\n    worker.onerror = (event: ErrorEvent) => {\n      worker.terminate();\n      const failure: SchedulingFailure = 'A runtime error occurred in source file ' +\n          `${event.filename} (line ${event.lineno}:${event.colno}):\\n${event.message}`;\n      // In theory, the worker could still cause an error after it has sent its last message. However, the ES6\n      // specification says:\n      // \"Attempting to resolve or reject a resolved promise has no effect.\"\n      // https://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects\n      // Hence, there is no race condition. On the other hand, we don't want to swallow the problem. Therefore, we\n      // add an assertion:\n      assert(!isSettled, 'Attempted to settle promise more than once.');\n      reject(failure);\n      isSettled = true;\n    };\n  });\n  worker.postMessage(args);\n  return promise;\n}\n","/**\n * This module is not part of the public API!\n */\n\n/* API Barrier */\n\nimport { strict as assert } from 'assert';\n\n/**\n * Type that consists of the union of all properties that are marked as optional through a question mark.\n *\n * Note that properties that have undefined in their domain, but no question mark next to the property name are *not*\n * included. Also note that, in strict compilation mode, TypeScript will add undefined to the domain of the property if\n * there is a question mark next to the property name.\n *\n * @typeparam T generic type parameter\n */\nexport type OptionalPropertyNames<T extends {}> = {[K in keyof T]-?: {} extends {[_ in K]: T[K]} ? K : never}[keyof T];\nexport type Defined<T> = T extends undefined ? never : T;\nexport type OnlyOptionals<T extends {}> = {[K in OptionalPropertyNames<T>]: Defined<T[K]>};\n\n/**\n * Copy the values of all string-keyed enumerable own properties from the source object to the target object.\n *\n * Note the differences to\n * [`Object.assign()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign):\n * - Only properties with `string` keys are copied.\n * - A property of the source value that has the value `undefined` is copied only if the property key is not yet in the\n *   target. (The check is performed using the `in` operator.)\n *\n * @param target the target object\n * @param source the source object\n * @return the target object\n */\nexport function assignDefined<T extends {[key: string]: any}, U extends {[key: string]: any}>(\n    target: T, source: U | undefined): T & U {\n  const typedTarget: T & U = target as T & U;\n  if (source !== undefined) {\n    // Object.entries() returns a given object's own enumerable string-keyed property [key, value] pairs,\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries\n    for (const [key, value] of Object.entries(source)) {\n      if (!(key in target) || value !== undefined) {\n        // Casting of key necessary for type soundness:\n        // https://github.com/microsoft/TypeScript/issues/31661#issuecomment-497474815\n        typedTarget[key as keyof U] = source[key];\n      }\n    }\n  }\n  return typedTarget;\n}\n\n/**\n * Returns a deep clone of the given object.\n *\n * This function covers only what is needed in this project! It is not an equivalent to a library function.\n */\nexport function deepClone<T>(original: T): T {\n  assert(['undefined', 'object', 'boolean', 'number', 'string'].includes(typeof original),\n      'Value with unsupported type in deepClone()');\n  if (Array.isArray(original)) {\n    return original.map(deepClone) as T & any[];\n  } else if (typeof original === 'object' && original !== null) {\n    return Object.entries(original).reduce((obj, [key, value]) => {\n      // Casting of key necessary for type soundness:\n      // https://github.com/microsoft/TypeScript/issues/31661#issuecomment-497474815\n      obj[key as keyof T] = deepClone(value);\n      return obj;\n    }, {} as T & {[key: string]: any});\n  } else {\n    return original;\n  }\n}\n\n/**\n * Returns the first argument that is defined, or undefined if none of the arguments is defined.\n */\nexport function coalesce<T>(left: T | undefined, right: T): T {\n  return left === undefined ? right : left;\n}\n","/**\n * Types defined by the [YouTrack REST API](https://www.jetbrains.com/help/youtrack/standalone/api-entities.html).\n *\n * Not part of the public API of this project.\n */\n\n/**\n * YouTrack REST API paths.\n */\nexport const youTrackPath = Object.freeze({\n  ACTIVITIES_PAGE: 'api/activitiesPage',\n  CUSTOM_FIELD: (customFieldId: string) => `api/admin/customFieldSettings/customFields/${customFieldId}`,\n  ISSUES: (queryId: string) => `api/savedQueries/${queryId}/issues`,\n  SAVED_QUERY: (queryId: string) => `api/savedQueries/${queryId}`,\n  SORTED_ISSUES: 'api/sortedIssues',\n  STATE_BUNDLES: 'api/admin/customFieldSettings/bundles/state',\n  WORK_TIME_SETTINGS: 'api/admin/timeTrackingSettings/workTimeSettings',\n});\n\n/**\n * Hub REST API paths.\n */\nexport const hubPath = Object.freeze({\n  OAUTH: 'api/rest/oauth2/auth',\n});\n\nexport interface ActivityCursorPage {\n  afterCursor?: string;\n  hasAfter: boolean;\n  activities: ActivityItem[];\n}\n\nexport interface ActivityItem {\n  $type: string;\n  timestamp: number;\n  added: any[];\n  removed: any[];\n  field: FilterField;\n}\n\nexport interface BaseBundle extends Bundle {\n  values: BundleElement[];\n}\n\nexport interface Bundle {\n  id: string;\n}\n\nexport interface BundleCustomFieldDefaults extends CustomFieldDefaults {\n  $type: string;\n}\n\nexport interface BundleElement {\n  id: string;\n  name: string;\n  ordinal: number;\n  color: FieldStyle;\n}\n\nexport interface CustomField {\n  id: string;\n  fieldDefaults: CustomFieldDefaults;\n  fieldType: FieldType;\n  name: string;\n}\n\nexport interface CustomFieldActivityItem extends ActivityItem {\n  $type: 'CustomFieldActivityItem';\n  target: Issue;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface CustomFieldDefaults {}\n\nexport interface EnumBundleCustomFieldDefaults extends BundleCustomFieldDefaults {\n  bundle: EnumBundle;\n}\n\nexport interface EnumBundle extends BaseBundle {\n  values: EnumBundleElement[];\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface EnumBundleElement extends LocalizableBundleElement {}\n\nexport interface FieldStyle {\n  background: string;\n  foreground: string;\n}\n\nexport interface FieldType {\n  id: string;\n}\n\nexport interface FilterField {\n  id: string;\n  name: string;\n}\n\nexport interface Issue {\n  $type: 'Issue';\n  created: number;\n  customFields: IssueCustomField[];\n  id: string;\n  idReadable: string;\n  links: IssueLink[];\n  parent: IssueLink;\n  subtasks: IssueLink;\n  resolved: number | null;\n  summary: string;\n  updated: number;\n}\n\nexport interface IssueCustomField {\n  $type: string;\n  projectCustomField: ProjectCustomField;\n}\n\nexport interface IssueFolder {\n  id: string;\n  name: string;\n}\n\nexport interface IssueLink {\n  direction: 'INWARD' | 'OUTWARD' | 'BOTH';\n  linkType: IssueLinkType;\n  issues: Issue[];\n}\n\nexport interface IssueLinkType {\n  directed: boolean;\n  id: string;\n  name: string;\n  sourceToTarget: string;\n  targetToSource: string;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface LocalizableBundleElement extends BundleElement {}\n\nexport interface PeriodIssueCustomField extends IssueCustomField {\n  $type: 'PeriodIssueCustomField';\n  value: PeriodValue | null;\n}\n\nexport function isPeriodIssueCustomField(field: any): field is PeriodIssueCustomField {\n  return field.$type === 'PeriodIssueCustomField';\n}\n\nexport interface PeriodValue {\n  minutes: number;\n}\n\nexport interface ProjectCustomField {\n  field: CustomField;\n}\n\nexport interface SavedQuery extends WatchFolder {\n  issues: Issue[];\n}\n\nexport interface SortedIssuesResponse {\n  count: number;\n}\n\nexport interface SingleUserIssueCustomField extends IssueCustomField {\n  $type: 'SingleUserIssueCustomField';\n  value: User | null;\n}\n\nexport function isSingleUserIssueCustomField(field: any): field is SingleUserIssueCustomField {\n  return field.$type === 'SingleUserIssueCustomField';\n}\n\nexport interface SingleEnumIssueCustomField extends IssueCustomField {\n  $type: 'SingleEnumIssueCustomField';\n  value: EnumBundleElement | null;\n}\n\nexport function isSingleEnumIssueCustomField(field: any): field is SingleEnumIssueCustomField {\n  return field.$type === 'SingleEnumIssueCustomField';\n}\n\nexport interface StateBundle extends BaseBundle {\n  $type: 'StateBundle';\n  values: StateBundleElement[];\n}\n\nexport interface StateBundleElement extends LocalizableBundleElement {\n  isResolved: boolean;\n}\n\nexport interface StateBundleCustomFieldDefaults extends BundleCustomFieldDefaults {\n  bundle: StateBundle;\n}\n\nexport interface StateIssueCustomField extends IssueCustomField {\n  $type: 'StateIssueCustomField';\n  value: StateBundleElement;\n}\n\nexport function isStateIssueCustomField(field: any): field is StateIssueCustomField {\n  return field.$type === 'StateIssueCustomField';\n}\n\nexport interface User {\n  id: string;\n  avatarUrl: string;\n  fullName: string;\n}\n\nexport interface WatchFolder extends IssueFolder {\n  owner: User;\n}\n\nexport interface WorkTimeSettings {\n  minutesADay: number;\n  daysAWeek: number;\n}\n\n/**\n * Error returned by the YouTrack REST API, typically in case of an invalid request.\n */\nexport interface YouTrackError {\n  error: string;\n  error_description: string;\n}\n","import * as RestApi from './you-track-rest';\n\nconst STORAGE_PREFIX = '@fschopp/you-track-planning-js';\n\nconst baseUrlToAccessTokenMap: {[baseUrl: string]: AccessToken} = {};\n\n/**\n * A YouTrack base URL and application state for temporary storage in the session storage during an OAuth2 request.\n */\ninterface BaseUrlAndAppState<T> {\n  baseUrl: string;\n  appState: T;\n}\n\n/**\n * An access token, together with its type and validity period.\n */\ninterface AccessToken {\n  type: string;\n  secret: string;\n\n  /**\n   * Timestamp in milliseconds since the epoch.\n   */\n  validUntil: number;\n}\n\n/**\n * Returns the key in the session storage where the app state is stored temporarily (while the user is on the YouTrack\n * login page).\n */\nfunction storageKeyForOauthId(oAuthId: string): string {\n  return `${STORAGE_PREFIX}/oauth${oAuthId}`;\n}\n\nfunction normalizeUrl(baseUrl: string): string {\n  return new URL(baseUrl).toString();\n}\n\n/**\n * Navigates the current window to the Jetbrains Hub OAuth2 page.\n *\n * Once successfully logged in, the OAuth2 page will redirect the browser to the given `redirectUrl`. To be able to\n * seamlessly proceed where the user left off, the current application state needs to be preserved. This method stores\n * the given application state `appState` in the\n * [session storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage). The rationale is:\n * 1. The application state could be larger than what one would reasonably encode in the redirect URL (which is another\n *    possibility of preserving the state).\n * 2. The application state does not leak to a third party.\n *\n * Nonetheless, users of this method should be aware of the limitations of using the session storage as well. MDN has\n * some [additional information](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API) on this topic.\n *\n * @typeparam T type of the application state\n * @param youTrackBaseUrl The YouTrack base URL to which relative paths of form `api/...` will be appended. The base URL\n *     is expected to end in a slash (/). See {@link httpGet}().\n * @param hubUrl Hub URL to which a relative path like `api/rest/oauth2/auth` will be appended. The hub URL is expected\n *     to end in a slash (/). Note that the Hub URL is distinct from the YouTrack base URL.\n * @param serviceId Identification of the particular YouTrack installation. See the\n *     [YouTrack manual](https://www.jetbrains.com/help/youtrack/standalone/OAuth-Authorization.html).\n * @param appState State that will be stored in session storage and later returned by\n *     {@link handlePotentialOauthRedirect}(). The value passed as argument needs to be serializable with\n *     {@link JSON.stringify}().\n * @param redirectUrl The URL that YouTrack will redirect back to after authorization. In order to not expose more data\n *     than necessary to the YouTrack server, the url will be stripped from its hash, username/password, and search\n *     query (if any). If state needs to be preserved, the `appState` argument should be used.\n */\nexport function goToOauthPage<T>(youTrackBaseUrl: string, hubUrl: string, serviceId: string, appState: T,\n    redirectUrl: string = window.location.href): void {\n  const normalizedBaseUrl = normalizeUrl(youTrackBaseUrl);\n  const normalizedHubUrl = normalizeUrl(hubUrl);\n  const strippedRedirectUrl = new URL(redirectUrl);\n  // Create a bare redirect URL, so to not expose more data than necessary\n  strippedRedirectUrl.hash = '';\n  strippedRedirectUrl.username = '';\n  strippedRedirectUrl.password = '';\n  strippedRedirectUrl.search = '';\n\n  const oAuthId = `${Date.now().toString()}_${Math.floor(Math.random() * 10000)}`;\n  const youTrackOauthUrl = new URL(RestApi.hubPath.OAUTH, normalizedHubUrl);\n  Object.entries({\n    response_type: 'token',\n    state: oAuthId,\n    redirect_uri: strippedRedirectUrl.toString(),\n    request_credentials: 'default',\n    client_id: serviceId,\n    scope: 'YouTrack',\n  }).forEach(([key, value]) => youTrackOauthUrl.searchParams.append(key, value));\n\n  const baseUrlAndAppState: BaseUrlAndAppState<T> = {\n    baseUrl: normalizedBaseUrl,\n    appState,\n  };\n  sessionStorage.setItem(storageKeyForOauthId(oAuthId), JSON.stringify(baseUrlAndAppState));\n  window.location.href = youTrackOauthUrl.toString();\n}\n\n/**\n * Parses `window.location.href` to determine whether the URL stems from a YouTrack OAuth2 redirect, and returns the\n * restored application state if so.\n *\n * This method is meant to be called when the page is loaded. If the current URL contains a hash that is the result of\n * an OAuth2 redirect, any URL component except domain and path (such as search query or hash) will be removed. Note\n * that `window.location` will be updated with `window.history.replaceState()`.\n *\n * The application state will be restored from session storage. Unfortunately, some browsers are known to have bugs that\n * cause unexpected results if `sessionStorage` is accessed too early, relative to the page load in the browser. This\n * applies at least to [Safari 12.1.1](https://github.com/fschopp/project-planning-for-you-track/issues/1) and older\n * versions of [Firefox](https://stackoverflow.com/questions/13852209/localstorage-unreliable-in-firefox). (Recent\n * versions of Chrome and Firefox appear to work just fine.) It is advisable to delay calling this method (for instance,\n * with `setTimeout()`) when targeting browsers that are known to be problematic.\n *\n * Finally, this function keeps a record of the YouTrack authorization, making it available via\n * {@link authorizationFor}().\n *\n * @typeparam T type of the application state\n * @return object containing the application state or undefined if the current location is not the result of a YouTrack\n *     OAuth2 redirect\n */\nexport function handlePotentialOauthRedirect<T>(): T | undefined {\n  const url = new URL(window.location.href);\n  const fragmentParams = new URLSearchParams(url.hash.slice(1));\n  const oAuthId: string | null = fragmentParams.get('state');\n  if (oAuthId !== null) {\n    const key = storageKeyForOauthId(oAuthId);\n    const storedValue: string | null = sessionStorage.getItem(key);\n    if (storedValue !== null) {\n      const baseUrlAndAppState: BaseUrlAndAppState<T> = JSON.parse(storedValue);\n      sessionStorage.removeItem(key);\n\n      const secret: string | null = fragmentParams.get('access_token');\n      const expiresIn: string | null = fragmentParams.get('expires_in');\n      const type: string | null = fragmentParams.get('token_type');\n      if (secret !== null && expiresIn !== null && type !== null) {\n        const validUntil: number = Date.now() + parseInt(expiresIn, 10) * 1000;\n        baseUrlToAccessTokenMap[baseUrlAndAppState.baseUrl] = {\n          type,\n          secret,\n          validUntil,\n        };\n        url.hash = '';\n        // Not using window.location.replace(), because that triggers page reloads when passing more than just a\n        // (relative URL with a) hash.\n        window.history.replaceState(undefined, '', url.toString());\n        return baseUrlAndAppState.appState;\n      }\n    }\n  }\n  return undefined;\n}\n\n/**\n * Returns the access token for the given base URL, or undefined if there is no (unexpired) one.\n *\n * This method returns the HTTP Authorization header known due to a previous call to\n * {@link handlePotentialOauthRedirect}(), or undefined if not known for the given URL.\n *\n * @param baseUrl The YouTrack base URL to which relative paths of form `api/...` will be appended. The base URL is\n *     expected to end in a slash (/). See {@link httpGet}().\n * @return value for HTTP authorization header\n */\nexport function authorizationFor(baseUrl: string): string | undefined {\n  const normalizedBaseUrl = normalizeUrl(baseUrl);\n  if (!(normalizedBaseUrl in baseUrlToAccessTokenMap)) {\n    return undefined;\n  }\n\n  const accessToken: AccessToken = baseUrlToAccessTokenMap[normalizedBaseUrl];\n  if (Date.now() >= accessToken.validUntil) {\n    delete baseUrlToAccessTokenMap[normalizedBaseUrl];\n    return undefined;\n  }\n\n  return `${accessToken.type} ${accessToken.secret}`;\n}\n","import { Failure } from './api-types';\nimport { authorizationFor } from './you-track-oauth';\nimport { YouTrackError } from './you-track-rest';\n\nfunction isYouTrackError<T>(value: any): value is YouTrackError {\n  // noinspection SuspiciousTypeOfGuard\n  return value && typeof value.error === 'string' && typeof value.error_description === 'string';\n}\n\n/**\n * Returns a promise that will be fulfilled with the result of an HTTP GET request to a YouTrack REST resource.\n *\n * This method sets the HTTP Authorization header if it is known due to a previous call to\n * {@link handlePotentialOauthRedirect}(). If no authorization is available, this method rejects the promise\n * immediately.\n *\n * @typeparam T the type of the response by YouTrack (after parsing the JSON)\n * @param baseUrl The YouTrack base URL to which relative paths of form `api/...` will be appended. The base URL is\n *     expected to end in a slash (/). For an InCloud instance without a custom domain, this is of form\n *     `https://<name>.myjetbrains.com/youtrack/`.\n * @param resourcePath relative path to the REST API resource requested\n * @param queryParams parameters that will be added to the query string\n * @return A promise that in case of success will be fulfilled with the retrieved object. In case of any failure, it\n *     will be rejected with a {@link Failure}.\n */\nexport function httpGet<T>(baseUrl: string, resourcePath: string, queryParams: {[param: string]: string} = {}):\n    Promise<T> {\n  const authorization: string | undefined = authorizationFor(baseUrl);\n  if (authorization === undefined) {\n    const failure: Failure = `No valid unexpired OAuth token available for ${baseUrl}.`;\n    return Promise.reject(failure);\n  }\n\n  const url = new URL(resourcePath, baseUrl);\n  const urlSearchParams = url.searchParams;\n  Object.entries(queryParams).forEach(([key, value]) => urlSearchParams.append(key, value));\n  const xhr = new XMLHttpRequest();\n  xhr.open('GET', url.toString());\n  xhr.setRequestHeader('Authorization', authorization);\n  xhr.setRequestHeader('Accept', 'application/json');\n  xhr.responseType = 'json';\n  const promise = new Promise<T>((resolve, reject) => {\n    xhr.onloadend = () => onRequestFinished<T>(url, xhr, resolve, reject);\n  });\n  xhr.send();\n  return promise;\n}\n\n/**\n * Returns a promise that will be fulfilled with the result of an HTTP GET request to a YouTrack REST array resource.\n *\n * This method sets the HTTP Authorization header if it is known due to a previous call to\n * {@link handlePotentialOauthRedirect}(). If no authorization is available, this method rejects the promise\n * immediately.\n *\n * @typeparam T the element type of the array response by YouTrack (after parsing the JSON)\n * @param baseUrl The YouTrack base URL. See also {@link httpGet}().\n * @param resourcePath relative path to the REST API resource requested\n * @param queryParams parameters that will be added to the query string\n * @param restBatchSize Number of elements per HTTP request. Larger values are faster, but increase the risk of\n *     transmission problems (or outright rejection by future YouTrack versions that may have rate limitations).\n * @return A promise that in case of success will be fulfilled with the retrieved array. In case of any failure, it\n *     will be rejected with a {@link Failure}.\n */\nexport async function httpGetAll<T>(baseUrl: string, resourcePath: string,\n    queryParams: {[param: string]: string}, restBatchSize: number): Promise<T[]> {\n  return httpGetAllWithOptions<T, T[]>(baseUrl, resourcePath, queryParams, restBatchSize, (batch, array) => {\n    array.push(...batch);\n    return array;\n  }, []);\n}\n\n/**\n * Returns a promise that will be fulfilled with a transformation of the result of an HTTP GET request to a YouTrack\n * REST array resource.\n *\n * This method sets the HTTP Authorization header if it is known due to a previous call to\n * {@link handlePotentialOauthRedirect}(). If no authorization is available, this method rejects the promise\n * immediately.\n *\n * @typeparam T the element type of the array response by YouTrack (after parsing the JSON)\n * @typeparam U the return type of `processBatch()` and therefore also this function\n * @param baseUrl The YouTrack base URL. See also {@link httpGet}().\n * @param resourcePath relative path to the REST API resource requested\n * @param queryParams parameters that will be added to the query string\n * @param restBatchSize Number of elements per HTTP request. See also {@link httpGetAll}().\n * @param processBatch callback called for the result of each individual HTTP request\n * @param processBatch.batch the retrieved array\n * @param processBatch.previous the state returned by the previous invocation of `processBatch()`, or the value of\n *     `initial` if this is the first invocation\n * @param initial the value passed to the first invocation of `processBatch()` as argument `initial`\n * @return A promise that in case of success will be fulfilled with the last result of `processBatch()`. In case of any\n *     failure, it will be rejected with a {@link Failure}.\n */\nexport async function httpGetAllWithOptions<T, U>(baseUrl: string, resourcePath: string,\n    queryParams: {[param: string]: string}, restBatchSize: number,\n    processBatch: (batch: T[], previous: U) => U, initial: U): Promise<U> {\n  let numElementsRetrieved: number = 0;\n  let busy = true;\n  queryParams.$top = restBatchSize.toString();\n  let batchPromise: Promise<T[]> = httpGet<T[]>(baseUrl, resourcePath, queryParams);\n  let state: U = initial;\n  do {\n    const batch: T[] = await batchPromise;\n    numElementsRetrieved += batch.length;\n    if (batch.length >= restBatchSize) {\n      queryParams.$skip = numElementsRetrieved.toString();\n      batchPromise = httpGet<T[]>(baseUrl, resourcePath, queryParams);\n    } else {\n      busy = false;\n    }\n    state = processBatch(batch, state);\n  } while (busy);\n  return state;\n}\n\n/**\n * Handles completion of an {@link XMLHttpRequest}, whether successful or not.\n */\nfunction onRequestFinished<T>(url: URL, xhr: XMLHttpRequest, resolve: (result: T) => void,\n    reject: (failure: Failure) => void): void {\n  // From https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response:\n  // \"The value is null if the request is not yet complete or was unsuccessful\"\n  const response: T | YouTrackError | null = xhr.response;\n  let failure: Failure;\n  if (response === null) {\n    failure =\n        `The YouTrack server could not be reached (URL: ${url}). Please check your network connection.`;\n  } else if (isYouTrackError(response)) {\n    failure =\n        `The YouTrack server returned the following error (URL: ${url}): ${response.error_description}`;\n  } else if (xhr.status === 200) {\n    resolve(response);\n    return;\n  } else {\n    failure = `The YouTrack server returned an unexpected error (URL: ${url}, HTTP status: ${xhr.status}).`;\n  }\n  reject(failure);\n}\n","import { strict as assert } from 'assert';\nimport { ProjectPlan, RetrieveProjectPlanOptions, YouTrackConfig, YouTrackIssue, } from './api-types';\nimport { assignDefined, OnlyOptionals } from './util';\nimport { httpGet, httpGetAll, httpGetAllWithOptions } from './you-track-http';\nimport * as RestApi from './you-track-rest';\nimport { CustomFieldActivityItem } from './you-track-rest';\n\n/**\n * Retrieves, reconstructs, and returns a project plan consisting of the issues and their activities in a\n * [YouTrack saved search](https://www.jetbrains.com/help/youtrack/standalone/Saved-Search.html).\n *\n * This method requires that {@link handlePotentialOauthRedirect}() was called previously and obtained an OAuth token.\n * The authorization should be valid for the expected duration of the data retrieval. YouTrack\n * [does not](https://www.jetbrains.com/help/youtrack/standalone/OAuth-Authorization.html#AuthServerResponse) issue\n * refresh tokens, so communication with YouTrack will fail otherwise.\n *\n * @param baseUrl The YouTrack base URL. See also {@link httpGet}().\n * @param youTrackConfig Configuration of YouTrack.\n * @param options Options for retrieving YouTrack issue data and building a project plan.\n * @return A promise that in case of success will be fulfilled with a project plan. In case of any failure, it will be\n *     rejected with a {@link Failure}.\n */\nexport function retrieveProjectPlan(\n    baseUrl: string, youTrackConfig: YouTrackConfig, options?: RetrieveProjectPlanOptions): Promise<ProjectPlan> {\n  const actualYouTrackConfig: Required<YouTrackConfig> = assignDefined(newDefaultYouTrackConfig(), youTrackConfig);\n  const actualOptions: Required<RetrieveProjectPlanOptions> =\n      assignDefined(newDefaultRequestProjectPlanOptions(), options);\n  return new YouTrackIssueActivities(baseUrl, actualYouTrackConfig, actualOptions).promise;\n}\n\n/**\n * Retrieves and returns the number of minutes in a work week, as configured in YouTrack.\n *\n * @param baseUrl The YouTrack base URL. See also {@link httpGet}().\n * @return A promise that in case of success will be fulfilled with a the number of minutes. In case of any failure, it\n *     will be rejected with a {@link Failure}.\n */\nexport async function getMinutesPerWorkWeek(baseUrl: string): Promise<number> {\n  const queryParams = {\n    fields: YouTrackFields.WORK_TIME_SETTINGS,\n  };\n  const response: RestApi.WorkTimeSettings =\n      await httpGet<RestApi.WorkTimeSettings>(baseUrl, RestApi.youTrackPath.WORK_TIME_SETTINGS, queryParams);\n  return response.daysAWeek * response.minutesADay;\n}\n\n/**\n * Returns a new object with values for the optional properties of {@link YouTrackConfig}.\n */\nfunction newDefaultYouTrackConfig(): OnlyOptionals<YouTrackConfig> {\n  return {\n    remainingEffortFieldId: '',\n    remainingWaitFieldId: '',\n    assigneeFieldId: '',\n    otherCustomFieldIds: [],\n    doesInwardDependOnOutward: true,\n    overlaySavedQueryId: '',\n    minStateChangeDurationMs: 0,\n    defaultRemainingEffortMs: 0,\n    defaultWaitTimeMs: 0,\n    isSplittableFn: () => false,\n  };\n}\n\n/**\n * Returns a new object with values for the optional properties of {@link RetrieveProjectPlanOptions}.\n */\nfunction newDefaultRequestProjectPlanOptions(): OnlyOptionals<RetrieveProjectPlanOptions> {\n  return {\n    progressCallback: () => { /* no-op */ },\n    omitIssueActivities: false,\n    progressUpdateIntervalMs: 200,\n    restBatchSize: 100,\n  };\n}\n\nconst YOUTRACK_CUSTOM_FIELDS_CATEGORY = 'CustomFieldCategory';\n\n/**\n * YouTrack REST API fields.\n */\nconst enum YouTrackFields {\n  SORTED_ISSUES = 'count',\n  CUSTOM_FIELD = 'fieldDefaults(bundle(id))',\n  STATE_BUNDLES = 'id,values(id,name,isResolved)',\n  SAVED_QUERY_NAME = 'name',\n  ISSUES = 'created,customFields(projectCustomField(field(id)),value(id,minutes,name)),id,idReadable,' +\n      'links(direction,issues(id,idReadable),linkType(id)),parent(issues(id,idReadable)),resolved,' +\n      'subtasks(issues(id,idReadable)),summary,updated',\n  OVERLAY_ORDER = 'id',\n  ACTIVITIES_PAGE = 'afterCursor,hasAfter,activities(added(id,name,isResolved),field(id),' +\n      'removed(id,name,isResolved),target(id),timestamp)',\n  WORK_TIME_SETTINGS = 'minutesADay,daysAWeek',\n}\n\nconst enum ActiveState {\n  UNKNOWN,\n  ACTIVE,\n  INACTIVE,\n}\n\ninterface StateTransition {\n  timestamp: number;\n  activeState: ActiveState;\n}\n\ninterface IssueId {\n  /**\n   * The human readable ID, consisting of project abbreviation and number.\n   */\n  id: string;\n\n  /**\n   * The YouTrack-internal ID.\n   */\n  internalId: string;\n}\n\ninterface InternalYouTrackIssue extends YouTrackIssue {\n  internalId: string;\n  parentIssueId: IssueId | null;\n  subtaskIssueIds: IssueId[];\n  dependencyIssueIds: IssueId[];\n  activeState: ActiveState;\n  stateTransitions: StateTransition[];\n  lastUpdate?: number;\n}\n\n/**\n * Class that retrieves issues, their state changes, and issue links.\n */\nclass YouTrackIssueActivities {\n  public readonly promise: Promise<ProjectPlan>;\n\n  private readonly baseUrl_: string;\n  private readonly config_: Required<YouTrackConfig>;\n  private readonly options_: Required<RetrieveProjectPlanOptions>;\n  private readonly dependsOnDirection_: 'INWARD' | 'OUTWARD';\n  private readonly issues_: InternalYouTrackIssue[] = [];\n  private readonly idToIssueMap_ = new Map<string, InternalYouTrackIssue>();\n  /**\n   * Map from id of the issue state (that is, the ID of the {@link StateBundleElement}) to whether that state is active.\n   *\n   * This property is only filled in {@link buildIdToActiveStateMap}() if\n   * {@link RetrieveProjectPlanOptions.omitIssueActivities} is false.\n   */\n  private readonly idToActiveState_: Map<string, ActiveState>;\n  private readonly lowerCaseNameToActiveState_: {[lowerCaseName: string]: ActiveState} = {};\n  private readonly projectPlan_: ProjectPlan;\n\n  private numIssues_: number = 0;\n  private savedQueryName_: string = '';\n  private numTasksWithDetails_: number = 0;\n  /**\n   * Timestamp of the first activity in the activity log.\n   *\n   * This property is only filled in {@link parseActivityItems}() if\n   * {@link RetrieveProjectPlanOptions.omitIssueActivities} is false.\n   */\n  private minTimeStamp_: number = 0;\n  private maxUpdateTimeStamp_: number = 0;\n  private maxActivityTimeStamp_: number = 0;\n  private lastProgressUpdate_: number = 0;\n\n  /**\n   * Constructor that will already start the communication with the YouTrack server.\n   */\n  constructor(\n      baseUrl: string, youTrackConfig: Required<YouTrackConfig>, options: Required<RetrieveProjectPlanOptions>) {\n    this.baseUrl_ = baseUrl;\n    this.config_ = youTrackConfig;\n    this.options_ = options;\n    this.dependsOnDirection_ = this.config_.doesInwardDependOnOutward ? 'INWARD' : 'OUTWARD';\n    this.idToActiveState_ = youTrackConfig.inactiveStateIds\n        .reduce((map, inactiveState) => map.set(inactiveState, ActiveState.INACTIVE), new Map<string, ActiveState>());\n    this.projectPlan_ = {\n      issues: [],\n      warnings: [],\n    };\n    this.promise = this.run();\n  }\n\n  private async run(): Promise<ProjectPlan> {\n    await this.retrieveNumIssues();\n    await this.retrieveSavedQueryName();\n    if (!this.options_.omitIssueActivities) {\n      const stateBundleId: string = await this.getStateBundleId();\n      await this.buildIdToActiveStateMap(stateBundleId);\n    }\n    this.progressUpdate();\n    await this.retrieveIssues();\n    await this.retrieveOverlayOrder();\n    if (!this.options_.omitIssueActivities) {\n      await this.retrieveActivities();\n    }\n    this.finalizeSchedule();\n    return this.projectPlan_;\n  }\n\n  /**\n   * If sufficient time has elapsed since the last progress update, send a new message to the thread that spawned this\n   * worker.\n   */\n  private progressUpdate(): void {\n    if (Date.now() - this.lastProgressUpdate_ < this.options_.progressUpdateIntervalMs) {\n      return;\n    }\n\n    let percentageDone = 0;\n    if (this.numIssues_ > 0) {\n      percentageDone =\n        1 +\n        9 * Math.min(1, this.numTasksWithDetails_ / this.numIssues_);\n      if (this.minTimeStamp_ > 0) {\n        percentageDone += 90 * Math.min(1,\n          (this.maxActivityTimeStamp_ - this.minTimeStamp_) / (this.maxUpdateTimeStamp_ - this.minTimeStamp_)\n        );\n      } else if (this.options_.omitIssueActivities) {\n        percentageDone *= 10;\n      }\n    }\n\n    this.lastProgressUpdate_ = Date.now();\n    this.options_.progressCallback(percentageDone);\n  }\n\n  private newHttpRequest<T>(resourcePath: string, queryParams: {[param: string]: string}): Promise<T> {\n    return httpGet(this.baseUrl_, resourcePath, queryParams);\n  }\n\n  private getAll<T>(resourcePath: string, queryParams: {[param: string]: string},\n        processBatch: (batch: T[]) => void): Promise<void> {\n    return httpGetAllWithOptions(this.baseUrl_, resourcePath, queryParams, this.options_.restBatchSize,\n        processBatch, undefined);\n  }\n\n  private async retrieveNumIssues(): Promise<void> {\n    const queryParams = {\n      folderId: this.config_.savedQueryId,\n      fields: YouTrackFields.SORTED_ISSUES,\n    };\n    const response: RestApi.SortedIssuesResponse =\n        await this.newHttpRequest(RestApi.youTrackPath.SORTED_ISSUES, queryParams);\n    this.numIssues_ = response.count;\n  }\n\n  private async getStateBundleId(): Promise<string> {\n    const queryParams = {fields: YouTrackFields.CUSTOM_FIELD};\n    const customField: RestApi.CustomField =\n        await this.newHttpRequest(RestApi.youTrackPath.CUSTOM_FIELD(this.config_.stateFieldId), queryParams);\n    return (customField.fieldDefaults as RestApi.StateBundleCustomFieldDefaults).bundle.id;\n  }\n\n  private async retrieveSavedQueryName(): Promise<void> {\n    const queryParams = {fields: YouTrackFields.SAVED_QUERY_NAME};\n    const savedQuery: RestApi.SavedQuery =\n        await this.newHttpRequest(RestApi.youTrackPath.SAVED_QUERY(this.config_.savedQueryId), queryParams);\n    this.savedQueryName_ = savedQuery.name;\n  }\n\n  private async buildIdToActiveStateMap(stateBundleId: string): Promise<void> {\n    const queryParams: {fields: string} = {\n      fields: YouTrackFields.STATE_BUNDLES,\n    };\n    await this.getAll<RestApi.StateBundle>(RestApi.youTrackPath.STATE_BUNDLES, queryParams, (restStateBundles) => {\n      for (const restStateBundle of restStateBundles) {\n        const isRelevantStateBundle = restStateBundle.id === stateBundleId;\n        for (const restElement of restStateBundle.values) {\n          if (restElement.isResolved) {\n            this.idToActiveState_.set(restElement.id, ActiveState.INACTIVE);\n          } else if (isRelevantStateBundle && !this.config_.inactiveStateIds.includes(restElement.id)) {\n            this.idToActiveState_.set(restElement.id, ActiveState.ACTIVE);\n          }\n\n          if (isRelevantStateBundle) {\n            // In this case, restElement.id was added to this.idToActiveState_: Either (a) in the constructor (if\n            // this.config_.inactiveStateIds.includes(restElement.id)) or (b) in one of the two if-branches above.\n            assert(this.idToActiveState_.has(restElement.id));\n            this.lowerCaseNameToActiveState_[restElement.name.toLowerCase()] =\n                this.idToActiveState_.get(restElement.id)!;\n          }\n        }\n      }\n    });\n  }\n\n  private parseIssueCustomFields(issue: InternalYouTrackIssue, restIssue: RestApi.Issue): void {\n    for (const customField of restIssue.customFields) {\n      const fieldId = customField.projectCustomField.field.id;\n      switch (fieldId) {\n        case this.config_.remainingEffortFieldId:\n          if (RestApi.isPeriodIssueCustomField(customField) && customField.value !== null) {\n            issue.remainingEffortMs = customField.value.minutes * 60 * 1000;\n          }\n          break;\n        case this.config_.remainingWaitFieldId:\n          if (RestApi.isPeriodIssueCustomField(customField) && customField.value !== null) {\n            issue.remainingWaitTimeMs = customField.value.minutes * 60 * 1000;\n          }\n          break;\n        case this.config_.assigneeFieldId:\n          if (RestApi.isSingleUserIssueCustomField(customField) && customField.value !== null) {\n            issue.assignee = customField.value.id;\n          }\n          break;\n        case this.config_.stateFieldId:\n          if (RestApi.isStateIssueCustomField(customField) && customField.value !== null) {\n            issue.state = customField.value.id;\n            issue.activeState = this.stateBundleElementIdToActiveState(customField.value);\n          }\n          break;\n        default:\n          if (RestApi.isSingleEnumIssueCustomField(customField) &&\n              customField.value !== null &&\n              this.config_.otherCustomFieldIds.find((id) => id === fieldId)) {\n            issue.customFields[fieldId] = customField.value.id;\n          }\n      }\n    }\n  }\n\n  private async retrieveIssues(): Promise<void> {\n    const queryParams = {fields: YouTrackFields.ISSUES};\n    await this.getAll<RestApi.Issue>(\n        RestApi.youTrackPath.ISSUES(this.config_.savedQueryId), queryParams, (restIssues) => {\n          for (const restIssue of restIssues) {\n            const issue: InternalYouTrackIssue = {\n              id: restIssue.idReadable,\n              remainingEffortMs: this.config_.defaultRemainingEffortMs,\n              remainingWaitTimeMs: this.config_.defaultWaitTimeMs,\n              splittable: false,\n              dependencies: [],\n              assignee: '',\n\n              summary: restIssue.summary,\n              issueActivities: [],\n              resolved: restIssue.resolved !== null\n                  ? restIssue.resolved\n                  : Number.MAX_SAFE_INTEGER,\n              state: '',\n              parent: '',\n              customFields: {},\n\n              internalId: restIssue.id,\n              parentIssueId: restIssue.parent.issues.length > 0\n                  ? {\n                      id: restIssue.parent.issues[0].idReadable,\n                      internalId: restIssue.parent.issues[0].id,\n                    }\n                  : null,\n              subtaskIssueIds: restIssue.subtasks.issues.map((subissue) => ({\n                id: subissue.idReadable,\n                internalId: subissue.id,\n              })),\n              dependencyIssueIds: [],\n              activeState: ActiveState.UNKNOWN,\n              stateTransitions: [{timestamp: restIssue.created, activeState: ActiveState.UNKNOWN}],\n              lastUpdate: restIssue.updated,\n            };\n            this.issues_.push(issue);\n            this.idToIssueMap_.set(restIssue.id, issue);\n\n            this.parseIssueCustomFields(issue, restIssue);\n\n            for (const restLink of restIssue.links) {\n              if (restLink.direction === this.dependsOnDirection_ &&\n                  restLink.linkType.id === this.config_.dependsLinkTypeId) {\n                issue.dependencyIssueIds.push(...restLink.issues.map((linkedIssue) => ({\n                  id: linkedIssue.idReadable,\n                  internalId: linkedIssue.id,\n                })));\n              }\n            }\n\n            ++this.numTasksWithDetails_;\n            this.maxUpdateTimeStamp_ = Math.max(this.maxUpdateTimeStamp_, restIssue.updated);\n          }\n          this.progressUpdate();\n        }\n    );\n  }\n\n  private async retrieveOverlayOrder(): Promise<void> {\n    if (this.config_.overlaySavedQueryId.length === 0) {\n      return;\n    }\n\n    const queryParams = {fields: YouTrackFields.OVERLAY_ORDER};\n    type IdIssue = Pick<RestApi.Issue, 'id'>;\n    const issues = await httpGetAll<IdIssue>(this.baseUrl_,\n        RestApi.youTrackPath.ISSUES(this.config_.overlaySavedQueryId), queryParams, this.options_.restBatchSize);\n    const overlayIds = issues.map((issue) => issue.id).filter((id) => this.idToIssueMap_.has(id));\n    const idToOverlayIdx = overlayIds.reduce((map, id, idx) => map.set(id, idx), new Map<string, number>());\n\n    let issueIdx = 0;\n    let overlayIdx = 0;\n    while (issueIdx < this.issues_.length && overlayIdx < overlayIds.length) {\n      const issue: InternalYouTrackIssue = this.issues_[issueIdx];\n      if (idToOverlayIdx.has(issue.internalId)) {\n        this.issues_[issueIdx] = this.idToIssueMap_.get(overlayIds[overlayIdx])!;\n        ++overlayIdx;\n      }\n      ++issueIdx;\n    }\n  }\n\n  private async retrieveActivities(): Promise<void> {\n    const queryParams: {[param: string]: string} = {\n      fields: YouTrackFields.ACTIVITIES_PAGE,\n      categories: YOUTRACK_CUSTOM_FIELDS_CATEGORY,\n      issueQuery: `saved search: {${this.savedQueryName_}}`,\n      $top: this.options_.restBatchSize.toString(),\n    };\n    let busy = true;\n    let promise = this.newHttpRequest<RestApi.ActivityCursorPage>(RestApi.youTrackPath.ACTIVITIES_PAGE, queryParams);\n    do {\n      const activitiesPage = await promise;\n      if (activitiesPage.hasAfter) {\n        queryParams.cursor = activitiesPage.afterCursor!;\n        promise = this.newHttpRequest<RestApi.ActivityCursorPage>(RestApi.youTrackPath.ACTIVITIES_PAGE, queryParams);\n      } else {\n        busy = false;\n      }\n      // The type-cast is fine because we set queryParams.categories accordingly.\n      this.parseActivityItems(activitiesPage.activities as CustomFieldActivityItem[]);\n      this.progressUpdate();\n    } while (busy);\n  }\n\n  private stateBundleElementIdToActiveState(\n      arrayOrObject?: RestApi.StateBundleElement | RestApi.StateBundleElement[]): ActiveState {\n    let object: RestApi.StateBundleElement | undefined;\n    if (arrayOrObject instanceof Array) {\n      object = arrayOrObject.length > 0 ? arrayOrObject[0] : undefined;\n    } else {\n      object = arrayOrObject;\n    }\n\n    if (object === undefined) {\n      return ActiveState.UNKNOWN;\n    }\n\n    if (object.isResolved) {\n      return ActiveState.INACTIVE;\n    } else if (this.idToActiveState_.has(object.id)) {\n      return this.idToActiveState_.get(object.id)!;\n    }\n\n    const lowerCaseName = object.name.toLowerCase();\n    if (lowerCaseName in this.lowerCaseNameToActiveState_) {\n      return this.lowerCaseNameToActiveState_[lowerCaseName];\n    }\n    return ActiveState.UNKNOWN;\n  }\n\n  private addStateTransition(stateTransitions: StateTransition[], newStateTransition: StateTransition,\n      replacementForPreviousUnknown: ActiveState): void {\n    const a = stateTransitions;\n    let n = a.length;\n    const c = this.config_.minStateChangeDurationMs;\n    // By definition, a is the array [a[0], ..., a[n - 1]]. With the abbreviating notation a[i].s  {A,I,U} and\n    // a[i].t (instead of a[i].activeState and a[i].timestamp, respectively), if the following invariants hold here\n    // then they also hold when the function returns.\n    // (And the fact that the invariant holds the first time this method is called follows from method retrieveIssues().\n    // There, the array a was initialized with exactly one element such that a[0].s = U.)\n    // Throughout the explanatory comments, let n denote the length of a (even at the end of the function where the\n    // source code does not reassign n).\n    //\n    // 1. a[0].s, ..., a[n - 2].s  {A,I}.\n    // 2. a[i - 1].s != a[i].s for all i = 1, ..., n - 1\n    // 3. n = 1 => (a[0].s  {A,U} and n > 1 => a[0].s = A)\n    // 4. a[i - 1].t < a[i].t for all i = 1, ..., n - 1\n    // 5. a[i].t - a[i - 1].t >= c for all i = 1, ..., n - 3\n    // 6. a[n - 2].t - a[n - 3].t < c => (a[n - 1].t - a[n - 2].t < c and a[n - 2].s = I and a[n - 1].s = U)\n    // 7. a[n - 1].t - a[n - 2].t < c => a[n - 1].s  {I,U}\n\n    // In the following, we first prepare a so that newStateTransition could be added without violating the\n    // invariants. Let s  {A,I,U} denote the new state and t the new timestamp. That is,\n    // s = newStateTransition.activeState and t = newStateTransition.timestamp.\n\n    // The behavior of this function satisfies (with a and n denoting the respective values upon return, and a' and n'\n    // their current values, respectively):\n    // I. a[i].t - a[i-1].t < c => t - a[i].t < c\n    // II. (a'[n - 1].s  {A,I} and s != a'[n - 1].s and t >= a'[n - 1].t + c)\n    //     => (a' = a[0 .. n - 2] and a[n - 1] = (t, s))\n\n    // Goal: Preserve invariant 4.\n    while (n > 0 && a[n - 1].timestamp >= newStateTransition.timestamp) {\n      a.pop();\n      --n;\n    }\n    // (Condition POST-WHILE:) We now have a[n - 1].t <= t. Also, all invariants hold.\n\n    // Goal: Preserve invariant 1.\n    if (n > 0 && a[n - 1].activeState === ActiveState.UNKNOWN) {\n      a[n - 1].activeState = replacementForPreviousUnknown !== ActiveState.UNKNOWN\n          ? replacementForPreviousUnknown\n          : ActiveState.ACTIVE;\n      // We now have (stronger than invariant 1!): a[0].s, ..., a[n - 1].s  {A,I}.\n      //\n      // Goals:\n      // - Restore invariant 3 (if-condition before '||')\n      // - Restore invariant 2 (if-condition after '||')\n      // - Preserve invariant 5,6,7 (else-if-condition)\n      if ((n === 1 && a[0].activeState === ActiveState.INACTIVE) ||\n          (n > 1 && a[n - 1].activeState === a[n - 2].activeState)) {\n        a.pop();\n        --n;\n      } else if (n > 2 && a[n - 2].activeState === ActiveState.INACTIVE &&\n          a[n - 2].timestamp - a[n - 3].timestamp < c) {\n        // Note we have here: a[n - 1].s = A.\n        a.length -= 2;\n        n -= 2;\n        // We now have a[i].t - a[i - 1].t >= c for all i. Also, a[n - 1].s = A.\n      }\n    }\n    // (Condition NOUNKNOWN:) All invariants hold, and additionally a[n - 1].s  {A,I} and a[i].t - a[i - 1].t >= c\n    // for i = 1, ..., n - 2.\n\n    // Goal: Preserve invariants 5,6,7.\n    if (n > 1 && a[n - 1].activeState === ActiveState.INACTIVE &&\n        a[n - 1].timestamp - a[n - 2].timestamp < c &&\n        newStateTransition.timestamp - a[n - 1].timestamp >= c) {\n      a.length -= 2;\n      n -= 2;\n    }\n    // (Condition GAPS1:) All invariants hold. It also holds now that (a[n - 1].t - a[n - 2].t < c) implies that the\n    // previous if-block was not entered (because 2 elements were removed from the list and therefore\n    // condition NOUNKNOWN would imply a[n - 1].t - a[n - 2].c >= c). Therefore one of the following holds:\n    // (1.) a[n - 1].s  {A,U}, which together with condition NOUNKNOWN implies a[n - 1].s = A, or\n    // (2.) t - a[n - 1].t < c.\n\n    // Goal: Preserve invariant 2.\n    if (n > 0 && newStateTransition.activeState === a[n - 1].activeState) {\n      // All invariants still hold (due to condition GAPS1).\n      return;\n    }\n    // (Condition ALT:) All invariants hold. We also have now s != a[n - 1].s.\n\n    // Goal: Preserve invariants 5,6,7.\n    if (n > 1 && newStateTransition.activeState === ActiveState.ACTIVE &&\n        newStateTransition.timestamp - a[n - 1].timestamp < c) {\n      a.pop();\n      // Since n > 1, we have (due to invariant 3) that a[0].s = A. Therefore, invariant 3 remains\n      // valid. Other invariants trivially hold, because the last line cannot have invalidated them.\n      return;\n    }\n    // (Condition GAPS2:) All invariants hold. We also have now that n > 1 implies that (1.) s  {I,U} or\n    // (2.) t - a[n - 1] >= c.\n\n    // Goal: Preserve invariant 3.\n    if (n > 0 || newStateTransition.activeState !== ActiveState.INACTIVE) {\n      a.push(newStateTransition);\n      // Let n = a.length (which changed in the last line).\n      // - Invariant 1 continues to hold because of condition NOUNKNOWN.\n      // - Invariant 2 continues to hold because of condition ALT.\n      // - Regarding invariant 3, if n = 1, then a[0] = s  {A,U} because of the if-condition. If n = 2, then\n      //   a[0].s  {A,U} due to invariant 3 holding before, and therefore a[0].s = A due to condition NOUNKNOWN.\n      //   If n > 2, then a[0].s = A because invariant 3 held before the last line.\n      // - Invariant 4 holds because a[n - 1].t <= t (due to condition POST-WHILE).\n      // - Invariant 5 holds because of condition NOUNKNOWN.\n      // - Regarding invariant 6, only the case n > 3 is meaningful (i.e., not a vacuous truth). Suppose that\n      //   a[n - 2].t - a[n - 3].t < c. Since invariant 7 held before, we know a[n - 2].s  {I,U}. Together with\n      //   condition NOUNKNOWN, this implies a[n - 2].s = I. Condition GAPS2 implies a[n - 1].s = s  {I,U}, and\n      //   condition ALT strengthens this to a[n - 1].s = U. Finally, due to condition GAPS1 (note that\n      //   a[n - 2].s  {A,U}), we have a[n - 1].t - a[n - 2].t < c.\n      // - Regarding invariant 7, suppose a[n - 1].t - a[n - 2].t < c. Then s  {I,U} due to condition GAPS2.\n    }\n  }\n\n  private parseActivityItems(activityItems: RestApi.CustomFieldActivityItem[]): void {\n    if (activityItems.length > 0) {\n      if (this.minTimeStamp_ === 0) {\n        this.minTimeStamp_ = activityItems[0].timestamp;\n      }\n      this.maxActivityTimeStamp_ =\n          Math.max(this.maxActivityTimeStamp_, activityItems[activityItems.length - 1].timestamp);\n    }\n    for (const activityItem of activityItems) {\n      if (activityItem.field.id === this.config_.stateFieldId) {\n        // In theory, multiple users can own saved queries with the same name, in which case we may see more issues here\n        // than we need to.\n        const issue = this.idToIssueMap_.get(activityItem.target.id);\n        if (issue === undefined) {\n          continue;\n        }\n\n        const newStateTransition = {\n          timestamp: activityItem.timestamp,\n          activeState: this.stateBundleElementIdToActiveState(activityItem.added as RestApi.StateBundleElement[]),\n        };\n        this.addStateTransition(issue.stateTransitions, newStateTransition,\n            this.stateBundleElementIdToActiveState(activityItem.removed as RestApi.StateBundleElement[]));\n      }\n    }\n  }\n\n  private finalizeSchedule(): void {\n    for (const issue of this.issues_) {\n      if (!this.options_.omitIssueActivities) {\n        this.finalizeIssueActivities(issue);\n      }\n\n      let parent: string = '';\n      if (issue.parentIssueId !== null) {\n        if (this.idToIssueMap_.has(issue.parentIssueId.internalId)) {\n          parent = issue.parentIssueId.id;\n        } else {\n          this.projectPlan_.warnings.push({\n            description: `Issue ${issue.id} is a subtask of ${issue.parentIssueId.id}, which is not contained ` +\n                `in saved search ${this.savedQueryName_}.`,\n            issueId: issue.id,\n          });\n        }\n      }\n\n      const dependencies: string[] = [];\n      const unknownDependencies: string[] = [];\n      for (const issueId of issue.dependencyIssueIds) {\n        const pushTo = this.idToIssueMap_.has(issueId.internalId) ? dependencies : unknownDependencies;\n        pushTo.push(issueId.id);\n      }\n      if (unknownDependencies.length > 0) {\n        this.projectPlan_.warnings.push({\n          description: `Issue ${issue.id} depends on ${unknownDependencies.join(', ')}, which is/are not ` +\n              `contained in saved search ${this.savedQueryName_}.`,\n          issueId: issue.id,\n        });\n      }\n\n      let remainingEffortMs = issue.resolved === Number.MAX_SAFE_INTEGER\n          ? issue.remainingEffortMs\n          : 0;\n      const unknownSubtasks: string[] = [];\n      for (const issueId of issue.subtaskIssueIds) {\n        const subIssue: InternalYouTrackIssue | undefined = this.idToIssueMap_.get(issueId.internalId);\n        if (subIssue !== undefined) {\n          remainingEffortMs = Math.max(0, remainingEffortMs - subIssue.remainingEffortMs);\n        } else {\n          unknownSubtasks.push(issueId.id);\n        }\n      }\n      if (unknownSubtasks.length > 0) {\n        this.projectPlan_.warnings.push({\n          description: `Issue ${issue.id} is a parent for ${unknownSubtasks.join(', ')}, which is/are not ` +\n              `contained in saved search ${this.savedQueryName_}.`,\n          issueId: issue.id,\n        });\n      }\n\n      const youTrackIssue: YouTrackIssue = {\n        id: issue.id,\n        summary: issue.summary,\n        issueActivities: issue.issueActivities,\n        resolved: issue.resolved,\n        state: issue.state,\n        assignee: issue.assignee,\n        parent,\n        customFields: issue.customFields,\n        remainingEffortMs,\n        remainingWaitTimeMs: issue.resolved === Number.MAX_SAFE_INTEGER\n            ? issue.remainingWaitTimeMs\n            : 0,\n        splittable: issue.splittable,\n        dependencies,\n      };\n      youTrackIssue.splittable = this.config_.isSplittableFn(youTrackIssue);\n      this.projectPlan_.issues.push(youTrackIssue);\n    }\n  }\n\n  private finalizeIssueActivities(issue: InternalYouTrackIssue): void {\n    // The following 3 issue properties have been set before in finishedIssues().\n    const newStateTransition: StateTransition = {\n      timestamp: issue.lastUpdate!,\n      activeState: issue.activeState,\n    };\n    this.addStateTransition(issue.stateTransitions, newStateTransition, issue.activeState);\n    // Using the definitions in addStateTransition(), we could at this point still have a[n - 1].s = U or\n    // a[n - 1].t - a[n - 2].t < c. We therefore add the following final transition for \"clean up\".\n    // Note that we err on the side of interpreting state UNKNOWN as ACTIVE.\n    const finalStateTransition: StateTransition = {\n      timestamp: Number.MAX_SAFE_INTEGER,\n      activeState: issue.activeState === ActiveState.UNKNOWN\n          ? ActiveState.ACTIVE\n          : issue.activeState,\n    };\n    this.addStateTransition(issue.stateTransitions, finalStateTransition, ActiveState.ACTIVE);\n    assert(\n        issue.stateTransitions\n            .filter((stateTransition) => stateTransition.activeState === ActiveState.UNKNOWN).length === 0,\n        'issue.stateTransitions should no longer contain elements with activeState === ActiveState.UNKNOWN'\n    );\n    assert(\n        issue.stateTransitions\n            .map((stateTransition) => stateTransition.timestamp)\n            .reduce(\n                ([min, previousTimestamp], timestamp) => [Math.min(min, timestamp - previousTimestamp), timestamp],\n                [Number.MAX_SAFE_INTEGER, -this.config_.minStateChangeDurationMs]\n            )[0] >= this.config_.minStateChangeDurationMs,\n        'issue.stateTransitions should no longer have consecutive elements within less than minStateChangeDurationMs'\n    );\n\n    const a = issue.stateTransitions;\n    const n = a.length;\n    for (let i = 0; i < n; i += 2) {\n      issue.issueActivities.push({\n        assignee: issue.assignee,\n        start: a[i].timestamp,\n        end: i < n - 1 ? a[i + 1].timestamp : Number.MAX_SAFE_INTEGER,\n        isWaiting: false,\n      });\n    }\n  }\n}\n","import { isFailure } from '@fschopp/project-planning-for-you-track';\nimport { SDataArray } from 's-array';\nimport { Alert } from './alerts-model';\n\n/**\n * Controller for the list of alerts.\n */\nexport class AlertsCtrl {\n  /**\n   * Constructor.\n   *\n   * @param alerts_ Array signal carrying the list of alerts currently shown.\n   */\n  public constructor(\n      private readonly alerts_: SDataArray<Alert>\n  ) { }\n\n  /**\n   * Adds a new alert that is to be shown to the user.\n   *\n   * @param title title of the alert\n   * @param failure details of the alert\n   */\n  public alert(title: string, failure: unknown): void {\n    let message: string;\n    if (isFailure(failure)) {\n      message = failure;\n    } else if (failure instanceof Error){\n      message = failure.toString();\n    } else {\n      message = `Unknown error: ${failure}`;\n    }\n    this.alerts_.push({title, message});\n  }\n\n  /**\n   * Removes the given alert.\n   *\n   * @param alert alert to be removed, must have been previously created by {@link alert}().\n   */\n  public remove(alert: Alert): void {\n    this.alerts_.remove(alert);\n  }\n}\n","import { S } from './index';\nvar DOCUMENT_FRAGMENT_NODE = 11, TEXT_NODE = 3;\nexport function insert(range, value) {\n    var parent = range.start.parentNode, test = range.start, good = null, t = typeof value;\n    //if (parent === null) {\n    //    throw new Error(\"Surplus.insert() can only be used on a node that has a parent node. \\n\"\n    //        + \"Node ``\" + range.start + \"'' is currently unattached to a parent.\");\n    //}\n    //if (range.end.parentNode !== parent) {\n    //    throw new Error(\"Surplus.insert() requires that the inserted nodes remain sibilings \\n\"\n    //        + \"of the original node.  The DOM has been modified such that this is \\n\"\n    //        + \"no longer the case.\");\n    //}\n    if (t === 'string' || t === 'number') {\n        value = value.toString();\n        if (test.nodeType === TEXT_NODE) {\n            test.data = value;\n            good = test;\n        }\n        else {\n            value = document.createTextNode(value);\n            parent.replaceChild(value, test);\n            if (range.end === test)\n                range.end = value;\n            range.start = good = value;\n        }\n    }\n    else if (value instanceof Node) {\n        if (test !== value) {\n            parent.replaceChild(value, test);\n            if (range.end === test)\n                range.end = value;\n            range.start = value;\n        }\n        good = value;\n    }\n    else if (Array.isArray(value)) {\n        insertArray(value);\n    }\n    else if (value instanceof Function) {\n        S(function () {\n            insert(range, value());\n        });\n        good = range.end;\n    }\n    else if (value !== null && value !== undefined && value !== true && value !== false) {\n        value = value.toString();\n        if (test.nodeType === TEXT_NODE) {\n            test.data = value;\n            good = test;\n        }\n        else {\n            value = document.createTextNode(value);\n            parent.replaceChild(value, test);\n            if (range.end === test)\n                range.end = value;\n            range.start = good = value;\n        }\n    }\n    if (good === null) {\n        if (range.start === parent.firstChild && range.end === parent.lastChild && range.start !== range.end) {\n            // fast delete entire contents\n            parent.textContent = \"\";\n            value = document.createTextNode(\"\");\n            parent.appendChild(value);\n            good = range.start = range.end = value;\n        }\n        else if (test.nodeType === TEXT_NODE) {\n            test.data = \"\";\n            good = test;\n        }\n        else {\n            value = document.createTextNode(\"\");\n            parent.replaceChild(value, test);\n            if (range.end === test)\n                range.end = value;\n            range.start = good = value;\n        }\n    }\n    // remove anything left after the good cursor from the insert range\n    while (good !== range.end) {\n        test = range.end;\n        range.end = test.previousSibling;\n        parent.removeChild(test);\n    }\n    return range;\n    function insertArray(array) {\n        for (var i = 0, len = array.length; i < len; i++) {\n            var value = array[i];\n            if (good === range.end) {\n                if (value instanceof Node) {\n                    good = range.end = (good.nextSibling ? parent.insertBefore(value, good.nextSibling) : parent.appendChild(value));\n                }\n                else if (value instanceof Array) {\n                    insertArray(value);\n                }\n                else if (value !== null && value !== undefined && value !== false && value !== true) {\n                    value = document.createTextNode(value.toString());\n                    good = range.end = (good.nextSibling ? parent.insertBefore(value, good.nextSibling) : parent.appendChild(value));\n                }\n            }\n            else {\n                if (value instanceof Node) {\n                    if (test !== value) {\n                        if (good === null) {\n                            if (range.end === value)\n                                range.end = value.previousSibling;\n                            parent.replaceChild(value, test);\n                            range.start = value;\n                            if (range.end === test)\n                                range.end = value;\n                            test = value.nextSibling;\n                        }\n                        else {\n                            if (test.nextSibling === value && test !== value.nextSibling && test !== range.end) {\n                                parent.removeChild(test);\n                                test = value.nextSibling;\n                            }\n                            else {\n                                if (range.end === value)\n                                    range.end = value.previousSibling;\n                                parent.insertBefore(value, test);\n                            }\n                        }\n                    }\n                    else {\n                        test = test.nextSibling;\n                    }\n                    good = value;\n                }\n                else if (value instanceof Array) {\n                    insertArray(value);\n                }\n                else if (value !== null && value !== undefined && value !== true && value !== false) {\n                    value = value.toString();\n                    if (test.nodeType === TEXT_NODE) {\n                        test.data = value;\n                        if (good === null)\n                            range.start = test;\n                        good = test, test = good.nextSibling;\n                    }\n                    else {\n                        value = document.createTextNode(value);\n                        parent.insertBefore(value, test);\n                        if (good === null)\n                            range.start = value;\n                        good = value;\n                    }\n                }\n            }\n        }\n    }\n}\n","import { S } from './index';\nexport function content(parent, value, current) {\n    var t = typeof value;\n    if (current === value) {\n        // nothing to do\n    }\n    else if (t === 'string') {\n        // if a Text node already exists, it's faster to set its .data than set the parent.textContent\n        if (current !== \"\" && typeof current === 'string') {\n            current = parent.firstChild.data = value;\n        }\n        else {\n            current = parent.textContent = value;\n        }\n    }\n    else if (t === 'number') {\n        value = value.toString();\n        if (current !== \"\" && typeof current === 'string') {\n            current = parent.firstChild.data = value;\n        }\n        else {\n            current = parent.textContent = value;\n        }\n    }\n    else if (value == null || t === 'boolean') { // null, undefined, true or false\n        clear(parent);\n        current = \"\";\n    }\n    else if (t === 'function') {\n        S(function () {\n            current = content(parent, value(), current);\n        });\n    }\n    else if (value instanceof Node) {\n        if (Array.isArray(current)) {\n            if (current.length === 0) {\n                parent.appendChild(value);\n            }\n            else if (current.length === 1) {\n                parent.replaceChild(value, current[0]);\n            }\n            else {\n                clear(parent);\n                parent.appendChild(value);\n            }\n        }\n        else if (current === \"\") {\n            parent.appendChild(value);\n        }\n        else {\n            parent.replaceChild(value, parent.firstChild);\n        }\n        current = value;\n    }\n    else if (Array.isArray(value)) {\n        var array = normalizeIncomingArray([], value);\n        if (array.length === 0) {\n            clear(parent);\n        }\n        else {\n            if (Array.isArray(current)) {\n                if (current.length === 0) {\n                    appendNodes(parent, array, 0, array.length);\n                }\n                else {\n                    reconcileArrays(parent, current, array);\n                }\n            }\n            else if (current === \"\") {\n                appendNodes(parent, array, 0, array.length);\n            }\n            else {\n                reconcileArrays(parent, [parent.firstChild], array);\n            }\n        }\n        current = array;\n    }\n    else {\n        throw new Error(\"content must be Node, stringable, or array of same\");\n    }\n    return current;\n}\nvar NOMATCH = -1, NOINSERT = -2;\nvar RECONCILE_ARRAY_BATCH = 0;\nvar RECONCILE_ARRAY_BITS = 16, RECONCILE_ARRAY_INC = 1 << RECONCILE_ARRAY_BITS, RECONCILE_ARRAY_MASK = RECONCILE_ARRAY_INC - 1;\n// reconcile the content of parent from ns to us\n// see ivi's excellent writeup of diffing arrays in a vdom library: \n// https://github.com/ivijs/ivi/blob/2c81ead934b9128e092cc2a5ef2d3cabc73cb5dd/packages/ivi/src/vdom/implementation.ts#L1187\n// this code isn't identical, since we're diffing real dom nodes to nodes-or-strings, \n// but the core methodology of trimming ends and reversals, matching nodes, then using\n// the longest increasing subsequence to minimize DOM ops is inspired by ivi.\nfunction reconcileArrays(parent, ns, us) {\n    var ulen = us.length, \n    // n = nodes, u = updates\n    // ranges defined by min and max indices\n    nmin = 0, nmax = ns.length - 1, umin = 0, umax = ulen - 1, \n    // start nodes of ranges\n    n = ns[nmin], u = us[umin], \n    // end nodes of ranges\n    nx = ns[nmax], ux = us[umax], \n    // node, if any, just after ux, used for doing .insertBefore() to put nodes at end\n    ul = nx.nextSibling, i, j, k, loop = true;\n    // scan over common prefixes, suffixes, and simple reversals\n    fixes: while (loop) {\n        loop = false;\n        // common prefix, u === n\n        while (equable(u, n, umin, us)) {\n            umin++;\n            nmin++;\n            if (umin > umax || nmin > nmax)\n                break fixes;\n            u = us[umin];\n            n = ns[nmin];\n        }\n        // common suffix, ux === nx\n        while (equable(ux, nx, umax, us)) {\n            ul = nx;\n            umax--;\n            nmax--;\n            if (umin > umax || nmin > nmax)\n                break fixes;\n            ux = us[umax];\n            nx = ns[nmax];\n        }\n        // reversal u === nx, have to swap node forward\n        while (equable(u, nx, umin, us)) {\n            loop = true;\n            parent.insertBefore(nx, n);\n            umin++;\n            nmax--;\n            if (umin > umax || nmin > nmax)\n                break fixes;\n            u = us[umin];\n            nx = ns[nmax];\n        }\n        // reversal ux === n, have to swap node back\n        while (equable(ux, n, umax, us)) {\n            loop = true;\n            if (ul === null)\n                parent.appendChild(n);\n            else\n                parent.insertBefore(n, ul);\n            ul = n;\n            umax--;\n            nmin++;\n            if (umin > umax || nmin > nmax)\n                break fixes;\n            ux = us[umax];\n            n = ns[nmin];\n        }\n    }\n    // if that covered all updates, just need to remove any remaining nodes and we're done\n    if (umin > umax) {\n        // remove any remaining nodes\n        while (nmin <= nmax) {\n            parent.removeChild(ns[nmax]);\n            nmax--;\n        }\n        return;\n    }\n    // if that covered all current nodes, just need to insert any remaining updates and we're done\n    if (nmin > nmax) {\n        // insert any remaining nodes\n        while (umin <= umax) {\n            insertOrAppend(parent, us[umin], ul, umin, us);\n            umin++;\n        }\n        return;\n    }\n    // simple cases don't apply, have to actually match up nodes and figure out minimum DOM ops\n    // loop through nodes and mark them with a special property indicating their order\n    // we'll then go through the updates and look for those properties\n    // in case any of the updates have order properties left over from earlier runs, we \n    // use the low bits of the order prop to record a batch identifier.\n    // I'd much rather use a Map than a special property, but Maps of objects are really\n    // slow currently, like only 100k get/set ops / second\n    // for Text nodes, all that matters is their order, as they're easily, interchangeable\n    // so we record their positions in ntext[]\n    var ntext = [];\n    // update global batch identifer\n    RECONCILE_ARRAY_BATCH = (RECONCILE_ARRAY_BATCH + 1) % RECONCILE_ARRAY_INC;\n    for (i = nmin, j = (nmin << RECONCILE_ARRAY_BITS) + RECONCILE_ARRAY_BATCH; i <= nmax; i++, j += RECONCILE_ARRAY_INC) {\n        n = ns[i];\n        // add or update special order property\n        if (n.__surplus_order === undefined) {\n            Object.defineProperty(n, '__surplus_order', { value: j, writable: true });\n        }\n        else {\n            n.__surplus_order = j;\n        }\n        if (n instanceof Text) {\n            ntext.push(i);\n        }\n    }\n    // now loop through us, looking for the order property, otherwise recording NOMATCH\n    var src = new Array(umax - umin + 1), utext = [], preserved = 0;\n    for (i = umin; i <= umax; i++) {\n        u = us[i];\n        if (typeof u === 'string') {\n            utext.push(i);\n            src[i - umin] = NOMATCH;\n        }\n        else if ((j = u.__surplus_order) !== undefined && (j & RECONCILE_ARRAY_MASK) === RECONCILE_ARRAY_BATCH) {\n            j >>= RECONCILE_ARRAY_BITS;\n            src[i - umin] = j;\n            ns[j] = null;\n            preserved++;\n        }\n        else {\n            src[i - umin] = NOMATCH;\n        }\n    }\n    if (preserved === 0 && nmin === 0 && nmax === ns.length - 1) {\n        // no nodes preserved, use fast clear and append\n        clear(parent);\n        while (umin <= umax) {\n            insertOrAppend(parent, us[umin], null, umin, us);\n            umin++;\n        }\n        return;\n    }\n    // find longest common sequence between ns and us, represented as the indices \n    // of the longest increasing subsequence in src\n    var lcs = longestPositiveIncreasingSubsequence(src);\n    // we know we can preserve their order, so march them as NOINSERT\n    for (i = 0; i < lcs.length; i++) {\n        src[lcs[i]] = NOINSERT;\n    }\n    /*\n              0   1   2   3   4   5   6   7\n    ns    = [ n,  n,  t,  n,  n,  n,  t,  n ]\n                  |          /   /       /\n                  |        /   /       /\n                  +------/---/-------/----+\n                       /   /       /      |\n    us    = [ n,  s,  n,  n,  s,  n,  s,  n ]\n    src   = [-1, -1,  4,  5, -1,  7, -1,  1 ]\n    lis   = [         2,  3,      5]\n                      j\n    utext = [     1,          4,      6 ]\n                  i\n    ntext = [         2,              6 ]\n                      k\n    */\n    // replace strings in us with Text nodes, reusing Text nodes from ns when we can do so without moving them\n    var utexti = 0, lcsj = 0, ntextk = 0;\n    for (i = 0, j = 0, k = 0; i < utext.length; i++) {\n        utexti = utext[i];\n        // need to answer qeustion \"if utext[i] falls between two lcs nodes, is there an ntext between them which we can reuse?\"\n        // first, find j such that lcs[j] is the first lcs node *after* utext[i]\n        while (j < lcs.length && (lcsj = lcs[j]) < utexti - umin)\n            j++;\n        // now, find k such that ntext[k] is the first ntext *after* lcs[j-1] (or after start, if j === 0)\n        while (k < ntext.length && (ntextk = ntext[k], j !== 0) && ntextk < src[lcs[j - 1]])\n            k++;\n        // if ntext[k] < lcs[j], then we know ntext[k] falls between lcs[j-1] (or start) and lcs[j] (or end)\n        // that means we can re-use it without moving it\n        if (k < ntext.length && (j === lcs.length || ntextk < src[lcsj])) {\n            n = ns[ntextk];\n            u = us[utexti];\n            if (n.data !== u)\n                n.data = u;\n            ns[ntextk] = null;\n            us[utexti] = n;\n            src[utexti] = NOINSERT;\n            k++;\n        }\n        else {\n            // if we didn't find one to re-use, make a new Text node\n            us[utexti] = document.createTextNode(us[utexti]);\n        }\n    }\n    // remove stale nodes in ns\n    while (nmin <= nmax) {\n        n = ns[nmin];\n        if (n !== null) {\n            parent.removeChild(n);\n        }\n        nmin++;\n    }\n    // insert new nodes\n    while (umin <= umax) {\n        ux = us[umax];\n        if (src[umax - umin] !== NOINSERT) {\n            if (ul === null)\n                parent.appendChild(ux);\n            else\n                parent.insertBefore(ux, ul);\n        }\n        ul = ux;\n        umax--;\n    }\n}\n// two nodes are \"equable\" if they are identical (===) or if we can make them the same, i.e. they're \n// Text nodes, which we can reuse with the new text\nfunction equable(u, n, i, us) {\n    if (u === n) {\n        return true;\n    }\n    else if (typeof u === 'string' && n instanceof Text) {\n        if (n.data !== u)\n            n.data = u;\n        us[i] = n;\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nfunction appendNodes(parent, array, i, end) {\n    var node;\n    for (; i < end; i++) {\n        node = array[i];\n        if (node instanceof Node) {\n            parent.appendChild(node);\n        }\n        else {\n            node = array[i] = document.createTextNode(node);\n            parent.appendChild(node);\n        }\n    }\n}\nfunction insertOrAppend(parent, node, marker, i, us) {\n    if (typeof node === 'string') {\n        node = us[i] = document.createTextNode(node);\n    }\n    if (marker === null)\n        parent.appendChild(node);\n    else\n        parent.insertBefore(node, marker);\n}\nfunction normalizeIncomingArray(normalized, array) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        var item = array[i];\n        if (item instanceof Node) {\n            normalized.push(item);\n        }\n        else if (item == null || item === true || item === false) { // matches null, undefined, true or false\n            // skip\n        }\n        else if (Array.isArray(item)) {\n            normalizeIncomingArray(normalized, item);\n        }\n        else if (typeof item === 'string') {\n            normalized.push(item);\n        }\n        else {\n            normalized.push(item.toString());\n        }\n    }\n    return normalized;\n}\nfunction clear(node) {\n    node.textContent = \"\";\n}\n// return an array of the indices of ns that comprise the longest increasing subsequence within ns\nfunction longestPositiveIncreasingSubsequence(ns) {\n    var seq = [], is = [], l = -1, pre = new Array(ns.length);\n    for (var i = 0, len = ns.length; i < len; i++) {\n        var n = ns[i];\n        if (n < 0)\n            continue;\n        var j = findGreatestIndexLEQ(seq, n);\n        if (j !== -1)\n            pre[i] = is[j];\n        if (j === l) {\n            l++;\n            seq[l] = n;\n            is[l] = i;\n        }\n        else if (n < seq[j + 1]) {\n            seq[j + 1] = n;\n            is[j + 1] = i;\n        }\n    }\n    for (i = is[l]; l >= 0; i = pre[i], l--) {\n        seq[l] = i;\n    }\n    return seq;\n}\nfunction findGreatestIndexLEQ(seq, n) {\n    // invariant: lo is guaranteed to be index of a value <= n, hi to be >\n    // therefore, they actually start out of range: (-1, last + 1)\n    var lo = -1, hi = seq.length;\n    // fast path for simple increasing sequences\n    if (hi > 0 && seq[hi - 1] <= n)\n        return hi - 1;\n    while (hi - lo > 1) {\n        var mid = Math.floor((lo + hi) / 2);\n        if (seq[mid] > n) {\n            hi = mid;\n        }\n        else {\n            lo = mid;\n        }\n    }\n    return lo;\n}\n","var svgNS = \"http://www.w3.org/2000/svg\";\nexport function createElement(tag, className, parent) {\n    var el = document.createElement(tag);\n    if (className)\n        el.className = className;\n    if (parent)\n        parent.appendChild(el);\n    return el;\n}\nexport function createSvgElement(tag, className, parent) {\n    var el = document.createElementNS(svgNS, tag);\n    if (className)\n        el.setAttribute(\"class\", className);\n    if (parent)\n        parent.appendChild(el);\n    return el;\n}\nexport function createComment(text, parent) {\n    var comment = document.createComment(text);\n    parent.appendChild(comment);\n    return comment;\n}\nexport function createTextNode(text, parent) {\n    var node = document.createTextNode(text);\n    parent.appendChild(node);\n    return node;\n}\nexport function setAttribute(node, name, value) {\n    if (value === false || value === null || value === undefined)\n        node.removeAttribute(name);\n    else\n        node.setAttribute(name, value);\n}\nexport function setAttributeNS(node, namespace, name, value) {\n    if (value === false || value === null || value === undefined)\n        node.removeAttributeNS(namespace, name);\n    else\n        node.setAttributeNS(namespace, name, value);\n}\n","var \n// pre-seed the caches with a few special cases, so we don't need to check for them in the common cases\nhtmlFieldCache = {\n    // special props\n    style: ['style', null, 3 /* Assign */],\n    ref: ['ref', null, 2 /* Ignore */],\n    fn: ['fn', null, 2 /* Ignore */],\n    // attr compat\n    class: ['className', null, 0 /* Property */],\n    for: ['htmlFor', null, 0 /* Property */],\n    \"accept-charset\": ['acceptCharset', null, 0 /* Property */],\n    \"http-equiv\": ['httpEquiv', null, 0 /* Property */],\n    // a few React oddities, mostly disagreeing about casing\n    onDoubleClick: ['ondblclick', null, 0 /* Property */],\n    spellCheck: ['spellcheck', null, 0 /* Property */],\n    allowFullScreen: ['allowFullscreen', null, 0 /* Property */],\n    autoCapitalize: ['autocapitalize', null, 0 /* Property */],\n    autoFocus: ['autofocus', null, 0 /* Property */],\n    autoPlay: ['autoplay', null, 0 /* Property */],\n    // other\n    // role is part of the ARIA spec but not caught by the aria- attr filter\n    role: ['role', null, 1 /* Attribute */]\n}, svgFieldCache = {\n    // special props\n    style: ['style', null, 3 /* Assign */],\n    ref: ['ref', null, 2 /* Ignore */],\n    fn: ['fn', null, 2 /* Ignore */],\n    // property compat\n    className: ['class', null, 1 /* Attribute */],\n    htmlFor: ['for', null, 1 /* Attribute */],\n    tabIndex: ['tabindex', null, 1 /* Attribute */],\n    // React compat\n    onDoubleClick: ['ondblclick', null, 0 /* Property */],\n    // attributes with eccentric casing - some SVG attrs are snake-cased, some camelCased\n    allowReorder: ['allowReorder', null, 1 /* Attribute */],\n    attributeName: ['attributeName', null, 1 /* Attribute */],\n    attributeType: ['attributeType', null, 1 /* Attribute */],\n    autoReverse: ['autoReverse', null, 1 /* Attribute */],\n    baseFrequency: ['baseFrequency', null, 1 /* Attribute */],\n    calcMode: ['calcMode', null, 1 /* Attribute */],\n    clipPathUnits: ['clipPathUnits', null, 1 /* Attribute */],\n    contentScriptType: ['contentScriptType', null, 1 /* Attribute */],\n    contentStyleType: ['contentStyleType', null, 1 /* Attribute */],\n    diffuseConstant: ['diffuseConstant', null, 1 /* Attribute */],\n    edgeMode: ['edgeMode', null, 1 /* Attribute */],\n    externalResourcesRequired: ['externalResourcesRequired', null, 1 /* Attribute */],\n    filterRes: ['filterRes', null, 1 /* Attribute */],\n    filterUnits: ['filterUnits', null, 1 /* Attribute */],\n    gradientTransform: ['gradientTransform', null, 1 /* Attribute */],\n    gradientUnits: ['gradientUnits', null, 1 /* Attribute */],\n    kernelMatrix: ['kernelMatrix', null, 1 /* Attribute */],\n    kernelUnitLength: ['kernelUnitLength', null, 1 /* Attribute */],\n    keyPoints: ['keyPoints', null, 1 /* Attribute */],\n    keySplines: ['keySplines', null, 1 /* Attribute */],\n    keyTimes: ['keyTimes', null, 1 /* Attribute */],\n    lengthAdjust: ['lengthAdjust', null, 1 /* Attribute */],\n    limitingConeAngle: ['limitingConeAngle', null, 1 /* Attribute */],\n    markerHeight: ['markerHeight', null, 1 /* Attribute */],\n    markerUnits: ['markerUnits', null, 1 /* Attribute */],\n    maskContentUnits: ['maskContentUnits', null, 1 /* Attribute */],\n    maskUnits: ['maskUnits', null, 1 /* Attribute */],\n    numOctaves: ['numOctaves', null, 1 /* Attribute */],\n    pathLength: ['pathLength', null, 1 /* Attribute */],\n    patternContentUnits: ['patternContentUnits', null, 1 /* Attribute */],\n    patternTransform: ['patternTransform', null, 1 /* Attribute */],\n    patternUnits: ['patternUnits', null, 1 /* Attribute */],\n    pointsAtX: ['pointsAtX', null, 1 /* Attribute */],\n    pointsAtY: ['pointsAtY', null, 1 /* Attribute */],\n    pointsAtZ: ['pointsAtZ', null, 1 /* Attribute */],\n    preserveAlpha: ['preserveAlpha', null, 1 /* Attribute */],\n    preserveAspectRatio: ['preserveAspectRatio', null, 1 /* Attribute */],\n    primitiveUnits: ['primitiveUnits', null, 1 /* Attribute */],\n    refX: ['refX', null, 1 /* Attribute */],\n    refY: ['refY', null, 1 /* Attribute */],\n    repeatCount: ['repeatCount', null, 1 /* Attribute */],\n    repeatDur: ['repeatDur', null, 1 /* Attribute */],\n    requiredExtensions: ['requiredExtensions', null, 1 /* Attribute */],\n    requiredFeatures: ['requiredFeatures', null, 1 /* Attribute */],\n    specularConstant: ['specularConstant', null, 1 /* Attribute */],\n    specularExponent: ['specularExponent', null, 1 /* Attribute */],\n    spreadMethod: ['spreadMethod', null, 1 /* Attribute */],\n    startOffset: ['startOffset', null, 1 /* Attribute */],\n    stdDeviation: ['stdDeviation', null, 1 /* Attribute */],\n    stitchTiles: ['stitchTiles', null, 1 /* Attribute */],\n    surfaceScale: ['surfaceScale', null, 1 /* Attribute */],\n    systemLanguage: ['systemLanguage', null, 1 /* Attribute */],\n    tableValues: ['tableValues', null, 1 /* Attribute */],\n    targetX: ['targetX', null, 1 /* Attribute */],\n    targetY: ['targetY', null, 1 /* Attribute */],\n    textLength: ['textLength', null, 1 /* Attribute */],\n    viewBox: ['viewBox', null, 1 /* Attribute */],\n    viewTarget: ['viewTarget', null, 1 /* Attribute */],\n    xChannelSelector: ['xChannelSelector', null, 1 /* Attribute */],\n    yChannelSelector: ['yChannelSelector', null, 1 /* Attribute */],\n    zoomAndPan: ['zoomAndPan', null, 1 /* Attribute */],\n};\nvar attributeOnlyRx = /-/, deepAttrRx = /^style-/, isAttrOnlyField = function (field) { return attributeOnlyRx.test(field) && !deepAttrRx.test(field); }, propOnlyRx = /^(on|style)/, isPropOnlyField = function (field) { return propOnlyRx.test(field); }, propPartRx = /[a-z][A-Z]/g, getAttrName = function (field) { return field.replace(propPartRx, function (m) { return m[0] + '-' + m[1]; }).toLowerCase(); }, jsxEventPropRx = /^on[A-Z]/, attrPartRx = /\\-(?:[a-z]|$)/g, getPropName = function (field) {\n    var prop = field.replace(attrPartRx, function (m) { return m.length === 1 ? '' : m[1].toUpperCase(); });\n    return jsxEventPropRx.test(prop) ? prop.toLowerCase() : prop;\n}, deepPropRx = /^(style)([A-Z])/, buildPropData = function (prop) {\n    var m = deepPropRx.exec(prop);\n    return m ? [m[2].toLowerCase() + prop.substr(m[0].length), m[1], 0 /* Property */] : [prop, null, 0 /* Property */];\n}, attrNamespaces = {\n    xlink: \"http://www.w3.org/1999/xlink\",\n    xml: \"http://www.w3.org/XML/1998/namespace\",\n}, attrNamespaceRx = new RegExp(\"^(\" + Object.keys(attrNamespaces).join('|') + \")-(.*)\"), buildAttrData = function (attr) {\n    var m = attrNamespaceRx.exec(attr);\n    return m ? [m[2], attrNamespaces[m[1]], 1 /* Attribute */] : [attr, null, 1 /* Attribute */];\n};\nexport var getFieldData = function (field, svg) {\n    var cache = svg ? svgFieldCache : htmlFieldCache, cached = cache[field];\n    if (cached)\n        return cached;\n    var attr = svg && !isPropOnlyField(field)\n        || !svg && isAttrOnlyField(field), name = attr ? getAttrName(field) : getPropName(field);\n    if (name !== field && (cached = cache[name]))\n        return cached;\n    var data = attr ? buildAttrData(name) : buildPropData(name);\n    return cache[field] = data;\n};\n","import { setAttribute } from './dom';\nimport { getFieldData } from './fieldData';\nimport { setAttributeNS } from './index';\nexport function assign(a, b) {\n    var props = Object.keys(b);\n    for (var i = 0, len = props.length; i < len; i++) {\n        var name = props[i];\n        a[name] = b[name];\n    }\n}\nexport function spread(node, obj, svg) {\n    var props = Object.keys(obj);\n    for (var i = 0, len = props.length; i < len; i++) {\n        var name = props[i];\n        setField(node, name, obj[name], svg);\n    }\n}\nfunction setField(node, field, value, svg) {\n    var _a = getFieldData(field, svg), name = _a[0], namespace = _a[1], flags = _a[2], type = flags & 3 /* Type */;\n    if (type === 0 /* Property */) {\n        if (namespace)\n            node = node[namespace];\n        node[name] = value;\n    }\n    else if (type === 1 /* Attribute */) {\n        if (namespace)\n            setAttributeNS(node, namespace, name, value);\n        else\n            setAttribute(node, name, value);\n    }\n    else if (type === 3 /* Assign */) {\n        if (value && typeof value === 'object')\n            assign(node.style, value);\n    }\n}\n","// Public interface\r\nvar S = function S(fn, value) {\r\n    var node = new ComputationNode(fn, value);\r\n    return function computation() {\r\n        return node.current();\r\n    };\r\n};\r\n// compatibility with commonjs systems that expect default export to be at require('s.js').default rather than just require('s-js')\r\nObject.defineProperty(S, 'default', { value: S });\r\nexport default S;\r\nS.root = function root(fn) {\r\n    var owner = Owner, root = fn.length === 0 ? UNOWNED : new ComputationNode(null, null), result = undefined, disposer = fn.length === 0 ? null : function _dispose() {\r\n        if (RunningClock !== null) {\r\n            RootClock.disposes.add(root);\r\n        }\r\n        else {\r\n            dispose(root);\r\n        }\r\n    };\r\n    Owner = root;\r\n    if (RunningClock === null) {\r\n        result = topLevelRoot(fn, disposer, owner);\r\n    }\r\n    else {\r\n        result = disposer === null ? fn() : fn(disposer);\r\n        Owner = owner;\r\n    }\r\n    return result;\r\n};\r\nfunction topLevelRoot(fn, disposer, owner) {\r\n    try {\r\n        return disposer === null ? fn() : fn(disposer);\r\n    }\r\n    finally {\r\n        Owner = owner;\r\n    }\r\n}\r\nS.on = function on(ev, fn, seed, onchanges) {\r\n    if (Array.isArray(ev))\r\n        ev = callAll(ev);\r\n    onchanges = !!onchanges;\r\n    return S(on, seed);\r\n    function on(value) {\r\n        var running = RunningNode;\r\n        ev();\r\n        if (onchanges)\r\n            onchanges = false;\r\n        else {\r\n            RunningNode = null;\r\n            value = fn(value);\r\n            RunningNode = running;\r\n        }\r\n        return value;\r\n    }\r\n};\r\nfunction callAll(ss) {\r\n    return function all() {\r\n        for (var i = 0; i < ss.length; i++)\r\n            ss[i]();\r\n    };\r\n}\r\nS.effect = function effect(fn, value) {\r\n    new ComputationNode(fn, value);\r\n};\r\nS.data = function data(value) {\r\n    var node = new DataNode(value);\r\n    return function data(value) {\r\n        if (arguments.length === 0) {\r\n            return node.current();\r\n        }\r\n        else {\r\n            return node.next(value);\r\n        }\r\n    };\r\n};\r\nS.value = function value(current, eq) {\r\n    var data = S.data(current), age = -1;\r\n    return function value(update) {\r\n        if (arguments.length === 0) {\r\n            return data();\r\n        }\r\n        else {\r\n            var same = eq ? eq(current, update) : current === update;\r\n            if (!same) {\r\n                var time = RootClock.time;\r\n                if (age === time)\r\n                    throw new Error(\"conflicting values: \" + update + \" is not the same as \" + current);\r\n                age = time;\r\n                current = update;\r\n                data(update);\r\n            }\r\n            return update;\r\n        }\r\n    };\r\n};\r\nS.freeze = function freeze(fn) {\r\n    var result = undefined;\r\n    if (RunningClock !== null) {\r\n        result = fn();\r\n    }\r\n    else {\r\n        RunningClock = RootClock;\r\n        RunningClock.changes.reset();\r\n        try {\r\n            result = fn();\r\n            event();\r\n        }\r\n        finally {\r\n            RunningClock = null;\r\n        }\r\n    }\r\n    return result;\r\n};\r\nS.sample = function sample(fn) {\r\n    var result, running = RunningNode;\r\n    if (running !== null) {\r\n        RunningNode = null;\r\n        result = fn();\r\n        RunningNode = running;\r\n    }\r\n    else {\r\n        result = fn();\r\n    }\r\n    return result;\r\n};\r\nS.cleanup = function cleanup(fn) {\r\n    if (Owner !== null) {\r\n        if (Owner.cleanups === null)\r\n            Owner.cleanups = [fn];\r\n        else\r\n            Owner.cleanups.push(fn);\r\n    }\r\n    else {\r\n        console.warn(\"cleanups created without a root or parent will never be run\");\r\n    }\r\n};\r\n// experimental : exposing node constructors and some state\r\nS.makeDataNode = function makeDataNode(value) {\r\n    return new DataNode(value);\r\n};\r\nS.makeComputationNode = function makeComputationNode(fn, seed) {\r\n    return new ComputationNode(fn, seed);\r\n};\r\nS.isFrozen = function isFrozen() {\r\n    return RunningClock !== null;\r\n};\r\nS.isListening = function isListening() {\r\n    return RunningNode !== null;\r\n};\r\n// Internal implementation\r\n/// Graph classes and operations\r\nvar Clock = /** @class */ (function () {\r\n    function Clock() {\r\n        this.time = 0;\r\n        this.changes = new Queue(); // batched changes to data nodes\r\n        this.updates = new Queue(); // computations to update\r\n        this.disposes = new Queue(); // disposals to run after current batch of updates finishes\r\n    }\r\n    return Clock;\r\n}());\r\nvar RootClockProxy = {\r\n    time: function () { return RootClock.time; }\r\n};\r\nvar DataNode = /** @class */ (function () {\r\n    function DataNode(value) {\r\n        this.value = value;\r\n        this.pending = NOTPENDING;\r\n        this.log = null;\r\n    }\r\n    DataNode.prototype.current = function () {\r\n        if (RunningNode !== null) {\r\n            logDataRead(this, RunningNode);\r\n        }\r\n        return this.value;\r\n    };\r\n    DataNode.prototype.next = function (value) {\r\n        if (RunningClock !== null) {\r\n            if (this.pending !== NOTPENDING) { // value has already been set once, check for conflicts\r\n                if (value !== this.pending) {\r\n                    throw new Error(\"conflicting changes: \" + value + \" !== \" + this.pending);\r\n                }\r\n            }\r\n            else { // add to list of changes\r\n                this.pending = value;\r\n                RootClock.changes.add(this);\r\n            }\r\n        }\r\n        else { // not batching, respond to change now\r\n            if (this.log !== null) {\r\n                this.pending = value;\r\n                RootClock.changes.add(this);\r\n                event();\r\n            }\r\n            else {\r\n                this.value = value;\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    DataNode.prototype.clock = function () {\r\n        return RootClockProxy;\r\n    };\r\n    return DataNode;\r\n}());\r\nvar ComputationNode = /** @class */ (function () {\r\n    function ComputationNode(fn, value) {\r\n        this.state = CURRENT;\r\n        this.source1 = null;\r\n        this.source1slot = 0;\r\n        this.sources = null;\r\n        this.sourceslots = null;\r\n        this.log = null;\r\n        this.owned = null;\r\n        this.cleanups = null;\r\n        this.fn = fn;\r\n        this.value = value;\r\n        this.age = RootClock.time;\r\n        if (fn === null)\r\n            return;\r\n        var owner = Owner, running = RunningNode;\r\n        if (owner === null)\r\n            console.warn(\"computations created without a root or parent will never be disposed\");\r\n        Owner = RunningNode = this;\r\n        if (RunningClock === null) {\r\n            toplevelComputation(this);\r\n        }\r\n        else {\r\n            this.value = this.fn(this.value);\r\n        }\r\n        if (owner && owner !== UNOWNED) {\r\n            if (owner.owned === null)\r\n                owner.owned = [this];\r\n            else\r\n                owner.owned.push(this);\r\n        }\r\n        Owner = owner;\r\n        RunningNode = running;\r\n    }\r\n    ComputationNode.prototype.current = function () {\r\n        if (RunningNode !== null) {\r\n            if (this.age === RootClock.time) {\r\n                if (this.state === RUNNING)\r\n                    throw new Error(\"circular dependency\");\r\n                else\r\n                    updateNode(this); // checks for state === STALE internally, so don't need to check here\r\n            }\r\n            logComputationRead(this, RunningNode);\r\n        }\r\n        return this.value;\r\n    };\r\n    ComputationNode.prototype.clock = function () {\r\n        return RootClockProxy;\r\n    };\r\n    return ComputationNode;\r\n}());\r\nvar Log = /** @class */ (function () {\r\n    function Log() {\r\n        this.node1 = null;\r\n        this.node1slot = 0;\r\n        this.nodes = null;\r\n        this.nodeslots = null;\r\n    }\r\n    return Log;\r\n}());\r\nvar Queue = /** @class */ (function () {\r\n    function Queue() {\r\n        this.items = [];\r\n        this.count = 0;\r\n    }\r\n    Queue.prototype.reset = function () {\r\n        this.count = 0;\r\n    };\r\n    Queue.prototype.add = function (item) {\r\n        this.items[this.count++] = item;\r\n    };\r\n    Queue.prototype.run = function (fn) {\r\n        var items = this.items;\r\n        for (var i = 0; i < this.count; i++) {\r\n            fn(items[i]);\r\n            items[i] = null;\r\n        }\r\n        this.count = 0;\r\n    };\r\n    return Queue;\r\n}());\r\n// Constants\r\nvar NOTPENDING = {}, CURRENT = 0, STALE = 1, RUNNING = 2;\r\n// \"Globals\" used to keep track of current system state\r\nvar RootClock = new Clock(), RunningClock = null, // currently running clock \r\nRunningNode = null, // currently running computation\r\nOwner = null, // owner for new computations\r\nUNOWNED = new ComputationNode(null, null);\r\n// Functions\r\nfunction logRead(from, to) {\r\n    var fromslot, toslot = to.source1 === null ? -1 : to.sources === null ? 0 : to.sources.length;\r\n    if (from.node1 === null) {\r\n        from.node1 = to;\r\n        from.node1slot = toslot;\r\n        fromslot = -1;\r\n    }\r\n    else if (from.nodes === null) {\r\n        from.nodes = [to];\r\n        from.nodeslots = [toslot];\r\n        fromslot = 0;\r\n    }\r\n    else {\r\n        fromslot = from.nodes.length;\r\n        from.nodes.push(to);\r\n        from.nodeslots.push(toslot);\r\n    }\r\n    if (to.source1 === null) {\r\n        to.source1 = from;\r\n        to.source1slot = fromslot;\r\n    }\r\n    else if (to.sources === null) {\r\n        to.sources = [from];\r\n        to.sourceslots = [fromslot];\r\n    }\r\n    else {\r\n        to.sources.push(from);\r\n        to.sourceslots.push(fromslot);\r\n    }\r\n}\r\nfunction logDataRead(data, to) {\r\n    if (data.log === null)\r\n        data.log = new Log();\r\n    logRead(data.log, to);\r\n}\r\nfunction logComputationRead(node, to) {\r\n    if (node.log === null)\r\n        node.log = new Log();\r\n    logRead(node.log, to);\r\n}\r\nfunction event() {\r\n    // b/c we might be under a top level S.root(), have to preserve current root\r\n    var owner = Owner;\r\n    RootClock.updates.reset();\r\n    RootClock.time++;\r\n    try {\r\n        run(RootClock);\r\n    }\r\n    finally {\r\n        RunningClock = RunningNode = null;\r\n        Owner = owner;\r\n    }\r\n}\r\nfunction toplevelComputation(node) {\r\n    RunningClock = RootClock;\r\n    RootClock.changes.reset();\r\n    RootClock.updates.reset();\r\n    try {\r\n        node.value = node.fn(node.value);\r\n        if (RootClock.changes.count > 0 || RootClock.updates.count > 0) {\r\n            RootClock.time++;\r\n            run(RootClock);\r\n        }\r\n    }\r\n    finally {\r\n        RunningClock = Owner = RunningNode = null;\r\n    }\r\n}\r\nfunction run(clock) {\r\n    var running = RunningClock, count = 0;\r\n    RunningClock = clock;\r\n    clock.disposes.reset();\r\n    // for each batch ...\r\n    while (clock.changes.count !== 0 || clock.updates.count !== 0 || clock.disposes.count !== 0) {\r\n        if (count > 0) // don't tick on first run, or else we expire already scheduled updates\r\n            clock.time++;\r\n        clock.changes.run(applyDataChange);\r\n        clock.updates.run(updateNode);\r\n        clock.disposes.run(dispose);\r\n        // if there are still changes after excessive batches, assume runaway            \r\n        if (count++ > 1e5) {\r\n            throw new Error(\"Runaway clock detected\");\r\n        }\r\n    }\r\n    RunningClock = running;\r\n}\r\nfunction applyDataChange(data) {\r\n    data.value = data.pending;\r\n    data.pending = NOTPENDING;\r\n    if (data.log)\r\n        markComputationsStale(data.log);\r\n}\r\nfunction markComputationsStale(log) {\r\n    var node1 = log.node1, nodes = log.nodes;\r\n    // mark all downstream nodes stale which haven't been already\r\n    if (node1 !== null)\r\n        markNodeStale(node1);\r\n    if (nodes !== null) {\r\n        for (var i = 0, len = nodes.length; i < len; i++) {\r\n            markNodeStale(nodes[i]);\r\n        }\r\n    }\r\n}\r\nfunction markNodeStale(node) {\r\n    var time = RootClock.time;\r\n    if (node.age < time) {\r\n        node.age = time;\r\n        node.state = STALE;\r\n        RootClock.updates.add(node);\r\n        if (node.owned !== null)\r\n            markOwnedNodesForDisposal(node.owned);\r\n        if (node.log !== null)\r\n            markComputationsStale(node.log);\r\n    }\r\n}\r\nfunction markOwnedNodesForDisposal(owned) {\r\n    for (var i = 0; i < owned.length; i++) {\r\n        var child = owned[i];\r\n        child.age = RootClock.time;\r\n        child.state = CURRENT;\r\n        if (child.owned !== null)\r\n            markOwnedNodesForDisposal(child.owned);\r\n    }\r\n}\r\nfunction updateNode(node) {\r\n    if (node.state === STALE) {\r\n        var owner = Owner, running = RunningNode;\r\n        Owner = RunningNode = node;\r\n        node.state = RUNNING;\r\n        cleanup(node, false);\r\n        node.value = node.fn(node.value);\r\n        node.state = CURRENT;\r\n        Owner = owner;\r\n        RunningNode = running;\r\n    }\r\n}\r\nfunction cleanup(node, final) {\r\n    var source1 = node.source1, sources = node.sources, sourceslots = node.sourceslots, cleanups = node.cleanups, owned = node.owned, i, len;\r\n    if (cleanups !== null) {\r\n        for (i = 0; i < cleanups.length; i++) {\r\n            cleanups[i](final);\r\n        }\r\n        node.cleanups = null;\r\n    }\r\n    if (owned !== null) {\r\n        for (i = 0; i < owned.length; i++) {\r\n            dispose(owned[i]);\r\n        }\r\n        node.owned = null;\r\n    }\r\n    if (source1 !== null) {\r\n        cleanupSource(source1, node.source1slot);\r\n        node.source1 = null;\r\n    }\r\n    if (sources !== null) {\r\n        for (i = 0, len = sources.length; i < len; i++) {\r\n            cleanupSource(sources.pop(), sourceslots.pop());\r\n        }\r\n    }\r\n}\r\nfunction cleanupSource(source, slot) {\r\n    var nodes = source.nodes, nodeslots = source.nodeslots, last, lastslot;\r\n    if (slot === -1) {\r\n        source.node1 = null;\r\n    }\r\n    else {\r\n        last = nodes.pop();\r\n        lastslot = nodeslots.pop();\r\n        if (slot !== nodes.length) {\r\n            nodes[slot] = last;\r\n            nodeslots[slot] = lastslot;\r\n            if (lastslot === -1) {\r\n                last.source1slot = slot;\r\n            }\r\n            else {\r\n                last.sourceslots[lastslot] = slot;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction dispose(node) {\r\n    node.fn = null;\r\n    node.log = null;\r\n    cleanup(node, true);\r\n}\r\n","export { insert } from './insert';\nexport { content } from './content';\nexport * from './dom';\nexport { spread, assign } from './spread';\nexport { default as S } from 's-js';\n","import { SDataArray } from 's-array';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { AlertsCtrl } from './alerts-ctrl';\nimport { Alert } from './alerts-model';\n\nexport interface AlertsProperties {\n  readonly alerts: SDataArray<Alert>;\n  readonly ctrl: AlertsCtrl;\n}\n\n/**\n * Creates a new HTML element that will contain all alerts that are to be shown to the user.\n */\nexport function AlertsView({alerts, ctrl}: AlertsProperties): HTMLElement {\n  return (\n      <div class=\"alert-wrapper\" aria-live=\"polite\" aria-atomic=\"true\">\n        {alerts.mapSample((alert) =>\n            <div class=\"toast fade show\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n              <div class=\"toast-header\">\n                <strong class=\"mr-auto\">{alert.title}</strong>\n                <button type=\"button\" class=\"ml-2 mb-1 close\" aria-label=\"Close\" onClick={() => ctrl.remove(alert)}>\n                  <span aria-hidden=\"true\">&times;</span>\n                </button>\n              </div>\n              <div class=\"toast-body\">{alert.message}</div>\n            </div>\n        )}\n      </div>\n  );\n}\n","import S, { DataSignal } from 's-js';\n\n/**\n * Counter of data signals that carry `true`.\n *\n * This class implements a counter that is updated in runtime O(1) whenever a signal changes.\n */\nexport class Counter {\n  private readonly signalToDisposeFnMap_: Map<() => boolean, () => void> = new Map();\n  private readonly countChangedSignal_: DataSignal<null> = S.data(null);\n  private numTrueSignals_: number = 0;\n\n  /**\n   * Constructor.\n   *\n   * @param count Signal that will be carry the number of `true` signals observed by this counter.\n   */\n  public constructor(\n      count: DataSignal<number>\n  ) {\n    // 'seed' is undefined (the calculation does not keep a state), and 'onchanges' is false (do the initial run).\n    S.on(this.countChangedSignal_, () => count(this.numTrueSignals_), undefined, false);\n  }\n\n  /**\n   * Adds a signal to the counter.\n   *\n   * @throws Error if the given signal has been added before\n   */\n  public add(signal: () => boolean): void {\n    if (this.signalToDisposeFnMap_.has(signal)) {\n      throw new Error('Counter.add() called more than once for same signal.');\n    }\n    this.signalToDisposeFnMap_.set(signal, S.root((disposeFn) => {\n      let didAddToCounter: boolean = false;\n      // 'seed' is undefined (the calculation does not keep a state), and 'onchanges' is false (do the initial run).\n      S.on(signal, () => {\n        const isCurrentlyTrue: boolean = S.sample(signal);\n        if (isCurrentlyTrue && !didAddToCounter) {\n          ++this.numTrueSignals_;\n          this.countChangedSignal_(null);\n        } else if (!isCurrentlyTrue && didAddToCounter) {\n          --this.numTrueSignals_;\n          this.countChangedSignal_(null);\n        }\n        didAddToCounter = isCurrentlyTrue;\n      }, undefined, false);\n      return disposeFn;\n    }));\n  }\n\n  /**\n   * Removes a signal from the counter.\n   *\n   * @throws Error if the given signal has not previously beend added with {@link add}()\n   */\n  public delete(signal: () => boolean): void {\n    const disposeFn = this.signalToDisposeFnMap_.get(signal);\n    if (disposeFn === undefined) {\n      throw new Error('Counter.delete() called without a corresponding prior add() call.');\n    }\n    if (S.sample(signal)) {\n      --this.numTrueSignals_;\n      this.countChangedSignal_(null);\n    }\n    disposeFn();\n    this.signalToDisposeFnMap_.delete(signal);\n  }\n}\n","/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window === \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\toldIndex,\n\t\tnewIndex,\n\t\toldDraggableIndex,\n\t\tnewDraggableIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScrolls = [],\n\t\tscrolling = false,\n\n\t\tawaitingDragStarted = false,\n\t\tignoreNextClick = false,\n\t\tsortables = [],\n\n\t\tpointerElemChangedInterval,\n\t\tlastPointerElemX,\n\t\tlastPointerElemY,\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\n\t\tlastTarget,\n\t\tlastDirection,\n\t\tpastFirstInvertThresh = false,\n\t\tisCircumstantialInvert = false,\n\t\tlastMode, // 'swap' or 'insert'\n\n\t\ttargetMoveDistance,\n\n\t\t// For positioning ghost absolutely\n\t\tghostRelativeParent,\n\t\tghostRelativeParentInitialScroll = [], // (left, top)\n\n\t\trealDragElRect, // dragEl rect after current animation\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\t\tsetTimeout = win.setTimeout,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = {\n\t\t\tcapture: false,\n\t\t\tpassive: false\n\t\t},\n\n\t\tIE11OrLess = !!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\\.|msie|iemobile)/i),\n\t\tEdge = !!navigator.userAgent.match(/Edge/i),\n\t\tFireFox = !!navigator.userAgent.match(/firefox/i),\n\t\tSafari = !!(navigator.userAgent.match(/safari/i) && !navigator.userAgent.match(/chrome/i) && !navigator.userAgent.match(/android/i)),\n\t\tIOS = !!(navigator.userAgent.match(/iP(ad|od|hone)/i)),\n\n\t\tPositionGhostAbsolutely = IOS,\n\n\t\tCSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n\n\t\t// This will not pass for IE9, because IE9 DnD only works on anchors\n\t\tsupportDraggable = ('draggable' in document.createElement('div')),\n\n\t\tsupportCssPointerEvents = (function() {\n\t\t\t// false when <= IE11\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar el = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\t\t_alignedSilent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\t\tmax = Math.max,\n\n\t\tsavedInputChecked = [],\n\n\t\t_detectDirection = function(el, options) {\n\t\t\tvar elCSS = _css(el),\n\t\t\t\telWidth = parseInt(elCSS.width)\n\t\t\t\t\t- parseInt(elCSS.paddingLeft)\n\t\t\t\t\t- parseInt(elCSS.paddingRight)\n\t\t\t\t\t- parseInt(elCSS.borderLeftWidth)\n\t\t\t\t\t- parseInt(elCSS.borderRightWidth),\n\t\t\t\tchild1 = _getChild(el, 0, options),\n\t\t\t\tchild2 = _getChild(el, 1, options),\n\t\t\t\tfirstChildCSS = child1 && _css(child1),\n\t\t\t\tsecondChildCSS = child2 && _css(child2),\n\t\t\t\tfirstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + _getRect(child1).width,\n\t\t\t\tsecondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + _getRect(child2).width;\n\n\t\t\tif (elCSS.display === 'flex') {\n\t\t\t\treturn elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse'\n\t\t\t\t? 'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\tif (elCSS.display === 'grid') {\n\t\t\t\treturn elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\tif (child1 && firstChildCSS.float !== 'none') {\n\t\t\t\tvar touchingSideChild2 = firstChildCSS.float === 'left' ? 'left' : 'right';\n\n\t\t\t\treturn child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ?\n\t\t\t\t\t'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\treturn (child1 &&\n\t\t\t\t(\n\t\t\t\t\tfirstChildCSS.display === 'block' ||\n\t\t\t\t\tfirstChildCSS.display === 'flex' ||\n\t\t\t\t\tfirstChildCSS.display === 'table' ||\n\t\t\t\t\tfirstChildCSS.display === 'grid' ||\n\t\t\t\t\tfirstChildWidth >= elWidth &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' ||\n\t\t\t\t\tchild2 &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' &&\n\t\t\t\t\tfirstChildWidth + secondChildWidth > elWidth\n\t\t\t\t) ?\n\t\t\t\t'vertical' : 'horizontal'\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n\t\t * @param  {Number} x      X position\n\t\t * @param  {Number} y      Y position\n\t\t * @return {HTMLElement}   Element of the first found nearest Sortable\n\t\t */\n\t\t_detectNearestEmptySortable = function(x, y) {\n\t\t\tfor (var i = 0; i < sortables.length; i++) {\n\t\t\t\tif (_lastChild(sortables[i])) continue;\n\n\t\t\t\tvar rect = _getRect(sortables[i]),\n\t\t\t\t\tthreshold = sortables[i][expando].options.emptyInsertThreshold,\n\t\t\t\t\tinsideHorizontally = x >= (rect.left - threshold) && x <= (rect.right + threshold),\n\t\t\t\t\tinsideVertically = y >= (rect.top - threshold) && y <= (rect.bottom + threshold);\n\n\t\t\t\tif (threshold && insideHorizontally && insideVertically) {\n\t\t\t\t\treturn sortables[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_isClientInRowColumn = function(x, y, el, axis, options) {\n\t\t\tvar targetRect = _getRect(el),\n\t\t\t\ttargetS1Opp = axis === 'vertical' ? targetRect.left : targetRect.top,\n\t\t\t\ttargetS2Opp = axis === 'vertical' ? targetRect.right : targetRect.bottom,\n\t\t\t\tmouseOnOppAxis = axis === 'vertical' ? x : y;\n\n\t\t\treturn targetS1Opp < mouseOnOppAxis && mouseOnOppAxis < targetS2Opp;\n\t\t},\n\n\t\t_isElInRowColumn = function(el1, el2, axis) {\n\t\t\tvar el1Rect = el1 === dragEl && realDragElRect || _getRect(el1),\n\t\t\t\tel2Rect = el2 === dragEl && realDragElRect || _getRect(el2),\n\t\t\t\tel1S1Opp = axis === 'vertical' ? el1Rect.left : el1Rect.top,\n\t\t\t\tel1S2Opp = axis === 'vertical' ? el1Rect.right : el1Rect.bottom,\n\t\t\t\tel1OppLength = axis === 'vertical' ? el1Rect.width : el1Rect.height,\n\t\t\t\tel2S1Opp = axis === 'vertical' ? el2Rect.left : el2Rect.top,\n\t\t\t\tel2S2Opp = axis === 'vertical' ? el2Rect.right : el2Rect.bottom,\n\t\t\t\tel2OppLength = axis === 'vertical' ? el2Rect.width : el2Rect.height;\n\n\t\t\treturn (\n\t\t\t\tel1S1Opp === el2S1Opp ||\n\t\t\t\tel1S2Opp === el2S2Opp ||\n\t\t\t\t(el1S1Opp + el1OppLength / 2) === (el2S1Opp + el2OppLength / 2)\n\t\t\t);\n\t\t},\n\n\t\t_getParentAutoScrollElement = function(el, includeSelf) {\n\t\t\t// skip to window\n\t\t\tif (!el || !el.getBoundingClientRect) return _getWindowScrollingElement();\n\n\t\t\tvar elem = el;\n\t\t\tvar gotSelf = false;\n\t\t\tdo {\n\t\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\t\t\tvar elemCSS = _css(elem);\n\t\t\t\t\tif (\n\t\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return _getWindowScrollingElement();\n\n\t\t\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\t\t\tgotSelf = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t\t} while (elem = elem.parentNode);\n\n\t\t\treturn _getWindowScrollingElement();\n\t\t},\n\n\t\t_getWindowScrollingElement = function() {\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn document.documentElement;\n\t\t\t} else {\n\t\t\t\treturn document.scrollingElement;\n\t\t\t}\n\t\t},\n\n\t\t_scrollBy = function(el, x, y) {\n\t\t\tel.scrollLeft += x;\n\t\t\tel.scrollTop += y;\n\t\t},\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (options.scroll) {\n\t\t\t\tvar _this = rootEl ? rootEl[expando] : window,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinScroller = _getWindowScrollingElement(),\n\n\t\t\t\t\tscrollThisInstance = false;\n\n\t\t\t\t// Detect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\t_clearAutoScrolls();\n\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\n\t\t\t\t\t\tscrollParentEl = scrollEl;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tvar layersOut = 0;\n\t\t\t\tvar currentParent = scrollEl;\n\t\t\t\tdo {\n\t\t\t\t\tvar\tel = currentParent,\n\t\t\t\t\t\trect = _getRect(el),\n\n\t\t\t\t\t\ttop = rect.top,\n\t\t\t\t\t\tbottom = rect.bottom,\n\t\t\t\t\t\tleft = rect.left,\n\t\t\t\t\t\tright = rect.right,\n\n\t\t\t\t\t\twidth = rect.width,\n\t\t\t\t\t\theight = rect.height,\n\n\t\t\t\t\t\tscrollWidth,\n\t\t\t\t\t\tscrollHeight,\n\n\t\t\t\t\t\tcss,\n\n\t\t\t\t\t\tvx,\n\t\t\t\t\t\tvy,\n\n\t\t\t\t\t\tcanScrollX,\n\t\t\t\t\t\tcanScrollY,\n\n\t\t\t\t\t\tscrollPosX,\n\t\t\t\t\t\tscrollPosY;\n\n\n\t\t\t\t\tscrollWidth = el.scrollWidth;\n\t\t\t\t\tscrollHeight = el.scrollHeight;\n\n\t\t\t\t\tcss = _css(el);\n\n\t\t\t\t\tscrollPosX = el.scrollLeft;\n\t\t\t\t\tscrollPosY = el.scrollTop;\n\n\t\t\t\t\tif (el === winScroller) {\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\n\t\t\t\t\t}\n\n\t\t\t\t\tvx = canScrollX && (abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (abs(left - x) <= sens && !!scrollPosX);\n\n\t\t\t\t\tvy = canScrollY && (abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (abs(top - y) <= sens && !!scrollPosY);\n\n\n\t\t\t\t\tif (!autoScrolls[layersOut]) {\n\t\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\n\t\t\t\t\t\t\tif (!autoScrolls[i]) {\n\t\t\t\t\t\t\t\tautoScrolls[i] = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n\t\t\t\t\t\tautoScrolls[layersOut].el = el;\n\t\t\t\t\t\tautoScrolls[layersOut].vx = vx;\n\t\t\t\t\t\tautoScrolls[layersOut].vy = vy;\n\n\t\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\n\n\t\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\n\t\t\t\t\t\t\tscrollThisInstance = true;\n\t\t\t\t\t\t\t/* jshint loopfunc:true */\n\t\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\n\t\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n\t\t\t\t\t\t\t\tif (isFallback && this.layer === 0) {\n\t\t\t\t\t\t\t\t\tSortable.active._emulateDragOver(true);\n\t\t\t\t\t\t\t\t\tSortable.active._onTouchMove(touchEvt, true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n\t\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n\t\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n\t\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlayersOut++;\n\t\t\t\t} while (options.bubbleScroll && currentParent !== winScroller && (currentParent = _getParentAutoScrollElement(currentParent, false)));\n\t\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n\t\t\t}\n\t\t}, 30),\n\n\t\t_clearAutoScrolls = function () {\n\t\t\tautoScrolls.forEach(function(autoScroll) {\n\t\t\t\tclearInterval(autoScroll.pid);\n\t\t\t});\n\t\t\tautoScrolls = [];\n\t\t},\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\treturn function(to, from, dragEl, evt) {\n\t\t\t\t\tvar sameGroup = to.options.group.name &&\n\t\t\t\t\t\t\t\t\tfrom.options.group.name &&\n\t\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\n\n\t\t\t\t\tif (value == null && (pull || sameGroup)) {\n\t\t\t\t\t\t// Default pull value\n\t\t\t\t\t\t// Default pull and put value if same group\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (pull && value === 'clone') {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t} else if (typeof value === 'function') {\n\t\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar otherGroup = (pull ? to : from).options.group.name;\n\n\t\t\t\t\t\treturn (value === true ||\n\t\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\n\t\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t},\n\n\t\t_checkAlignment = function(evt) {\n\t\t\tif (!dragEl || !dragEl.parentNode) return;\n\t\t\tdragEl.parentNode[expando] && dragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t},\n\n\t\t_hideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t}\n\t\t},\n\n\t\t_unhideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t}\n\t\t};\n\n\n\t// #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\tdocument.addEventListener('click', function(evt) {\n\t\tif (ignoreNextClick) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation && evt.stopPropagation();\n\t\t\tevt.stopImmediatePropagation && evt.stopImmediatePropagation();\n\t\t\tignoreNextClick = false;\n\t\t\treturn false;\n\t\t}\n\t}, true);\n\n\tvar nearestEmptyInsertDetectEvent = function(evt) {\n\t\tif (dragEl) {\n\t\t\tevt = evt.touches ? evt.touches[0] : evt;\n\t\t\tvar nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n\t\t\tif (nearest) {\n\t\t\t\t// Create imitation event\n\t\t\t\tvar event = {};\n\t\t\t\tfor (var i in evt) {\n\t\t\t\t\tevent[i] = evt[i];\n\t\t\t\t}\n\t\t\t\tevent.target = event.rootEl = nearest;\n\t\t\t\tevent.preventDefault = void 0;\n\t\t\t\tevent.stopPropagation = void 0;\n\t\t\t\tnearest[expando]._onDragOver(event);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: null,\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tbubbleScroll: true,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? '>li' : '>*',\n\t\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\n\t\t\tinvertSwap: false, // invert always\n\t\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\n\t\t\tremoveCloneOnHide: true,\n\t\t\tdirection: function() {\n\t\t\t\treturn _detectDirection(el, this.options);\n\t\t\t},\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\teasing: null,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\tdelayOnTouchOnly: false,\n\t\t\ttouchStartThreshold: parseInt(window.devicePixelRatio, 10) || 1,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0},\n\t\t\tsupportPointer: Sortable.supportPointer !== false && ('PointerEvent' in window),\n\t\t\temptyInsertThreshold: 5\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\tif (this.nativeDraggable) {\n\t\t\t// Touch start threshold cannot be greater than the native dragstart threshold\n\t\t\tthis.options.touchStartThreshold = 1;\n\t\t}\n\n\t\t// Bind events\n\t\tif (options.supportPointer) {\n\t\t\t_on(el, 'pointerdown', this._onTapStart);\n\t\t} else {\n\t\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t}\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\tsortables.push(this.el);\n\n\t\t// Restore sorting\n\t\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\n\t}\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_computeIsAligned: function(evt) {\n\t\t\tvar target;\n\n\t\t\tif (ghostEl && !supportCssPointerEvents) {\n\t\t\t\t_hideGhostForTarget();\n\t\t\t\ttarget = document.elementFromPoint(evt.clientX, evt.clientY);\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t} else {\n\t\t\t\ttarget = evt.target;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, this.options.draggable, this.el, false);\n\t\t\tif (_alignedSilent) return;\n\t\t\tif (!dragEl || dragEl.parentNode !== this.el) return;\n\n\t\t\tvar children = this.el.children;\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t// Don't change for target in case it is changed to aligned before onDragOver is fired\n\t\t\t\tif (_closest(children[i], this.options.draggable, this.el, false) && children[i] !== target) {\n\t\t\t\t\tchildren[i].sortableMouseAligned = _isClientInRowColumn(evt.clientX, evt.clientY, children[i], this._getDirection(evt, null), this.options);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Used for nulling last target when not in element, nothing to do with checking if aligned\n\t\t\tif (!_closest(target, this.options.draggable, this.el, true)) {\n\t\t\t\tlastTarget = null;\n\t\t\t}\n\n\t\t\t_alignedSilent = true;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_alignedSilent = false;\n\t\t\t}, 30);\n\n\t\t},\n\n\t\t_getDirection: function(evt, target) {\n\t\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n\t\t},\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tif (!evt.cancelable) return;\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && ((evt.path && evt.path[0]) || (evt.composedPath && evt.composedPath()[0])) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex,\n\t\t\t\tstartDraggableIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button and enabled\n\t\t\t}\n\n\t\t\t// cancel dnd if original target is content editable\n\t\t\tif (originalTarget.isContentEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el, false);\n\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target);\n\t\t\tstartDraggableIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, el, startIndex, undefined, startDraggableIndex);\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el, false);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, el, startIndex, undefined, startDraggableIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el, false)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex, startDraggableIndex);\n\t\t},\n\n\n\t\t_handleAutoScroll: function(evt, fallback) {\n\t\t\tif (!dragEl || !this.options.scroll) return;\n\t\t\tvar x = evt.clientX,\n\t\t\t\ty = evt.clientY,\n\n\t\t\t\telem = document.elementFromPoint(x, y),\n\t\t\t\t_this = this;\n\n\t\t\t// IE does not seem to have native autoscroll,\n\t\t\t// Edge's autoscroll seems too conditional,\n\t\t\t// MACOS Safari does not have autoscroll,\n\t\t\t// Firefox and Chrome are good\n\t\t\tif (fallback || Edge || IE11OrLess || Safari) {\n\t\t\t\t_autoScroll(evt, _this.options, elem, fallback);\n\n\t\t\t\t// Listener for pointer element change\n\t\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\n\t\t\t\tif (\n\t\t\t\t\tscrolling &&\n\t\t\t\t\t(\n\t\t\t\t\t\t!pointerElemChangedInterval ||\n\t\t\t\t\t\tx !== lastPointerElemX ||\n\t\t\t\t\t\ty !== lastPointerElemY\n\t\t\t\t\t)\n\t\t\t\t) {\n\n\t\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\n\t\t\t\t\tpointerElemChangedInterval = setInterval(function() {\n\t\t\t\t\t\tif (!dragEl) return;\n\t\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\n\t\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\t\t\t\t\t\tif (newElem !== ogElemScroller) {\n\t\t\t\t\t\t\togElemScroller = newElem;\n\t\t\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\t\t\t_autoScroll(evt, _this.options, ogElemScroller, fallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t\tlastPointerElemX = x;\n\t\t\t\t\tlastPointerElemY = y;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n\t\t\t\tif (!_this.options.bubbleScroll || _getParentAutoScrollElement(elem, true) === _getWindowScrollingElement()) {\n\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_autoScroll(evt, _this.options, _getParentAutoScrollElement(elem, false), false);\n\t\t\t}\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex, /** Number */startDraggableIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\t\t\t\toldDraggableIndex = startDraggableIndex;\n\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: (touch || evt).clientX,\n\t\t\t\t\tclientY: (touch || evt).clientY\n\t\t\t\t};\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'all';\n\t\t\t\t// undo animation if needed\n\t\t\t\tdragEl.style.transition = '';\n\t\t\t\tdragEl.style.transform = '';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDragEvents();\n\n\t\t\t\t\tif (!FireFox && _this.nativeDraggable) {\n\t\t\t\t\t\tdragEl.draggable = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, rootEl, oldIndex, undefined, oldDraggableIndex);\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\t_on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n\t\t\t\t_on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n\t\t\t\t_on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n\n\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\n\t\t\t\t// Make dragEl draggable (must be before delay for FireFox)\n\t\t\t\tif (FireFox && this.nativeDraggable) {\n\t\t\t\t\tthis.options.touchStartThreshold = 4;\n\t\t\t\t\tdragEl.draggable = true;\n\t\t\t\t}\n\n\t\t\t\t// Delay is impossible for native DnD in Edge or IE\n\t\t\t\tif (options.delay && (options.delayOnTouchOnly ? touch : true) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_delayedDragTouchMoveHandler: function (/** TouchEvent|PointerEvent **/e) {\n\t\t\tvar touch = e.touches ? e.touches[0] : e;\n\t\t\tif (max(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY))\n\t\t\t\t\t>= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))\n\t\t\t) {\n\t\t\t\tthis._disableDelayedDrag();\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tdragEl && _disableDraggable(dragEl);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\tthis._disableDelayedDragEvents();\n\t\t},\n\n\t\t_disableDelayedDragEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (!this.nativeDraggable || touch) {\n\t\t\t\tif (this.options.supportPointer) {\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t} else if (touch) {\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t} else {\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\t_nextTick(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function (fallback, evt) {\n\t\t\tawaitingDragStarted = false;\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t_on(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t\t_on(document, 'dragover', _checkAlignment);\n\t\t\t\t}\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, false);\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\n\t\t\t\t// In case dragging an animated element\n\t\t\t\t_css(dragEl, 'transform', '');\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\tfallback && this._appendGhost();\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, rootEl, oldIndex, undefined, oldDraggableIndex, undefined, evt);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function (forAutoScroll) {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY && !forAutoScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\t_hideGhostForTarget();\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\tvar parent = target;\n\n\t\t\t\twhile (target && target.shadowRoot) {\n\t\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\t\tif (target === parent) break;\n\t\t\t\t\tparent = target;\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\tvar inserted;\n\n\t\t\t\t\t\t\tinserted = parent[expando]._onDragOver({\n\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (inserted && !this.options.dragoverBubble) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(touchEvt);\n\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt, forAutoScroll) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tmatrix = ghostEl && _matrix(ghostEl),\n\t\t\t\t\tscaleX = ghostEl && matrix && matrix.a,\n\t\t\t\t\tscaleY = ghostEl && matrix && matrix.d,\n\t\t\t\t\trelativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && _getRelativeScrollOffset(ghostRelativeParent),\n\t\t\t\t\tdx = ((touch.clientX - tapEvt.clientX)\n\t\t\t\t\t\t\t+ fallbackOffset.x) / (scaleX || 1)\n\t\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0]) : 0) / (scaleX || 1),\n\t\t\t\t\tdy = ((touch.clientY - tapEvt.clientY)\n\t\t\t\t\t\t\t+ fallbackOffset.y) / (scaleY || 1)\n\t\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1]) : 0) / (scaleY || 1),\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active && !awaitingDragStarted) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDragStart(evt, true);\n\t\t\t\t}\n\n\t\t\t\t!forAutoScroll && this._handleAutoScroll(touch, true);\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\t// Bug if using scale(): https://stackoverflow.com/questions/2637058\n\t\t\t// Not being adjusted for\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar container = this.options.fallbackOnBody ? document.body : rootEl,\n\t\t\t\t\trect = _getRect(dragEl, true, container, !PositionGhostAbsolutely),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options;\n\n\t\t\t\t// Position absolutely\n\t\t\t\tif (PositionGhostAbsolutely) {\n\t\t\t\t\t// Get relatively positioned parent\n\t\t\t\t\tghostRelativeParent = container;\n\n\t\t\t\t\twhile (\n\t\t\t\t\t\t_css(ghostRelativeParent, 'position') === 'static' &&\n\t\t\t\t\t\t_css(ghostRelativeParent, 'transform') === 'none' &&\n\t\t\t\t\t\tghostRelativeParent !== document\n\t\t\t\t\t) {\n\t\t\t\t\t\tghostRelativeParent = ghostRelativeParent.parentNode;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ghostRelativeParent !== document) {\n\t\t\t\t\t\tvar ghostRelativeParentRect = _getRect(ghostRelativeParent, true);\n\n\t\t\t\t\t\trect.top -= ghostRelativeParentRect.top;\n\t\t\t\t\t\trect.left -= ghostRelativeParentRect.left;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n\t\t\t\t\t\tif (ghostRelativeParent === document) ghostRelativeParent = _getWindowScrollingElement();\n\n\t\t\t\t\t\trect.top += ghostRelativeParent.scrollTop;\n\t\t\t\t\t\trect.left += ghostRelativeParent.scrollLeft;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tghostRelativeParent = _getWindowScrollingElement();\n\t\t\t\t\t}\n\t\t\t\t\tghostRelativeParentInitialScroll = _getRelativeScrollOffset(ghostRelativeParent);\n\t\t\t\t}\n\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'box-sizing', 'border-box');\n\t\t\t\t_css(ghostEl, 'margin', 0);\n\t\t\t\t_css(ghostEl, 'top', rect.top);\n\t\t\t\t_css(ghostEl, 'left', rect.left);\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', (PositionGhostAbsolutely ? 'absolute' : 'fixed'));\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\tcontainer.appendChild(ghostEl);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/fallback) {\n\t\t\tvar _this = this;\n\t\t\tvar dataTransfer = evt.dataTransfer;\n\t\t\tvar options = _this.options;\n\n\t\t\t// Setup clone\n\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\tcloneEl.draggable = false;\n\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\tthis._hideClone();\n\n\t\t\t_toggleClass(cloneEl, _this.options.chosenClass, false);\n\n\n\t\t\t// #1143: IFrame support workaround\n\t\t\t_this._cloneId = _nextTick(function () {\n\t\t\t\tif (!_this.options.removeCloneOnHide) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t}\n\t\t\t\t_dispatchEvent(_this, rootEl, 'clone', dragEl);\n\t\t\t});\n\n\n\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, true);\n\n\t\t\t// Set proper drop events\n\t\t\tif (fallback) {\n\t\t\t\tignoreNextClick = true;\n\t\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\n\t\t\t} else {\n\t\t\t\t// Undo what was set in _prepareDragStart before drag started\n\t\t\t\t_off(document, 'mouseup', _this._onDrop);\n\t\t\t\t_off(document, 'touchend', _this._onDrop);\n\t\t\t\t_off(document, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', _this);\n\n\t\t\t\t// #1276 fix:\n\t\t\t\t_css(dragEl, 'transform', 'translateZ(0)');\n\t\t\t}\n\n\t\t\tawaitingDragStarted = true;\n\n\t\t\t_this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n\t\t\t_on(document, 'selectstart', _this);\n\t\t\tif (Safari) {\n\t\t\t\t_css(document.body, 'user-select', 'none');\n\t\t\t}\n\t\t},\n\n\n\t\t// Returns true - if no further action is needed (either inserted or another condition)\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget = evt.target,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort,\n\t\t\t\t_this = this;\n\n\t\t\tif (_silent) return;\n\n\t\t\t// Return invocation when dragEl is inserted (or completed)\n\t\t\tfunction completed(insertion) {\n\t\t\t\tif (insertion) {\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(_this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (activeSortable) {\n\t\t\t\t\t\t// Set ghost class to new sortable's ghost class\n\t\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n\t\t\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (putSortable !== _this && _this !== Sortable.active) {\n\t\t\t\t\t\tputSortable = _this;\n\t\t\t\t\t} else if (_this === Sortable.active) {\n\t\t\t\t\t\tputSortable = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Animation\n\t\t\t\t\tdragRect && _this._animate(dragRect, dragEl);\n\t\t\t\t\ttarget && targetRect && _this._animate(targetRect, target);\n\t\t\t\t}\n\n\n\t\t\t\t// Null lastTarget if it is not inside a previously swapped element\n\t\t\t\tif ((target === dragEl && !dragEl.animated) || (target === el && !target.animated)) {\n\t\t\t\t\tlastTarget = null;\n\t\t\t\t}\n\n\t\t\t\t// no bubbling and not fallback\n\t\t\t\tif (!options.dragoverBubble && !evt.rootEl && target !== document) {\n\t\t\t\t\t_this._handleAutoScroll(evt);\n\t\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(evt);\n\n\t\t\t\t\t// Do not detect for empty insert if already inserted\n\t\t\t\t\t!insertion && nearestEmptyInsertDetectEvent(evt);\n\t\t\t\t}\n\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Call when dragEl has been inserted\n\t\t\tfunction changed() {\n\t\t\t\t_dispatchEvent(_this, rootEl, 'change', target, el, rootEl, oldIndex, _index(dragEl), oldDraggableIndex, _index(dragEl, options.draggable), evt);\n\t\t\t}\n\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\n\n\t\t\tmoved = true;\n\n\t\t\ttarget = _closest(target, options.draggable, el, true);\n\n\t\t\t// target is dragEl or target is animated\n\t\t\tif (dragEl.contains(evt.target) || target.animated) {\n\t\t\t\treturn completed(false);\n\t\t\t}\n\n\t\t\tif (target !== dragEl) {\n\t\t\t\tignoreNextClick = false;\n\t\t\t}\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tvar axis = this._getDirection(evt, target);\n\n\t\t\t\tdragRect = _getRect(dragEl);\n\n\t\t\t\tif (revert) {\n\t\t\t\t\tthis._hideClone();\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, nextEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn completed(true);\n\t\t\t\t}\n\n\t\t\t\tvar elLastChild = _lastChild(el);\n\n\t\t\t\tif (!elLastChild || _ghostIsLast(evt, axis, el) && !elLastChild.animated) {\n\t\t\t\t\t// assign target only if condition is true\n\t\t\t\t\tif (elLastChild && el === evt.target) {\n\t\t\t\t\t\ttarget = elLastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\ttargetRect = _getRect(target);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\trealDragElRect = null;\n\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\treturn completed(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && target !== dragEl && target.parentNode === el) {\n\t\t\t\t\tvar direction = 0,\n\t\t\t\t\t\ttargetBeforeFirstSwap,\n\t\t\t\t\t\taligned = target.sortableMouseAligned,\n\t\t\t\t\t\tdifferentLevel = dragEl.parentNode !== el,\n\t\t\t\t\t\tside1 = axis === 'vertical' ? 'top' : 'left',\n\t\t\t\t\t\tscrolledPastTop = _isScrolledPast(target, 'top') || _isScrolledPast(dragEl, 'top'),\n\t\t\t\t\t\tscrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n\n\t\t\t\t\tif (lastTarget !== target) {\n\t\t\t\t\t\tlastMode = null;\n\t\t\t\t\t\ttargetBeforeFirstSwap = _getRect(target)[side1];\n\t\t\t\t\t\tpastFirstInvertThresh = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reference: https://www.lucidchart.com/documents/view/10fa0e93-e362-4126-aca2-b709ee56bd8b/0\n\t\t\t\t\tif (\n\t\t\t\t\t\t_isElInRowColumn(dragEl, target, axis) && aligned ||\n\t\t\t\t\t\tdifferentLevel ||\n\t\t\t\t\t\tscrolledPastTop ||\n\t\t\t\t\t\toptions.invertSwap ||\n\t\t\t\t\t\tlastMode === 'insert' ||\n\t\t\t\t\t\t// Needed, in the case that we are inside target and inserted because not aligned... aligned will stay false while inside\n\t\t\t\t\t\t// and lastMode will change to 'insert', but we must swap\n\t\t\t\t\t\tlastMode === 'swap'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// New target that we will be inside\n\t\t\t\t\t\tif (lastMode !== 'swap') {\n\t\t\t\t\t\t\tisCircumstantialInvert = options.invertSwap || differentLevel;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdirection = _getSwapDirection(evt, target, axis,\n\t\t\t\t\t\t\toptions.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold,\n\t\t\t\t\t\t\tisCircumstantialInvert,\n\t\t\t\t\t\t\tlastTarget === target);\n\t\t\t\t\t\tlastMode = 'swap';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Insert at position\n\t\t\t\t\t\tdirection = _getInsertDirection(target);\n\t\t\t\t\t\tlastMode = 'insert';\n\t\t\t\t\t}\n\t\t\t\t\tif (direction === 0) return completed(false);\n\n\t\t\t\t\trealDragElRect = null;\n\t\t\t\t\tlastTarget = target;\n\n\t\t\t\t\tlastDirection = direction;\n\n\t\t\t\t\ttargetRect = _getRect(target);\n\n\t\t\t\t\tvar nextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false;\n\n\t\t\t\t\tafter = direction === 1;\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Undo chrome's scroll adjustment\n\t\t\t\t\t\tif (scrolledPastTop) {\n\t\t\t\t\t\t\t_scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\t// must be done before animation\n\t\t\t\t\t\tif (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n\t\t\t\t\t\t\ttargetMoveDistance = abs(targetBeforeFirstSwap - _getRect(target)[side1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchanged();\n\n\t\t\t\t\t\treturn completed(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (el.contains(dragEl)) {\n\t\t\t\t\treturn completed(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = _getRect(target);\n\n\t\t\t\tif (target === dragEl) {\n\t\t\t\t\trealDragElRect = currentRect;\n\t\t\t\t}\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = _getRect(prevRect);\n\t\t\t\t}\n\n\t\t\t\t// Check if actually moving position\n\t\t\t\tif ((prevRect.left + prevRect.width / 2) !== (currentRect.left + currentRect.width / 2)\n\t\t\t\t\t|| (prevRect.top + prevRect.height / 2) !== (currentRect.top + currentRect.height / 2)\n\t\t\t\t) {\n\t\t\t\t\tvar matrix = _matrix(this.el),\n\t\t\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t\t+ (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + 'px,'\n\t\t\t\t\t\t+ (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + 'px,0)'\n\t\t\t\t\t);\n\n\t\t\t\t\tthis._repaint(target);\n\t\t\t\t\t_css(target, 'transition', 'transform ' + ms + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n\t\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\t\t\t\t}\n\n\t\t\t\t(typeof target.animated === 'number') && clearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_repaint: function(target) {\n\t\t\treturn target.offsetWidth;\n\t\t},\n\n\t\t_offMoveEvents: function() {\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(document, 'dragover', nearestEmptyInsertDetectEvent);\n\t\t\t_off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n\t\t\t_off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(document, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\t\t\tawaitingDragStarted = false;\n\t\t\tscrolling = false;\n\t\t\tisCircumstantialInvert = false;\n\t\t\tpastFirstInvertThresh = false;\n\n\t\t\tclearInterval(this._loopId);\n\n\t\t\tclearInterval(pointerElemChangedInterval);\n\t\t\t_clearAutoScrolls();\n\t\t\t_cancelThrottle();\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t_cancelNextTick(this._cloneId);\n\t\t\t_cancelNextTick(this._dragStartId);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t\t_off(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t_off(document, 'dragover', _checkAlignment);\n\t\t\t}\n\n\t\t\tif (Safari) {\n\t\t\t\t_css(document.body, 'user-select', '');\n\t\t\t}\n\n\t\t\tthis._offMoveEvents();\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || (putSortable && putSortable.lastPutMode !== 'clone')) {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, parentEl, rootEl, oldIndex, null, oldDraggableIndex, null, evt);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl);\n\t\t\t\t\t\tnewDraggableIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, parentEl, rootEl, oldIndex, newIndex, oldDraggableIndex, newDraggableIndex, evt);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, parentEl, rootEl, oldIndex, newIndex, oldDraggableIndex, newDraggableIndex, evt);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, oldDraggableIndex, newDraggableIndex, evt);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, oldDraggableIndex, newDraggableIndex, evt);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tputSortable && putSortable.save();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl);\n\t\t\t\t\t\t\tnewDraggableIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, parentEl, rootEl, oldIndex, newIndex, oldDraggableIndex, newDraggableIndex, evt);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, oldDraggableIndex, newDraggableIndex, evt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t\tnewDraggableIndex = oldDraggableIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, parentEl, rootEl, oldIndex, newIndex, oldDraggableIndex, newDraggableIndex, evt);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\t\t\tautoScrolls.length =\n\n\t\t\tpointerElemChangedInterval =\n\t\t\tlastPointerElemX =\n\t\t\tlastPointerElemY =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\t\t\toldIndex =\n\n\t\t\tlastTarget =\n\t\t\tlastDirection =\n\n\t\t\trealDragElRect =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragenter':\n\t\t\t\tcase 'dragover':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el, false)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl, false)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el, false);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\tthis._onDrop();\n\n\t\t\tsortables.splice(sortables.indexOf(this.el), 1);\n\n\t\t\tthis.el = el = null;\n\t\t},\n\n\t\t_hideClone: function() {\n\t\t\tif (!cloneEl.cloneHidden) {\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\tcloneEl.cloneHidden = true;\n\t\t\t\tif (cloneEl.parentNode && this.options.removeCloneOnHide) {\n\t\t\t\t\tcloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_showClone: function(putSortable) {\n\t\t\tif (putSortable.lastPutMode !== 'clone') {\n\t\t\t\tthis._hideClone();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cloneEl.cloneHidden) {\n\t\t\t\t// show clone at dragEl or original position\n\t\t\t\tif (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t} else if (nextEl) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t} else {\n\t\t\t\t\trootEl.appendChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (this.options.group.revertClone) {\n\t\t\t\t\tthis._animate(dragEl, cloneEl);\n\t\t\t\t}\n\t\t\t\t_css(cloneEl, 'display', '');\n\t\t\t\tcloneEl.cloneHidden = false;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\tselector != null &&\n\t\t\t\t\t(\n\t\t\t\t\t\tselector[0] === '>' ?\n\t\t\t\t\t\tel.parentNode === ctx && _matches(el, selector) :\n\t\t\t\t\t\t_matches(el, selector)\n\t\t\t\t\t) ||\n\t\t\t\t\tincludeCTX && el === ctx\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t\tif (el === ctx) break;\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\treturn (el.host && el !== document && el.host.nodeType)\n\t\t\t? el.host\n\t\t\t: el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.cancelable && evt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, IE11OrLess ? false : captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, IE11OrLess ? false : captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el && name) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _matrix(el) {\n\t\tvar appliedTransforms = '';\n\t\tdo {\n\t\t\tvar transform = _css(el, 'transform');\n\n\t\t\tif (transform && transform !== 'none') {\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\n\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t} while (el = el.parentNode);\n\n\t\tif (window.DOMMatrix) {\n\t\t\treturn new DOMMatrix(appliedTransforms);\n\t\t} else if (window.WebKitCSSMatrix) {\n\t\t\treturn new WebKitCSSMatrix(appliedTransforms);\n\t\t} else if (window.CSSMatrix) {\n\t\t\treturn new CSSMatrix(appliedTransforms);\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(\n\t\tsortable, rootEl, name,\n\t\ttargetEl, toEl, fromEl,\n\t\tstartIndex, newIndex,\n\t\tstartDraggableIndex, newDraggableIndex,\n\t\toriginalEvt\n\t) {\n\t\tsortable = (sortable || rootEl[expando]);\n\t\tvar evt,\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent(name, {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, true);\n\t\t}\n\n\t\tevt.to = toEl || rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\tevt.oldDraggableIndex = startDraggableIndex;\n\t\tevt.newDraggableIndex = newDraggableIndex;\n\n\t\tevt.originalEvent = originalEvt;\n\t\tevt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n\t\tif (rootEl) {\n\t\t\trootEl.dispatchEvent(evt);\n\t\t}\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent('move', {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent('move', true, true);\n\t\t}\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || _getRect(toEl);\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\t/**\n\t * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n\t * and non-draggable elements\n\t * @param  {HTMLElement} el       The parent element\n\t * @param  {Number} childNum      The index of the child\n\t * @param  {Object} options       Parent Sortable's options\n\t * @return {HTMLElement}          The child at index childNum, or null if not found\n\t */\n\tfunction _getChild(el, childNum, options) {\n\t\tvar currentChild = 0,\n\t\t\ti = 0,\n\t\t\tchildren = el.children;\n\n\t\twhile (i < children.length) {\n\t\t\tif (\n\t\t\t\tchildren[i].style.display !== 'none' &&\n\t\t\t\tchildren[i] !== ghostEl &&\n\t\t\t\tchildren[i] !== dragEl &&\n\t\t\t\t_closest(children[i], options.draggable, el, false)\n\t\t\t) {\n\t\t\t\tif (currentChild === childNum) {\n\t\t\t\t\treturn children[i];\n\t\t\t\t}\n\t\t\t\tcurrentChild++;\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n\t * @param  {HTMLElement} el       Parent element\n\t * @return {HTMLElement}          The last child, ignoring ghostEl\n\t */\n\tfunction _lastChild(el) {\n\t\tvar last = el.lastElementChild;\n\n\t\twhile (last && (last === ghostEl || _css(last, 'display') === 'none')) {\n\t\t\tlast = last.previousElementSibling;\n\t\t}\n\n\t\treturn last || null;\n\t}\n\n\tfunction _ghostIsLast(evt, axis, el) {\n\t\tvar elRect = _getRect(_lastChild(el)),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\tmouseOnOppAxis = axis === 'vertical' ? evt.clientX : evt.clientY,\n\t\t\ttargetS2 = axis === 'vertical' ? elRect.bottom : elRect.right,\n\t\t\ttargetS1Opp = axis === 'vertical' ? elRect.left : elRect.top,\n\t\t\ttargetS2Opp = axis === 'vertical' ? elRect.right : elRect.bottom,\n\t\t\tspacer = 10;\n\n\t\treturn (\n\t\t\taxis === 'vertical' ?\n\t\t\t\t(mouseOnOppAxis > targetS2Opp + spacer || mouseOnOppAxis <= targetS2Opp && mouseOnAxis > targetS2 && mouseOnOppAxis >= targetS1Opp) :\n\t\t\t\t(mouseOnAxis > targetS2 && mouseOnOppAxis > targetS1Opp || mouseOnAxis <= targetS2 && mouseOnOppAxis > targetS2Opp + spacer)\n\t\t);\n\t}\n\n\tfunction _getSwapDirection(evt, target, axis, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n\t\tvar targetRect = _getRect(target),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\ttargetLength = axis === 'vertical' ? targetRect.height : targetRect.width,\n\t\t\ttargetS1 = axis === 'vertical' ? targetRect.top : targetRect.left,\n\t\t\ttargetS2 = axis === 'vertical' ? targetRect.bottom : targetRect.right,\n\t\t\tdragRect = _getRect(dragEl),\n\t\t\tinvert = false;\n\n\n\t\tif (!invertSwap) {\n\t\t\t// Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n\t\t\tif (isLastTarget && targetMoveDistance < targetLength * swapThreshold) { // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n\t\t\t\t// check if past first invert threshold on side opposite of lastDirection\n\t\t\t\tif (!pastFirstInvertThresh &&\n\t\t\t\t\t(lastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// past first invert threshold, do not restrict inverted threshold to dragEl shadow\n\t\t\t\t\tpastFirstInvertThresh = true;\n\t\t\t\t}\n\n\t\t\t\tif (!pastFirstInvertThresh) {\n\t\t\t\t\tvar dragS1 = axis === 'vertical' ? dragRect.top : dragRect.left,\n\t\t\t\t\t\tdragS2 = axis === 'vertical' ? dragRect.bottom : dragRect.right;\n\t\t\t\t\t// dragEl shadow (target move distance shadow)\n\t\t\t\t\tif (\n\t\t\t\t\t\tlastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS2 - targetMoveDistance\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn lastDirection * -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinvert = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Regular\n\t\t\t\tif (\n\t\t\t\t\tmouseOnAxis > targetS1 + (targetLength * (1 - swapThreshold) / 2) &&\n\t\t\t\t\tmouseOnAxis < targetS2 - (targetLength * (1 - swapThreshold) / 2)\n\t\t\t\t) {\n\t\t\t\t\treturn _getInsertDirection(target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinvert = invert || invertSwap;\n\n\t\tif (invert) {\n\t\t\t// Invert of regular\n\t\t\tif (\n\t\t\t\tmouseOnAxis < targetS1 + (targetLength * invertedSwapThreshold / 2) ||\n\t\t\t\tmouseOnAxis > targetS2 - (targetLength * invertedSwapThreshold / 2)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? 1 : -1);\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Gets the direction dragEl must be swapped relative to target in order to make it\n\t * seem that dragEl has been \"inserted\" into that element's position\n\t * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n\t * @return {Number}                   Direction dragEl must be swapped\n\t */\n\tfunction _getInsertDirection(target) {\n\t\tvar dragElIndex = _index(dragEl),\n\t\t\ttargetIndex = _index(target);\n\n\t\tif (dragElIndex < targetIndex) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== cloneEl && (!selector || _matches(el, selector))) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (!selector) return;\n\n\t\tselector[0] === '>' && (selector = selector.substring(1));\n\n\t\tif (el) {\n\t\t\ttry {\n\t\t\t\tif (el.matches) {\n\t\t\t\t\treturn el.matches(selector);\n\t\t\t\t} else if (el.msMatchesSelector) {\n\t\t\t\t\treturn el.msMatchesSelector(selector);\n\t\t\t\t} else if (el.webkitMatchesSelector) {\n\t\t\t\t\treturn el.webkitMatchesSelector(selector);\n\t\t\t\t}\n\t\t\t} catch(_) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tvar _throttleTimeout;\n\tfunction _throttle(callback, ms) {\n\t\treturn function () {\n\t\t\tif (!_throttleTimeout) {\n\t\t\t\tvar args = arguments,\n\t\t\t\t\t_this = this;\n\n\t\t\t\t_throttleTimeout = setTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\t_throttleTimeout = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _cancelThrottle() {\n\t\tclearTimeout(_throttleTimeout);\n\t\t_throttleTimeout = void 0;\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\tif (Polymer && Polymer.dom) {\n\t\t\treturn Polymer.dom(el).cloneNode(true);\n\t\t}\n\t\telse if ($) {\n\t\t\treturn $(el).clone(true)[0];\n\t\t}\n\t\telse {\n\t\t\treturn el.cloneNode(true);\n\t\t}\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tsavedInputChecked.length = 0;\n\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\tfunction _nextTick(fn) {\n\t\treturn setTimeout(fn, 0);\n\t}\n\n\tfunction _cancelNextTick(id) {\n\t\treturn clearTimeout(id);\n\t}\n\n\n\t/**\n\t * Returns the \"bounding client rect\" of given element\n\t * @param  {HTMLElement} el                The element whose boundingClientRect is wanted\n\t * @param  {[HTMLElement]} container       the parent the element will be placed in\n\t * @param  {[Boolean]} adjustForTransform  Whether the rect should compensate for parent's transform\n\t * @return {Object}                        The boundingClientRect of el\n\t */\n\tfunction _getRect(el, adjustForTransform, container, adjustForFixed) {\n\t\tif (!el.getBoundingClientRect && el !== win) return;\n\n\t\tvar elRect,\n\t\t\ttop,\n\t\t\tleft,\n\t\t\tbottom,\n\t\t\tright,\n\t\t\theight,\n\t\t\twidth;\n\n\t\tif (el !== win && el !== _getWindowScrollingElement()) {\n\t\t\telRect = el.getBoundingClientRect();\n\t\t\ttop = elRect.top;\n\t\t\tleft = elRect.left;\n\t\t\tbottom = elRect.bottom;\n\t\t\tright = elRect.right;\n\t\t\theight = elRect.height;\n\t\t\twidth = elRect.width;\n\t\t} else {\n\t\t\ttop = 0;\n\t\t\tleft = 0;\n\t\t\tbottom = window.innerHeight;\n\t\t\tright = window.innerWidth;\n\t\t\theight = window.innerHeight;\n\t\t\twidth = window.innerWidth;\n\t\t}\n\n\t\tif (adjustForFixed && el !== win) {\n\t\t\t// Adjust for translate()\n\t\t\tcontainer = container || el.parentNode;\n\n\t\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n\t\t\t// Not needed on <= IE11\n\t\t\tif (!IE11OrLess) {\n\t\t\t\tdo {\n\t\t\t\t\tif (container && container.getBoundingClientRect && _css(container, 'transform') !== 'none') {\n\t\t\t\t\t\tvar containerRect = container.getBoundingClientRect();\n\n\t\t\t\t\t\t// Set relative to edges of padding box of container\n\t\t\t\t\t\ttop -= containerRect.top + parseInt(_css(container, 'border-top-width'));\n\t\t\t\t\t\tleft -= containerRect.left + parseInt(_css(container, 'border-left-width'));\n\t\t\t\t\t\tbottom = top + elRect.height;\n\t\t\t\t\t\tright = left + elRect.width;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t} while (container = container.parentNode);\n\t\t\t}\n\t\t}\n\n\t\tif (adjustForTransform && el !== win) {\n\t\t\t// Adjust for scale()\n\t\t\tvar matrix = _matrix(container || el),\n\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\tif (matrix) {\n\t\t\t\ttop /= scaleY;\n\t\t\t\tleft /= scaleX;\n\n\t\t\t\twidth /= scaleX;\n\t\t\t\theight /= scaleY;\n\n\t\t\t\tbottom = top + height;\n\t\t\t\tright = left + width;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tbottom: bottom,\n\t\t\tright: right,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\n\t/**\n\t * Checks if a side of an element is scrolled past a side of it's parents\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\n\t * @return {HTMLElement}           The parent scroll element that the el's side is scrolled past, or null if there is no such element\n\t */\n\tfunction _isScrolledPast(el, side) {\n\t\tvar parent = _getParentAutoScrollElement(el, true),\n\t\t\telSide = _getRect(el)[side];\n\n\t\t/* jshint boss:true */\n\t\twhile (parent) {\n\t\t\tvar parentSide = _getRect(parent)[side],\n\t\t\t\tvisible;\n\n\t\t\tif (side === 'top' || side === 'left') {\n\t\t\t\tvisible = elSide >= parentSide;\n\t\t\t} else {\n\t\t\t\tvisible = elSide <= parentSide;\n\t\t\t}\n\n\t\t\tif (!visible) return parent;\n\n\t\t\tif (parent === _getWindowScrollingElement()) break;\n\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n\t * The value is returned in real pixels.\n\t * @param  {HTMLElement} el\n\t * @return {Array}             Offsets in the format of [left, top]\n\t */\n\tfunction _getRelativeScrollOffset(el) {\n\t\tvar offsetLeft = 0,\n\t\t\toffsetTop = 0,\n\t\t\twinScroller = _getWindowScrollingElement();\n\n\t\tif (el) {\n\t\t\tdo {\n\t\t\t\tvar matrix = _matrix(el),\n\t\t\t\t\tscaleX = matrix.a,\n\t\t\t\t\tscaleY = matrix.d;\n\n\t\t\t\toffsetLeft += el.scrollLeft * scaleX;\n\t\t\t\toffsetTop += el.scrollTop * scaleY;\n\t\t\t} while (el !== winScroller && (el = el.parentNode));\n\t\t}\n\n\t\treturn [offsetLeft, offsetTop];\n\t}\n\n\t// Fixed #973:\n\t_on(document, 'touchmove', function(evt) {\n\t\tif ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el, false);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index,\n\t\tnextTick: _nextTick,\n\t\tcancelNextTick: _cancelNextTick,\n\t\tdetectDirection: _detectDirection,\n\t\tgetChild: _getChild\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.9.0';\n\treturn Sortable;\n});\n","import { SDataArray } from 's-array';\nimport S, { DataSignal } from 's-js';\nimport Sortable from 'sortablejs';\nimport { Counter } from './counter';\n\n/**\n * One-way binds the given data-signal array to react to UI changes in the given HTML element (note the currying).\n */\nexport function sortableBindSarray<T>(sArray: SDataArray<T>, sortableOptions?: {[name: string]: any}):\n    (element: HTMLElement) => void {\n  return (element) => {\n    // noinspection JSUnusedGlobalSymbols\n    Sortable.create(element, {\n      ...sortableOptions,\n      onEnd: (event: Sortable.SortableEvent) => {\n        // It's unclear whether oldIndex or newIndex are ever undefined. However, this is the current type declaration\n        // in @types/sortablejs.\n        if (event.oldIndex === undefined || event.newIndex === undefined || event.newIndex === event.oldIndex) {\n          return;\n        }\n        const from: number = event.oldIndex;\n        const to: number = event.newIndex;\n        S.freeze(() => {\n          const item: T = sArray()[from];\n          sArray.splice(from, 1);\n          sArray.splice(to, 0, item);\n        });\n      },\n    });\n  };\n}\n\nfunction bind<T extends number | string, U extends HTMLInputElement | HTMLSelectElement>(\n    signal: DataSignal<T>,\n    get: (element: U) => T,\n    set: (element: U, newValue: T) => void,\n    invalidCounter?: Counter\n): (element: U) => void {\n  return (element) => {\n    let isCurrentlyUpdatingSignal = false;\n    const isInvalidSignal: DataSignal<boolean> = S.value(false);\n    S(() => {\n      const newValue: T = signal();\n      if (!isCurrentlyUpdatingSignal) {\n        set(element, newValue);\n      }\n      isInvalidSignal(!element.checkValidity());\n    });\n\n    const event = 'input';\n    element.addEventListener(event, valueListener, false);\n    if (invalidCounter !== undefined) {\n      invalidCounter.add(isInvalidSignal);\n    }\n    S.cleanup(() => {\n      element.removeEventListener(event, valueListener);\n      if (invalidCounter !== undefined) {\n        invalidCounter.delete(isInvalidSignal);\n      }\n    });\n\n    function valueListener(): void {\n      const current: T = S.sample(signal);\n      const updated: T = get(element);\n      if (current !== updated) {\n        isCurrentlyUpdatingSignal = true;\n        try {\n          signal(updated);\n        } finally {\n          isCurrentlyUpdatingSignal = false;\n        }\n      }\n    }\n  };\n}\n\n/**\n * Two-way binds the given `number` data signal with the given `<input>` element (note the currying).\n */\nexport function bindNumber(signal: DataSignal<number>, invalidCounter?: Counter):\n    (element: HTMLInputElement) => void {\n  return bind(\n      signal,\n      (element) => element.valueAsNumber,\n      (element, newValue) => element.valueAsNumber = newValue,\n      invalidCounter\n  );\n}\n\n/**\n * Two-way binds the given `string` data signal with the given `<input>` element (note the currying).\n */\nexport function bindString(signal: DataSignal<string>, invalidCounter?: Counter):\n    (element: HTMLInputElement | HTMLSelectElement) => void {\n  return bind(\n      signal,\n      (element) => element.value,\n      (element, newValue) => element.value = newValue,\n      invalidCounter\n  );\n}\n\n/**\n * Two-way binds the given data signal with the given `input` element (note the currying): The element is checked if\n * and only if the data signal has the given on-value.\n */\nexport function bindToOnValue<T>(signal: DataSignal<T>, onValue: T): (element: HTMLInputElement) => void {\n  return (element) => {\n    let currentlyUpdatingSignal = false;\n    S(() => {\n      const newValue: T = signal();\n      if (!currentlyUpdatingSignal) {\n        element.checked = newValue === onValue;\n      }\n    });\n\n    const event = 'change';\n    element.addEventListener(event, radioListener, false);\n    S.cleanup(() => element.removeEventListener(event, radioListener));\n\n    function radioListener(): void {\n      if (element.checked) {\n        currentlyUpdatingSignal = true;\n        try {\n          signal(onValue);\n        } finally {\n          currentlyUpdatingSignal = false;\n        }\n      }\n    }\n  };\n}\n\n/**\n * Two-way binds the given data signal with the given `<select multiple>` element (note the currying).\n */\nexport function bindStringSet(signal: DataSignal<Set<string>>): (element: HTMLSelectElement) => void {\n  return (element) => {\n    let currentlyUpdatingSignal = false;\n    S(() => {\n      const activeOptions: Set<string> = signal();\n      if (!currentlyUpdatingSignal) {\n        for (const option of element.options) {\n          option.selected = activeOptions.has(option.value);\n        }\n      }\n    });\n    const event = 'input';\n    element.addEventListener(event, valueListener, false);\n    S.cleanup(() => element.removeEventListener(event, valueListener));\n\n    function valueListener(): void {\n      const current: Set<string> = S.sample(signal);\n      const updated: Set<string> = toSet();\n      if (!setEquals(current, updated)) {\n        currentlyUpdatingSignal = true;\n        try {\n          signal(updated);\n        } finally {\n          currentlyUpdatingSignal = false;\n        }\n      }\n    }\n\n    function toSet(): Set<string> {\n      return Array.from(element.options)\n          .filter((option) => option.selected)\n          .reduce((set, option) => set.add(option.value), new Set<string>());\n    }\n  };\n}\n\nfunction setEquals<T>(left: Set<T>, right: Set<T>): boolean {\n  if (left.size !== right.size) {\n    return false;\n  }\n  for (const value of left) {\n    if (!right.has(value)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * One-way binds the presence of CSS classes on the given HTML element to react to the given signal (note the currying).\n */\nexport function withClassIff(signal: () => boolean, ...classes: string[]): (element: HTMLElement) => void {\n  return (element) => {\n    // The typical use of this function is to add an attribute of form 'fn={withClassIf(booleanSignal)}' to the HTML\n    // (or SVG) element in JSX. Surplus already wraps each computation in an S.js computation. Hence, it is not\n    // necessary (for the intended effect) to wrap the following in another S.js lambda. However, by doing so we can\n    // restrict the scope of what is re-executed if the signal changes. Without the S.js lambda here, the entire\n    // computation in the fn attribute would be re-executed (which would include running this function).\n    S(() => {\n      if (signal()) {\n        element.classList.add(...classes);\n      } else {\n        element.classList.remove(...classes);\n      }\n    });\n  };\n}\n\n/**\n * If the given signal is changed to the given value, focus on the given HTML element.\n */\nexport function focusOnChangeToValue<T>(signal: () => T, value: T): (element: HTMLElement) => void {\n  return (element) => {\n    let previousValue: T = S.sample(signal);\n    S(() => {\n      const newValue: T = signal();\n      if (newValue !== previousValue && newValue === value) {\n        // We cannot focus immediately, because the input may still be hidden (the order in which S.js invokes the\n        // computations is undefined). We therefore need to await the end of the S.js transaction!\n        setTimeout(() => element.focus());\n      }\n      previousValue = newValue;\n    });\n  };\n}\n\n/**\n * One-way binds the href attribute to react to the given signal.\n *\n * This function is necessary because we want to remove the href attribute if the given signal is the empty URL (as\n * opposed to setting the href attribute to the empty string, which would still be shown as a link in the browser).\n */\nexport function hrefFrom(signal: () => string): (element: HTMLAnchorElement) => void {\n  return (element) => {\n    S(() => {\n      const url: string = signal();\n      if (url.length === 0) {\n        element.removeAttribute('href');\n      } else {\n        element.setAttribute('href', url);\n      }\n    });\n  };\n}\n","import { SDataArray } from 's-array';\nimport { DataSignal } from 's-js';\n\nexport interface Jsonable {\n  toJSON(): any;\n}\n\n/**\n * Makes an s.js signal jsonable by adding a `toJSON` method that extracts its value during JSONization.\n *\n * Adapted from GitHub project\n * [adamhaile/surplus-todomvc](https://github.com/adamhaile/surplus-todomvc/blob/37ffcdfca66a11365ff88aeed5db9f38b97ba2c6/src/models.ts).\n */\nexport function jsonable<T extends () => any>(s: T): T & Jsonable {\n  const augmentedSignal = s as T & Jsonable;\n  augmentedSignal.toJSON = toJSON;\n  return augmentedSignal;\n}\n\nfunction toJSON(this: () => any): any {\n  const value: any = this();\n  // A good idea here would be to check if value.toJSON exists. But this is not public API, and we don't need this in\n  // this project.\n  if (value instanceof Set) {\n    return [...value];\n  } else {\n    return value;\n  }\n}\n\n/**\n * Creates a new plain JSON value for the given value (which may contain signals or `Set` instances).\n */\nexport function toPlain<T>(source: T): Plain<T> {\n  if (typeof source === 'function' && 'toJSON' in source) {\n    return toPlain(source());\n  } else if (Array.isArray(source)) {\n    return source.map(toPlain) as Plain<T>;\n  } else if (source instanceof Set) {\n    return toPlain(Array.from(source)) as Plain<T>;\n  } else if (typeof source === 'object' && source !== null) {\n    const typedSource: Record<string, any> = source;\n    const target: Record<string, any> = {};\n    for (const key in typedSource) {\n      if (typedSource.hasOwnProperty(key) && key !== 'transient') {\n        const plainValue = toPlain(typedSource[key]);\n        if (plainValue !== undefined) {\n          target[key] = plainValue;\n        }\n      }\n    }\n    return target as Plain<T>;\n  } else {\n    return source as Plain<T>;\n  }\n}\n\n/**\n * Construct a type with the properties of T, but make those properties optional whose keys are in the union K.\n */\ntype MakeOptional<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>> & Partial<Pick<T, K>>;\n\n// The following requires at least TypeScript 3.4. See: https://github.com/Microsoft/TypeScript/issues/24622\ntype PlainHelper<T> =\n    T extends SDataArray<infer U1> ? U1[] :\n    T extends DataSignal<infer U2> ? U2 :\n    T extends Set<infer U3> ? U3[] :\n    T extends ({[P in keyof T]: T[P]} & {transient: any}) ?\n        MakeOptional<{[P in keyof T]: PlainHelper<T[P]>}, 'transient'> :\n    T extends {[P in keyof T]: T[P]} ? {[P in keyof T]: PlainHelper<T[P]>} :\n    T;\n\nexport type Plain<T> = PlainHelper<PlainHelper<PlainHelper<T>>>;\n","/**\n * Function that always throws an error.\n *\n * The purpose of this function is to be used as a compile-time type completeness check; for instance, in a `switch`\n * statement. Calling this function will cause no error *only if* control-flow-based type analysis infers the argument\n * type as `never`  in other words, if the function call cannot be reached.\n */\nexport function unreachableCase(x: never): never {\n  throw new Error(`Unexpected case that should be unreachable: ${x}`);\n}\n\n/**\n * Returns the given value as string if the type of the value is `string`, `boolean`, or `number`; otherwise,\n * returns the given default value.\n *\n * This function is meant to be used when we cannot trust the type system (typically, user input).\n */\nexport function ensureString(value: string, defaultValue: string = ''): string {\n  const actualValue: unknown = value;\n  switch (typeof actualValue) {\n    case 'string': return actualValue;\n    case 'boolean': case 'number': return actualValue.toString();\n    default: return defaultValue;\n  }\n}\n\n/**\n * Returns the given value if it is a number, or otherwise the given default value.\n *\n * This function is meant to be used when we cannot trust the type system (typically, user input).\n */\nexport function ensureNumber(value: number, defaultValue: number = 0): number {\n  const actualValue: unknown = value;\n  return typeof actualValue === 'number'\n      ? actualValue\n      : defaultValue;\n}\n\n/**\n * Returns the given value if it is a boolean, or otherwise the given default value.\n *\n * This function is meant to be used when we cannot trust the type system (typically, user input).\n */\nexport function ensureBoolean(value: boolean, defaultValue: boolean = false): boolean {\n  const actualValue: unknown = value;\n  return typeof actualValue === 'boolean'\n      ? actualValue\n      : defaultValue;\n}\n\n/**\n * Returns a newly created array where each element is the result of invoking `ensureElementType()`. If the given value\n * is not an array, returns the default array.\n *\n * This function is meant to be used when we cannot trust the type system (typically, user input).\n */\nexport function ensureArray<T>(value: T[], defaultValue: T[] = [], validElementPredicate: (element: T) => boolean):\n    T[] {\n  return Array.isArray(value) && value.findIndex((element) => !validElementPredicate(element)) === -1\n      ? value\n      : defaultValue;\n}\n","import S, { DataSignal } from 's-js';\nimport { jsonable, Plain, toPlain } from '../../utils/s';\nimport { ensureString } from '../../utils/typescript';\n\n/**\n * Non-transient state of the settings UI component.\n */\nexport interface Settings {\n  readonly name: DataSignal<string>;\n  readonly youTrackBaseUrl: DataSignal<string>;\n  readonly hubUrl: DataSignal<string>;\n  readonly youTrackServiceId: DataSignal<string>;\n}\n\n/**\n * Creates a new state for the settings UI component.\n */\nexport function createSettings(): Settings {\n  return {\n    name: jsonable(S.value('')),\n    youTrackBaseUrl: jsonable(S.value('')),\n    hubUrl: jsonable(S.value('')),\n    youTrackServiceId: jsonable(S.value('')),\n  };\n}\n\n/**\n * Updates the state of the settings UI component to the given values in a plain JSON object.\n *\n * The update is performed within a single S.js transaction.\n *\n * @param settings state of the settings UI component\n * @param plain plain JSON object\n */\nexport function assignSettings(settings: Settings, plain: Plain<Settings>): void {\n  S.freeze(() => {\n    settings.name(ensureString(plain.name));\n    settings.youTrackBaseUrl(ensureString(plain.youTrackBaseUrl));\n    settings.hubUrl(ensureString(plain.hubUrl));\n    settings.youTrackServiceId(ensureString(plain.youTrackServiceId));\n  });\n}\n\n/**\n * Creates a new normalized plain JSON value for the given settings.\n *\n * Normalization means that the YouTrack base URL is the result of {@link toNormalizedUrl}().\n */\nexport function toNormalizedPlainSettings<T extends Settings>(settings: T): Plain<T> {\n  const plainSettings = toPlain(settings);\n  return {\n    ...plainSettings,\n    youTrackBaseUrl: toNormalizedUrl(plainSettings.youTrackBaseUrl),\n    hubUrl: toNormalizedUrl(plainSettings.youTrackBaseUrl),\n  };\n}\n\n/**\n * Returns the normalized URL.\n *\n * Normalization means returning a syntactically valid URL that ends with a slash (/).\n *\n * @return the normalized URL, or the empty string if the given URL is not valid\n */\nexport function toNormalizedUrl(urlString: string): string {\n  try {\n    const url = new URL(urlString);\n    if (url.host.length === 0) {\n      // Oddly, Safari 12's implementation of the URL constructor does not throw on 'http:' or 'https:' whereas both\n      // Chrome and Firefox do.\n      return '';\n    } else if (url.pathname.length === 0 || url.pathname.charAt(url.pathname.length - 1) !== '/') {\n      url.pathname = url.pathname.concat('/');\n    }\n    return url.toString();\n  } catch (exception) {\n    if (!(exception instanceof TypeError)) {\n      throw exception;\n    }\n    return '';\n  }\n}\n","import { strict as assert } from 'assert';\nimport S, { DataSignal } from 's-js';\nimport { hrefFrom } from '../../utils/surplus';\nimport { Settings, toNormalizedUrl } from './settings-model';\n\n/**\n * Controller for elementary settings (name of YouTrack instance, base URL, etc.).\n */\nexport class SettingsCtrl {\n  public readonly normalizedBaseUrl: () => string;\n  public readonly normalizedHubUrl: () => string;\n  public readonly isInCloudUrl: () => boolean;\n\n  public static currentUri(): URL {\n    const uri = new URL(window.location.href);\n    uri.hash = '';\n    uri.username = '';\n    uri.password = '';\n    uri.search = '';\n    return uri;\n  }\n\n  public static currentOrigin(): URL {\n    const uri = SettingsCtrl.currentUri();\n    uri.pathname = '';\n    return uri;\n  }\n\n  public constructor(\n      private readonly settings_: Settings\n  ) {\n    this.normalizedBaseUrl = S(() => toNormalizedUrl(this.settings_.youTrackBaseUrl()));\n    this.normalizedHubUrl = S(() => toNormalizedUrl(this.settings_.hubUrl()));\n    const isInCloudUrlSignal: DataSignal<boolean> = S.value(false);\n    this.isInCloudUrl = isInCloudUrlSignal;\n\n    let previousNormalizedBaseUrl: string = S.sample(this.normalizedBaseUrl);\n    // 'seed' is undefined (the calculation does not keep a state), and 'onchanges' is false (do the initial run).\n    S.on(this.normalizedBaseUrl, () => {\n      const normalizedBaseUrl = S.sample(this.normalizedBaseUrl);\n      const {hubUrl, isInCloudUrl} = hubUrlFromYouTrackBaseUrl(normalizedBaseUrl);\n      isInCloudUrlSignal(isInCloudUrl);\n\n      const previousHubUrl = S.sample(settings_.hubUrl);\n      if (previousHubUrl === '' || isInCloudUrl ||\n          previousHubUrl === hubUrlFromYouTrackBaseUrl(previousNormalizedBaseUrl).hubUrl) {\n        // The hub URL is currently the default one for the base URL. Keep in sync.\n        // If the current if-condition is not true, the user has modified the hub URL, so it shouldn't be updates.\n        previousNormalizedBaseUrl = normalizedBaseUrl;\n        this.settings_.hubUrl(hubUrl);\n      }\n    }, undefined, false);\n  }\n\n  public hrefRelativeToBaseUrl(relativePath: string): (element: HTMLAnchorElement) => void {\n    const signal = (): string => {\n      const baseUrl = this.normalizedBaseUrl();\n      return baseUrl.length === 0\n          ? ''\n          : new URL(relativePath, baseUrl).toString();\n    };\n    return hrefFrom(signal);\n  }\n\n  public hubRelativeToBaseUrlAndServiceId(relativePath: (serviceId: string) => string):\n      (element: HTMLAnchorElement) => void {\n    const signal = (): string => {\n      const baseUrl = this.normalizedBaseUrl();\n      const serviceId = this.settings_.youTrackServiceId();\n      return (baseUrl.length === 0 || serviceId.length === 0)\n          ? ''\n          : new URL(relativePath(serviceId), this.normalizedBaseUrl()).toString();\n    };\n    return hrefFrom(signal);\n  }\n}\n\nfunction hubUrlFromYouTrackBaseUrl(baseUrl: string): {hubUrl: string, isInCloudUrl: boolean} {\n  assert(baseUrl.length === 0 || baseUrl.endsWith('/'));\n\n  const inCloudMatch: RegExpMatchArray | null = baseUrl.match(/^(https:\\/\\/[^./]*\\.myjetbrains\\.com\\/)youtrack\\/$/);\n  let hubUrl: string;\n  let isInCloudUrl: boolean = false;\n  if (inCloudMatch !== null) {\n    // https://www.jetbrains.com/help/youtrack/incloud/OAuth-Authorization.html#HubOauthEndpoints\n    hubUrl = `${inCloudMatch[1]}hub`;\n    isInCloudUrl = true;\n  } else if (baseUrl.length > 0) {\n    // https://www.jetbrains.com/help/youtrack/standalone/OAuth-Authorization.html#HubOauthEndpoints\n    hubUrl = `${baseUrl}hub`;\n  } else {\n    hubUrl = '';\n  }\n  return {hubUrl, isInCloudUrl};\n}\n","import { authorizationFor, getMinutesPerWorkWeek, httpGet } from '@fschopp/project-planning-for-you-track';\nimport S, { DataSignal } from 's-js';\nimport { CustomField, IssueLinkType, SavedQuery, User } from '../../youtrack-rest';\nimport { AlertsCtrl } from '../alerts/alerts-ctrl';\nimport { YouTrackMetadata } from './you-track-metadata-model';\n\nenum YouTrackRestUrl {\n  CUSTOM_FIELDS = 'api/admin/customFieldSettings/customFields',\n  ISSUE_LINK_TYPES = 'api/issueLinkTypes',\n  SAVED_QUERIES = 'api/savedQueries',\n  USERS = 'api/admin/users',\n}\n\n/**\n * Controller for retrieving YouTrack metadata.\n *\n * This class provides signals containing lists of users, saved searches, etc.\n */\nexport class YouTrackMetadataCtrl {\n  /**\n   * Signal carrying YouTrack metadata. Default values are used if {@link youTrackMetadata} is `undefined`.\n   */\n  public readonly definedYouTrackMetadata: () => YouTrackMetadata;\n\n  /**\n   * Signal carrying a (possibly empty) map of YouTrack users, index by ID.\n   */\n  public readonly youTrackUserMap: () => Map<string, User>;\n\n  /**\n   * Signal carrying a (possibly empty) map of YouTrack issue links, indexed by ID.\n   */\n  public readonly directedIssueLinkTypes: () => Map<string, IssueLinkType>;\n\n  /**\n   * Signal carrying a (possibly empty) map from YouTrack saved search ID to YouTrack saved search.\n   */\n  public readonly savedQueries: () => Map<string, SavedQuery>;\n\n  /**\n   * Signal indicating whether metadata requests to YouTrack are currently pending.\n   */\n  public pendingMetadata: () => boolean;\n\n  public constructor(\n      youTrackMetadata: DataSignal<YouTrackMetadata | undefined>,\n      normalizedBaseUrl: () => string,\n      alertCtrl: AlertsCtrl\n  ) {\n    const pendingMetadata: DataSignal<boolean> = S.value(false);\n    this.pendingMetadata = pendingMetadata;\n\n    this.definedYouTrackMetadata = S(() => {\n      const currentYouTrackMetadata: YouTrackMetadata | undefined = youTrackMetadata();\n      return currentYouTrackMetadata !== undefined && normalizedBaseUrl() === currentYouTrackMetadata.baseUrl\n          ? currentYouTrackMetadata\n          : emptyYouTrackMetadata();\n    });\n    this.youTrackUserMap = S(() =>\n        this.definedYouTrackMetadata().users\n            .reduce((map, user) => map.set(user.id, user), new Map<string, User>())\n    );\n    this.directedIssueLinkTypes = S(() =>\n        this.definedYouTrackMetadata().issueLinkTypes\n            .filter((linkType) => linkType.directed)\n            .reduce((map, linkType) => map.set(linkType.id, linkType), new Map<string, IssueLinkType>())\n    );\n    this.savedQueries = S(() =>\n        this.definedYouTrackMetadata().savedSearches\n            .reduce((map, savedQuery) => map.set(savedQuery.id, savedQuery), new Map<string, SavedQuery>())\n    );\n\n    S(() => {\n      const currentBaseUrl: string = normalizedBaseUrl();\n      const currentYouTrackMetadata: YouTrackMetadata | undefined = S.sample(youTrackMetadata);\n      if (currentBaseUrl.length > 0 && !S.sample(pendingMetadata) && currentYouTrackMetadata === undefined &&\n          authorizationFor(currentBaseUrl) !== undefined) {\n        pendingMetadata(true);\n        Promise\n            .all([\n              loadCustomFields(currentBaseUrl),\n              loadIssueLinkTypes(currentBaseUrl),\n              loadSavedSearches(currentBaseUrl),\n              loadUsers(currentBaseUrl),\n              getMinutesPerWorkWeek(currentBaseUrl),\n            ])\n            .then(([customFields, issueLinkTypes, savedSearches, users, minutesPerWorkWeek]) => {\n              youTrackMetadata({\n                baseUrl: currentBaseUrl,\n                customFields,\n                issueLinkTypes,\n                savedSearches,\n                users,\n                minutesPerWorkWeek,\n              });\n            })\n            .catch((exception) => alertCtrl.alert('Failed to retrieve YouTrack metadata', exception))\n            .finally(() => pendingMetadata(false));\n      }\n    });\n  }\n\n  /**\n   * Returns a new signal containing a map from YouTrack issue field ID to custom field.\n   *\n   * The returned map only contains entries with the given field type (such as `enum[1]`, `period`, etc.).\n   */\n  public mapOfCustomFieldTypes(fieldTypeId: string): () => Map<string, CustomField> {\n    return S(() => this.definedYouTrackMetadata().customFields\n        .filter((customField) => customField.fieldType.id === fieldTypeId)\n        .reduce((map, customField) => map.set(customField.id, customField), new Map<string, CustomField>())\n    );\n  }\n}\n\nasync function loadCustomFields(baseUrl: string): Promise<CustomField[]> {\n  const queryParams = {\n    fields: 'fieldDefaults(bundle(id,values(color(background,foreground),id,isResolved,name,ordinal))),' +\n        'fieldType(id),id,name',\n  };\n  return await httpGet<CustomField[]>(baseUrl, YouTrackRestUrl.CUSTOM_FIELDS, queryParams);\n}\n\nasync function loadIssueLinkTypes(baseUrl: string): Promise<IssueLinkType[]> {\n  const queryParams = {\n    fields: 'directed,id,name,sourceToTarget,targetToSource',\n  };\n  return await httpGet<IssueLinkType[]>(baseUrl, YouTrackRestUrl.ISSUE_LINK_TYPES, queryParams);\n}\n\nasync function loadSavedSearches(baseUrl: string): Promise<SavedQuery[]> {\n  const queryParams = {\n    fields: 'id,name,owner(fullName)',\n  };\n  return await httpGet<SavedQuery[]>(baseUrl, YouTrackRestUrl.SAVED_QUERIES, queryParams);\n}\n\nasync function loadUsers(baseUrl: string): Promise<User[]> {\n  const queryParams = {\n    fields: 'avatarUrl,id,fullName',\n  };\n  return await httpGet<User[]>(baseUrl, YouTrackRestUrl.USERS, queryParams);\n}\n\nfunction emptyYouTrackMetadata(): YouTrackMetadata {\n  return {\n    baseUrl: '',\n    customFields: [],\n    issueLinkTypes: [],\n    savedSearches: [],\n    users: [],\n    minutesPerWorkWeek: 5 * 8 * 60,\n  };\n}\n","import { goToOauthPage, } from '@fschopp/project-planning-for-you-track';\nimport S from 's-js';\nimport { Counter } from '../../utils/counter';\nimport { AlertsCtrl } from '../alerts/alerts-ctrl';\nimport { SettingsCtrl } from '../settings/settings-ctrl';\nimport { Settings } from '../settings/settings-model';\nimport { YouTrackMetadataCtrl } from '../you-track-metadata/you-track-metadata-ctrl';\nimport { App, AppComputation } from './app-model';\n\n/**\n * Controller for {@link App}.\n *\n * @typeparam T Type of of the user-provided state; that is, of {@link App.settings}.\n */\nexport class AppCtrl<T extends Settings> {\n  /**\n   * Creates a new {@link AppCtrl}, including all transitive (controller) dependencies.\n   *\n   * This method is a convenience method. It creates and wires dependencies such as {@link AlertsCtrl} or\n   * {@link SettingsCtrl}, using reasonable defaults.\n   *\n   * @typeparam T Type of of the user-provided state; that is, of {@link App.settings}.\n   * @param app The user-provided application state.\n   * @param appComputation The computed application state.\n   */\n  public static createDefaultAppCtrl<T extends Settings>(app: App<T>, appComputation: AppComputation): AppCtrl<T> {\n    const settingsCtrl: SettingsCtrl = new SettingsCtrl(app.settings);\n    const alertsCtrl: AlertsCtrl = new AlertsCtrl(appComputation.alerts);\n    const youTrackMetadataCtrl: YouTrackMetadataCtrl =\n        new YouTrackMetadataCtrl(appComputation.youTrackMetadata, settingsCtrl.normalizedBaseUrl, alertsCtrl);\n    const invalidCounter = new Counter(appComputation.numInvalidSettings);\n    return new AppCtrl(app, appComputation, settingsCtrl, alertsCtrl, youTrackMetadataCtrl, invalidCounter);\n  }\n\n  /**\n   * Constructor.\n   *\n   * @param app_ The user-provided application state.\n   * @param appComputation_ The computed application state.\n   * @param settingsCtrl The controller for elementary settings (name of YouTrack instance, base URL, etc.).\n   * @param alertsCtrl The controller for displaying alerts to the user.\n   * @param youTrackMetadataCtrl The controller for retrieving YouTrack metadata.\n   * @param invalidCounter The controller for counting the number of invalid settings. Unfortunately, in its current\n   *     form, only the views update the counter. This is because the count information originates from the HTML5\n   *     constraint validation and makes its way into `invalidCounter` predominantly through data binding (for instance,\n   *     with {@link bindString}()). This somewhat blurs the lines between controller and view. A more principled\n   *     distribution of concerns would be to have the validation entirely done by controllers. The refactoring will be\n   *     left for the future...\n   */\n  public constructor(\n      private readonly app_: App<T>,\n      private readonly appComputation_: AppComputation,\n      public readonly settingsCtrl: SettingsCtrl,\n      public readonly alertsCtrl: AlertsCtrl,\n      public readonly youTrackMetadataCtrl: YouTrackMetadataCtrl,\n      public readonly invalidCounter: Counter\n  ) {\n    // 'seed' is undefined (the calculation does not keep a state), and 'onchanges' is true (skip the initial run).\n    S.on(this.appComputation_.connect, () => this.connect(), undefined, true);\n\n    // Bind document.title to react to changes of this.app.transient.appName\n    S(() => {\n      const appName: string = this.appComputation_.name();\n      const title: string = this.app_.settings.name();\n      document.title = title.length > 0\n          ? `${appName}: ${title}`\n          : appName;\n    });\n  }\n\n  public showErrorIfFailure(title: string, promise: Promise<void>): void {\n    promise\n        .catch((exception) => this.alertsCtrl.alert(title, exception))\n        .finally(() => {\n          this.appComputation_.progress(undefined);\n        });\n  }\n\n  private connect(): void {\n    goToOauthPage(this.settingsCtrl.normalizedBaseUrl(), this.settingsCtrl.normalizedHubUrl(),\n        this.app_.settings.youTrackServiceId(), this.app_);\n  }\n}\n","// synchronous array signals for S.js\nimport S from \"s-js\";\nexport default function SArray(values) {\n    if (!Array.isArray(values))\n        throw new Error(\"SArray must be initialized with an array\");\n    var dirty = S.data(false), mutations = [], mutcount = 0, pops = 0, shifts = 0, data = S.root(function () { return S.on(dirty, update, values, true); });\n    // add mutators\n    var array = function array(newvalues) {\n        if (arguments.length > 0) {\n            mutation(function array() { values = newvalues; });\n            return newvalues;\n        }\n        else {\n            return data();\n        }\n    };\n    array.push = push;\n    array.pop = pop;\n    array.unshift = unshift;\n    array.shift = shift;\n    array.splice = splice;\n    // not ES5\n    array.remove = remove;\n    array.removeAll = removeAll;\n    lift(array);\n    return array;\n    function mutation(m) {\n        mutations[mutcount++] = m;\n        dirty(true);\n    }\n    function update() {\n        if (pops)\n            values.splice(values.length - pops, pops);\n        if (shifts)\n            values.splice(0, shifts);\n        pops = 0;\n        shifts = 0;\n        for (var i = 0; i < mutcount; i++) {\n            mutations[i]();\n            mutations[i] = null;\n        }\n        mutcount = 0;\n        return values;\n    }\n    // mutators\n    function push(item) {\n        mutation(function push() { values.push(item); });\n        return array;\n    }\n    function pop() {\n        array();\n        if ((pops + shifts) < values.length) {\n            var value = values[values.length - ++pops];\n            dirty(true);\n            return value;\n        }\n    }\n    function unshift(item) {\n        mutation(function unshift() { values.unshift(item); });\n        return array;\n    }\n    function shift() {\n        array();\n        if ((pops + shifts) < values.length) {\n            var value = values[shifts++];\n            dirty(true);\n            return value;\n        }\n    }\n    function splice( /* arguments */) {\n        var args = Array.prototype.slice.call(arguments);\n        mutation(function splice() { Array.prototype.splice.apply(values, args); });\n        return array;\n    }\n    function remove(item) {\n        mutation(function remove() {\n            for (var i = 0; i < values.length; i++) {\n                if (values[i] === item) {\n                    values.splice(i, 1);\n                    break;\n                }\n            }\n        });\n        return array;\n    }\n    function removeAll(item) {\n        mutation(function removeAll() {\n            for (var i = 0; i < values.length;) {\n                if (values[i] === item) {\n                    values.splice(i, 1);\n                }\n                else {\n                    i++;\n                }\n            }\n        });\n        return array;\n    }\n}\n// util to add transformer methods\nexport function lift(seq) {\n    var _seq = seq;\n    _seq.concat = chainConcat;\n    _seq.every = chainEvery;\n    _seq.filter = chainFilter;\n    _seq.find = chainFind;\n    //s.findIndex = findIndex;\n    _seq.forEach = chainForEach;\n    _seq.includes = chainIncludes;\n    //s.indexOf   = indexOf;\n    //s.join      = join;\n    //s.lastIndexOf = lastIndexOf;\n    _seq.map = chainMap;\n    _seq.sort = chainSort;\n    _seq.reduce = chainReduce;\n    _seq.reduceRight = chainReduceRight;\n    _seq.reverse = chainReverse;\n    _seq.slice = chainSlice;\n    _seq.some = chainSome;\n    // non-ES5 transformers\n    _seq.mapS = chainMapS;\n    _seq.mapSample = chainMapSample;\n    _seq.mapSequentially = chainMapSequentially;\n    _seq.orderBy = chainOrderBy;\n    return _seq;\n}\nexport function mapS(seq, enter, exit, move) {\n    var items = [], mapped = [], disposers = [], len = 0;\n    S(function () { S.cleanup(function () { disposers.forEach(function (d) { d(); }); }); });\n    return S.on(seq, function mapS() {\n        var new_items = seq(), new_len = new_items.length, temp = new Array(new_len), tempdisposers = new Array(new_len), from = null, to = null, i, j, k, item;\n        if (move)\n            from = [], to = [];\n        // 1) step through all old items and see if they can be found in the new set; if so, save them in a temp array and mark them moved; if not, exit them\n        NEXT: for (i = 0, k = 0; i < len; i++) {\n            item = items[i];\n            for (j = 0; j < new_len; j++, k = (k + 1) % new_len) {\n                if (item === new_items[k] && !temp.hasOwnProperty(k.toString())) {\n                    temp[k] = mapped[i];\n                    tempdisposers[k] = disposers[i];\n                    if (move && i !== k) {\n                        from.push(i);\n                        to.push(k);\n                    }\n                    k = (k + 1) % new_len;\n                    continue NEXT;\n                }\n            }\n            if (exit)\n                exit(item, mapped[i](), i);\n            disposers[i]();\n        }\n        if (move && from.length)\n            move(items, mapped, from, to);\n        // 2) set all the new values, pulling from the temp array if copied, otherwise entering the new value\n        for (i = 0; i < new_len; i++) {\n            if (temp.hasOwnProperty(i.toString())) {\n                mapped[i] = temp[i];\n                disposers[i] = tempdisposers[i];\n            }\n            else {\n                mapped[i] = S.root(mapper);\n            }\n        }\n        // 3) in case the new set is shorter than the old, set the length of the mapped array\n        len = mapped.length = new_len;\n        // 4) save a copy of the mapped items for the next update\n        items = new_items.slice();\n        return mapped;\n        function mapper(disposer) {\n            disposers[i] = disposer;\n            var _item = new_items[i], _i = i;\n            return S(function (value) { return enter(_item, value, _i); }, undefined);\n        }\n    });\n}\nfunction chainMapS(enter, exit, move) {\n    var r = lift(mapS(this, enter, exit, move));\n    r.combine = chainCombine;\n    return r;\n}\nexport function mapSample(seq, enter, exit, move) {\n    var items = [], mapped = [], disposers = [], len = 0;\n    S(function () { S.cleanup(function () { disposers.forEach(function (d) { d(); }); }); });\n    return S.on(seq, function mapSample() {\n        var new_items = seq(), new_len = new_items.length, new_indices, new_indices_next, temp, tempdisposers, from = null, to = null, i, j, start, end, new_end, item;\n        // fast path for empty arrays\n        if (new_len === 0) {\n            if (len !== 0) {\n                if (exit !== undefined) {\n                    for (i = 0; i < len; i++) {\n                        item = items[i];\n                        exit(item, mapped[i], i);\n                        disposers[i]();\n                    }\n                }\n                else {\n                    for (i = 0; i < len; i++) {\n                        disposers[i]();\n                    }\n                }\n                items = [];\n                mapped = [];\n                disposers = [];\n                len = 0;\n            }\n        }\n        else if (len === 0) {\n            for (j = 0; j < new_len; j++) {\n                items[j] = new_items[j];\n                mapped[j] = S.root(mapper);\n            }\n            len = new_len;\n        }\n        else {\n            new_indices = new Map();\n            temp = new Array(new_len);\n            tempdisposers = new Array(new_len);\n            if (move)\n                from = [], to = [];\n            // skip common prefix and suffix\n            for (start = 0, end = Math.min(len, new_len); start < end && items[start] === new_items[start]; start++)\n                ;\n            for (end = len - 1, new_end = new_len - 1; end >= 0 && new_end >= 0 && items[end] === new_items[new_end]; end--, new_end--) {\n                temp[new_end] = mapped[end];\n                tempdisposers[new_end] = disposers[end];\n            }\n            // 0) prepare a map of all indices in new_items, scanning backwards so we encounter them in natural order\n            new_indices_next = new Array(new_end + 1);\n            for (j = new_end; j >= start; j--) {\n                item = new_items[j];\n                i = new_indices.get(item);\n                new_indices_next[j] = i === undefined ? -1 : i;\n                new_indices.set(item, j);\n            }\n            // 1) step through all old items and see if they can be found in the new set; if so, save them in a temp array and mark them moved; if not, exit them\n            for (i = start; i <= end; i++) {\n                item = items[i];\n                j = new_indices.get(item);\n                if (j !== undefined && j !== -1) {\n                    temp[j] = mapped[i];\n                    tempdisposers[j] = disposers[i];\n                    if (move && i !== j) {\n                        from.push(i);\n                        to.push(j);\n                    }\n                    j = new_indices_next[j];\n                    new_indices.set(item, j);\n                }\n                else {\n                    if (exit)\n                        exit(item, mapped[i], i);\n                    disposers[i]();\n                }\n            }\n            if (move && (from.length !== 0 || end !== len - 1)) {\n                end++, new_end++;\n                while (end < len) {\n                    from.push(end++);\n                    to.push(new_end++);\n                }\n                move(items, mapped, from, to);\n            }\n            // 2) set all the new values, pulling from the temp array if copied, otherwise entering the new value\n            for (j = start; j < new_len; j++) {\n                if (temp.hasOwnProperty(j)) {\n                    mapped[j] = temp[j];\n                    disposers[j] = tempdisposers[j];\n                }\n                else {\n                    mapped[j] = S.root(mapper);\n                }\n            }\n            // 3) in case the new set is shorter than the old, set the length of the mapped array\n            len = mapped.length = new_len;\n            // 4) save a copy of the mapped items for the next update\n            items = new_items.slice();\n        }\n        return mapped;\n        function mapper(disposer) {\n            disposers[j] = disposer;\n            return enter(new_items[j], mapped[j], j);\n        }\n    });\n}\nfunction chainMapSample(enter, exit, move) {\n    return lift(mapSample(this, enter, exit, move));\n}\nexport function mapSequentially(seq, update) {\n    var mapped = [];\n    return S(function mapSequentially() {\n        var s = seq();\n        for (var i = 0; i < s.length; i++) {\n            mapped[i] = update(s[i], mapped[i], i);\n        }\n        if (mapped.length > s.length)\n            mapped.length = s.length;\n        return mapped;\n    });\n}\nfunction chainMapSequentially(enter) {\n    return lift(mapSequentially(this, enter));\n}\nexport function forEach(seq, enter, exit, move) {\n    var items = [], len = 0;\n    return S.on(seq, function forEach() {\n        var new_items = seq(), new_len = new_items.length, found = new Array(new_len), from = [], to = [], i, j, k, item;\n        // 1) step through all old items and see if they can be found in the new set; if so, save them in a temp array and mark them moved; if not, exit them\n        NEXT: for (i = 0, k = 0; i < len; i++) {\n            item = items[i];\n            for (j = 0; j < new_len; j++, k = (k + 1) % new_len) {\n                if (item === new_items[k] && !found[k]) {\n                    found[k] = true;\n                    if (i !== k) {\n                        from.push(i);\n                        to.push(k);\n                    }\n                    k = (k + 1) % new_len;\n                    continue NEXT;\n                }\n            }\n            if (exit)\n                exit(item, i);\n        }\n        if (move && from.length)\n            move(from, to);\n        // 2) set all the new values, pulling from the temp array if copied, otherwise entering the new value\n        for (var i = 0; i < new_len; i++) {\n            if (!found[i])\n                enter(new_items[i], i);\n        }\n        // 3) in case the new set is shorter than the old, set the length of the mapped array\n        len = new_len;\n        // 4) save a copy of the mapped items for the next update\n        items = new_items.slice();\n        return items;\n    });\n}\nfunction chainForEach(enter, exit, move) {\n    return lift(forEach(this, enter, exit, move));\n}\nexport function combine(seq) {\n    return S(function combine() {\n        var s = seq(), result = new Array(s.length);\n        for (var i = 0; i < s.length; i++) {\n            result[i] = s[i]();\n        }\n        return result;\n    });\n}\nfunction chainCombine() {\n    return lift(combine(this));\n}\nexport function map(seq, enter, exit, move) {\n    return combine(mapS(seq, enter, exit, move == undefined ? undefined :\n        function (items, mapped, from, to) { move(items, mapped.map(function (s) { return s(); }), from, to); }));\n}\nfunction chainMap(enter, exit, move) {\n    return lift(map(this, enter, exit, move));\n}\nexport function find(seq, pred) {\n    return S(function find() {\n        var s = seq(), i, item;\n        for (i = 0; i < s.length; i++) {\n            item = s[i];\n            if (pred(item))\n                return item;\n        }\n        return undefined;\n    });\n}\nfunction chainFind(pred) {\n    return find(this, pred);\n}\nexport function includes(seq, o) {\n    return S(function find() {\n        var s = seq();\n        for (var i = 0; i < s.length; i++) {\n            if (s[i] === o)\n                return true;\n        }\n        return false;\n    });\n}\nfunction chainIncludes(o) {\n    return includes(this, o);\n}\nexport function sort(seq, fn) {\n    return S(function sort() {\n        var copy = seq().slice(0);\n        if (fn)\n            copy.sort(fn);\n        else\n            copy.sort();\n        return copy;\n    });\n}\nfunction chainSort(fn) {\n    return lift(sort(this, fn));\n}\nexport function orderBy(seq, by) {\n    var key, fn;\n    if (typeof by !== 'function') {\n        key = by;\n        fn = function (o) { return o[key]; };\n    }\n    else {\n        fn = by;\n    }\n    return S(function orderBy() {\n        var copy = seq().slice(0);\n        copy.sort(function (a, b) {\n            a = fn(a);\n            b = fn(b);\n            return a < b ? -1 : a > b ? 1 : 0;\n        });\n        return copy;\n    });\n}\nfunction chainOrderBy(by) {\n    return lift(orderBy(this, by));\n}\nexport function filter(seq, predicate) {\n    return S(function filter() {\n        var s = seq(), result = [], i, v;\n        for (i = 0; i < s.length; i++) {\n            v = s[i];\n            if (predicate(v))\n                result.push(v);\n        }\n        return result;\n    });\n}\nfunction chainFilter(predicate) {\n    return lift(filter(this, predicate));\n}\nexport function concat(seq) {\n    var others = [];\n    for (var _a = 1; _a < arguments.length; _a++) {\n        others[_a - 1] = arguments[_a];\n    }\n    return S(function concat() {\n        var s = seq();\n        for (var i = 0; i < others.length; i++) {\n            s = s.concat(others[i]());\n        }\n        return s;\n    });\n}\nfunction chainConcat() {\n    var others = [];\n    for (var _a = 0; _a < arguments.length; _a++) {\n        others[_a] = arguments[_a];\n    }\n    return lift(concat.apply(void 0, [this].concat(others)));\n}\nexport function reduce(seq, fn, seed) {\n    return S(function reduce() {\n        var s = seq(), result = seed instanceof Function ? seed() : seed;\n        for (var i = 0; i < s.length; i++) {\n            result = fn(result, s[i], i, s);\n        }\n        return result;\n    });\n}\nfunction chainReduce(fn, seed) {\n    return reduce(this, fn, seed);\n}\nexport function reduceRight(seq, fn, seed) {\n    return S(function reduceRight() {\n        var s = seq(), result = seed instanceof Function ? seed() : seed;\n        for (var i = s.length - 1; i >= 0; i--) {\n            result = fn(result, s[i], i, s);\n        }\n        return result;\n    });\n}\nfunction chainReduceRight(fn, seed) {\n    return reduceRight(this, fn, seed);\n}\nexport function every(seq, fn) {\n    return S(function every() {\n        var s = seq();\n        for (var i = 0; i < s.length; i++) {\n            if (!fn(s[i]))\n                return false;\n        }\n        return true;\n    });\n}\nfunction chainEvery(fn) {\n    return every(this, fn);\n}\nexport function some(seq, fn) {\n    return S(function some() {\n        var s = seq();\n        if (fn === undefined)\n            return s.length !== 0;\n        for (var i = 0; i < s.length; i++) {\n            if (fn(s[i]))\n                return true;\n        }\n        return false;\n    });\n}\nfunction chainSome(fn) {\n    return some(this, fn);\n}\nexport function reverse(seq) {\n    return S(function () {\n        var copy = seq().slice(0);\n        copy.reverse();\n        return copy;\n    });\n}\nfunction chainReverse() {\n    return lift(reverse(this));\n}\nexport function slice(seq, s, e) {\n    return S(function () {\n        return seq().slice(s, e);\n    });\n}\nfunction chainSlice(s, e) {\n    return lift(slice(this, s, e));\n}\n","import createSDataArray, { SDataArray } from 's-array';\nimport S, { DataSignal } from 's-js';\nimport { jsonable, Plain } from '../../utils/s';\nimport { Alert } from '../alerts/alerts-model';\nimport { Settings } from '../settings/settings-model';\nimport { YouTrackMetadata } from '../you-track-metadata/you-track-metadata-model';\n\n/**\n * The currently visible application page.\n */\nexport enum Page {\n  HOME = '',\n  WARNINGS = 'warnings',\n  SETTINGS = 'settings',\n}\n\n/**\n * Returns the given value if it is of type {@link Page}, or otherwise the given default value.\n */\nfunction ensurePage(value: Page, defaultValue: Page = Page.HOME): Page {\n  switch (value) {\n    case Page.HOME: case Page.WARNINGS: case Page.SETTINGS: return value;\n    default: return defaultValue;\n  }\n}\n\n/**\n * User-provided state of the application.\n *\n * The properties of this interface constitute user input. As such, it must be possible to reconstruct the application\n * state as defined by this interface after navigating back or forth, after a browser restart, or even on a new machine.\n *\n * The state contains [S.js](https://github.com/adamhaile/S) data signals. These signals allow declarative programming:\n * Any S.js computation based on a data signal will get updated whenever the data signal is updated.\n */\nexport interface App<T extends Settings> {\n  /**\n   * Data signal carrying the current page.\n   */\n  readonly currentPage: DataSignal<Page>;\n\n  /**\n   * The current settings.\n   */\n  readonly settings: T;\n}\n\n/**\n * Computed state of the application.\n *\n * The state defined by this interface is the result of a computation and therefore can be regenerated.\n */\nexport interface AppComputation {\n  /**\n   * Signal carrying the name of the application.\n   */\n  readonly name: DataSignal<string>;\n\n  /**\n   * Signal carrying the number of invalid settings.\n   *\n   * There are no constraints on what is a setting. For instance, multiple `<input>` elements may be aggregated in a\n   * single setting. Therefore, the only meaningful information conveyed to consumers of this signal is whether there\n   * are any invalid settings at all and that the number of invalid settings has changed.\n   */\n  readonly numInvalidSettings: DataSignal<number>;\n\n  /**\n   * Array signal carrying the list of alerts currently shown.\n   */\n  readonly alerts: SDataArray<Alert>;\n\n  /**\n   * Signal carrying YouTrack metadata, or `undefined` if metadata for the current base URL is not (yet) available.\n   */\n  readonly youTrackMetadata: DataSignal<YouTrackMetadata | undefined>;\n\n  /**\n   * Signal carrying the current progress (in percent) or `undefined` if no processing is currently happening.\n   */\n  readonly progress: DataSignal<number | undefined>;\n\n  /**\n   * Signal to trigger connecting to YouTrack.\n   */\n  readonly connect: DataSignal<null>;\n}\n\n/**\n * Returns a newly created object for keeping the user-provided application state.\n */\nexport function createApp<T extends Settings>(settings: T): App<T> {\n  return {\n    currentPage: jsonable(S.value(Page.HOME)),\n    settings,\n  };\n}\n\n/**\n * Returns a newly created object for keeping the computed application state.\n */\nexport function createAppComputation(): AppComputation {\n  return {\n    name: S.value(document.title),\n    numInvalidSettings: S.value(0),\n    alerts: createSDataArray<Alert>([]),\n    youTrackMetadata: S.value(undefined),\n    progress: S.value(undefined),\n    connect: S.data(null),\n  };\n}\n\n/**\n * Updates the application state to the given values in a plain JSON object.\n *\n * The update is performed within a single S.js transaction.\n *\n * @param app application state\n * @param plain Plain JSON object. This function cannot rely on static type checking, because the data may be user\n *     input.\n */\nexport function assignApp<T extends Settings>(app: App<T>, plain: Plain<App<T>>) {\n  S.freeze(() => {\n    app.currentPage(ensurePage(plain.currentPage));\n  });\n}\n","import S, { DataSignal } from 's-js';\nimport { jsonable, Plain } from '../../utils/s';\nimport { ensureNumber, ensureString, unreachableCase } from '../../utils/typescript';\n\nexport const DEFAULT_HOURS_PER_WEEK = 40;\nexport const DEFAULT_NUM_MEMBERS = 1;\n\nexport type Contributor = YouTrackContributor | ExternalContributor;\n\nexport interface ContributorBase {\n  readonly type: ContributorKind;\n  readonly hoursPerWeek: DataSignal<number>;\n}\n\nexport const enum ContributorKind {\n  YOU_TRACK,\n  EXTERNAL,\n}\n\n/**\n * Returns the given value if it is of type {@link ContributorKind}, or otherwise the given default value.\n */\nfunction ensureContributorKind(value: ContributorKind,\n    defaultValue: ContributorKind = ContributorKind.YOU_TRACK): ContributorKind {\n  switch (value) {\n    case ContributorKind.EXTERNAL: case ContributorKind.YOU_TRACK: return value;\n    default: return defaultValue;\n  }\n}\n\nexport interface ExternalContributor extends ContributorBase {\n  readonly type: ContributorKind.EXTERNAL;\n  readonly name: DataSignal<string>;\n  readonly numMembers: DataSignal<number>;\n}\n\nexport interface YouTrackContributor extends ContributorBase {\n  readonly type: ContributorKind.YOU_TRACK;\n  readonly id: string;\n}\n\n\n/**\n * Returns a newly created {@link Contributor} object with the values from the given plain JSON object.\n *\n * @param plain Plain JSON object. This function cannot rely on static type checking, because the data may be user\n *     input.\n */\nexport function createContributor(plain: Plain<Contributor>): Contributor {\n  // Type cast is necessary, because TypeScript cannot know that ensureContributorKind is the identity function (for\n  // well-formed input).\n  const plainCopy: Plain<Contributor> = {\n    ...plain,\n    type: ensureContributorKind(plain.type),\n  } as Plain<Contributor>;\n  switch (plainCopy.type) {\n    case ContributorKind.YOU_TRACK:\n      return createYouTrackContributor(plainCopy);\n    case ContributorKind.EXTERNAL:\n      return createExternalContributor(plainCopy);\n    default:\n      return unreachableCase(plainCopy);\n  }\n}\n\nfunction createExternalContributor(plain: Plain<ExternalContributor>): ExternalContributor {\n  return {\n    ...createContributorBase(plain),\n    type: ContributorKind.EXTERNAL,\n    name: jsonable(S.value(ensureString(plain.name))),\n    numMembers: jsonable(S.value(ensureNumber(plain.numMembers, DEFAULT_NUM_MEMBERS))),\n  };\n}\n\nfunction createYouTrackContributor(plain: Plain<YouTrackContributor>): YouTrackContributor {\n  return {\n    ...createContributorBase(plain),\n    type: ContributorKind.YOU_TRACK,\n    id: ensureString(plain.id),\n  };\n}\n\nfunction createContributorBase(plain: Plain<ContributorBase>): Pick<ContributorBase, 'hoursPerWeek'> {\n  return {\n    hoursPerWeek: jsonable(S.value(ensureNumber(plain.hoursPerWeek, DEFAULT_HOURS_PER_WEEK))),\n  };\n}\n","import createSDataArray, { SDataArray } from 's-array';\nimport S, { DataSignal } from 's-js';\nimport { jsonable, Plain } from '../../utils/s';\nimport { ensureNumber, ensureString } from '../../utils/typescript';\nimport {\n  Contributor,\n  createContributor,\n  DEFAULT_HOURS_PER_WEEK,\n  DEFAULT_NUM_MEMBERS,\n} from '../contributor/contributor-model';\n\n/**\n * Value for {@link ContributorEditArea.id} to indicate an external contributor.\n */\nexport const EXTERNAL_CONTRIBUTOR_VALUE = 'youtrack-planning-js/external';\n\nexport interface ContributorEditArea {\n  hoursPerWeek: DataSignal<number>;\n  id: DataSignal<string>;\n  name: DataSignal<string>;\n  numMembers: DataSignal<number>;\n}\n\nexport function createContributors(): SDataArray<Contributor> {\n  return jsonable(createSDataArray<Contributor>([]));\n}\n\nexport function createContributorEditArea() {\n  return {\n    hoursPerWeek: jsonable(S.value(DEFAULT_HOURS_PER_WEEK)),\n    id: jsonable(S.value('')),\n    name: jsonable(S.value('')),\n    numMembers: jsonable(S.value(DEFAULT_NUM_MEMBERS)),\n  };\n}\n\nexport function assignContributors(contributors: SDataArray<Contributor>, plain: Plain<Contributor>[]): void {\n  S.freeze(() => contributors(plain.map(createContributor)));\n}\n\nexport function assignContributorEditArea(contributorEditArea: ContributorEditArea, plain: Plain<ContributorEditArea>):\n    void {\n  S.freeze(() => {\n    contributorEditArea.hoursPerWeek(ensureNumber(plain.hoursPerWeek));\n    contributorEditArea.id(ensureString(plain.id));\n    contributorEditArea.name(plain.name);\n    contributorEditArea.numMembers(plain.numMembers);\n  });\n}\n","import { SArray, SDataArray } from 's-array';\nimport S from 's-js';\nimport { Counter } from '../../utils/counter';\nimport { Plain } from '../../utils/s';\nimport { unreachableCase } from '../../utils/typescript';\nimport { ContributorCtrl } from '../contributor/contributor-ctrl';\nimport { Contributor, ContributorKind, createContributor, DEFAULT_NUM_MEMBERS } from '../contributor/contributor-model';\nimport { ContributorEditArea, EXTERNAL_CONTRIBUTOR_VALUE } from './contributors-model';\n\nexport class ContributorsCtrl {\n  public readonly contributorCtrls: SArray<[Contributor, ContributorCtrl]>;\n\n  public readonly newEntryType = S(() => this.contributorEditArea_.id() === EXTERNAL_CONTRIBUTOR_VALUE\n      ? ContributorKind.EXTERNAL\n      : ContributorKind.YOU_TRACK\n  );\n\n  public constructor(\n      private readonly contributors_: SDataArray<Contributor>,\n      private readonly contributorEditArea_: ContributorEditArea,\n      createContributorCtrl: (contributor: Contributor) => ContributorCtrl,\n      invalidCounter: Counter\n  ) {\n    this.contributorCtrls = contributors_.map((contributor) => [contributor, createContributorCtrl(contributor)]);\n    invalidCounter.add(() => contributors_().length === 0);\n  }\n\n  public create(): void {\n    const id: string = this.contributorEditArea_.id();\n    const type: ContributorKind = this.newEntryType();\n    const sharedProperties = {\n      hoursPerWeek: this.contributorEditArea_.hoursPerWeek(),\n    };\n    let plainContributor: Plain<Contributor>;\n    switch (type) {\n      case ContributorKind.YOU_TRACK:\n        plainContributor = {\n          type,\n          id,\n          ...sharedProperties,\n        };\n        break;\n      case ContributorKind.EXTERNAL:\n        plainContributor = {\n          type,\n          name: this.contributorEditArea_.name(),\n          numMembers: this.contributorEditArea_.numMembers(),\n          ...sharedProperties,\n        };\n        this.contributorEditArea_.name('');\n        this.contributorEditArea_.numMembers(DEFAULT_NUM_MEMBERS);\n        break;\n      default: return unreachableCase(type);\n    }\n    this.contributorEditArea_.id('');\n    this.contributors_.push(createContributor(plainContributor));\n  }\n\n  public reset(): void {\n    this.contributorEditArea_.id('');\n  }\n}\n","export const FORM_GROUP_CLASS = 'form-group row';\nexport const LABEL_CLASS = 'col-form-label col-form-label-sm col-lg-3 text-lg-right';\nexport const OFFSET_CLASS = 'offset-lg-3';\nexport const INPUT_CLASS = 'form-control form-control-sm';\nexport const INPUT_CLASS_RIGHT = 'form-control form-control-sm text-right';\nexport const PLAINTEXT_CLASS = 'form-control-plaintext form-control-sm';\nexport const SELECT_CLASS = 'custom-select custom-select-sm';\nexport const EDIT_AREA_CLASS = 'col-lg-9';\nexport const HELP_CLASS = 'form-text text-muted';\nexport const CHECK_CLASS = 'form-check-input col-form-label-sm';\nexport const CHECK_LABEL_CLASS = 'form-check-label col-form-label-sm';\n\nexport const DRAGGABLE_HANDLE_CLASS = 'draggable-handle';\n","import * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { Counter } from '../../utils/counter';\nimport { bindNumber, bindString } from '../../utils/surplus';\nimport { User } from '../../youtrack-rest';\nimport { DRAGGABLE_HANDLE_CLASS, INPUT_CLASS, INPUT_CLASS_RIGHT, PLAINTEXT_CLASS } from '../bootstrap';\nimport { ContributorCtrl } from './contributor-ctrl';\nimport { Contributor, ContributorKind, YouTrackContributor } from './contributor-model';\n\nexport const MAX_PERSONS_PER_CONTRIBUTORS = 100;\nexport const MAX_HOURS_PER_WEEK = 7 * 24;\n\n// Unfortunately, Firefox does not automatically resize <input> element of type number to the maximum required width.\n// https://stackoverflow.com/questions/22590483/why-does-adding-min-max-properties-change-the-width-of-a-numeric-html5-input-ele\n// As a workaround, we set the width relative to the width of digit '0'. We include some extra digits to account for:\n// Padding on the left, padding on the right, and spin buttons.\nexport const INPUT_WIDTH_3_DIGITS: string = `${4 + Math.ceil(Math.log(MAX_HOURS_PER_WEEK) / Math.LN10)}ch`;\n\nexport interface ContributorProperties {\n  contributor: Contributor;\n  ctrl: ContributorCtrl;\n  youTrackUserMap: () => Map<string, User>;\n  readonly invalidCounter: Counter;\n}\n\nexport function ContributorView({contributor, ctrl, youTrackUserMap, invalidCounter}: ContributorProperties):\n    HTMLElement {\n  return (\n      <li class=\"list-group-item draggable d-flex\">\n        <div class={DRAGGABLE_HANDLE_CLASS}></div>\n        <div class=\"form-inline flex-grow-1\">\n          <div class=\"flex-fill mr-3 mb-1 mb-sm-0\">\n            {contributor.type === ContributorKind.EXTERNAL\n                ? <input class={`${INPUT_CLASS} w-100`} aria-label=\"Name of external contributor\" size={10} required\n                         fn={bindString(contributor.name, invalidCounter)} />\n                : <input class={PLAINTEXT_CLASS} aria-label=\"Name of YouTrack user\"\n                         readOnly value={youTrackUserName(contributor, youTrackUserMap)} />\n            }\n          </div>\n          {contributor.type === ContributorKind.EXTERNAL &&\n            <div class=\"input-group input-group-sm flex-nowrap mr-3 mb-1 mb-sm-0\">\n              <input type=\"number\" class={INPUT_CLASS_RIGHT} min=\"1\" max={MAX_PERSONS_PER_CONTRIBUTORS} required\n                aria-label=\"Number of persons\" style={{width: INPUT_WIDTH_3_DIGITS}}\n                fn={bindNumber(contributor.numMembers, invalidCounter)} />\n              <div class=\"input-group-append\">\n                <span class=\"input-group-text\"></span>\n              </div>\n            </div>\n          }\n          <div class=\"input-group input-group-sm flex-nowrap mr-3 mb-1 mb-sm-0\">\n            <input type=\"number\" class={INPUT_CLASS_RIGHT} min=\"1\" max={MAX_HOURS_PER_WEEK} required\n                   aria-label=\"Hours per week per person\" style={{width: INPUT_WIDTH_3_DIGITS}}\n                   fn={bindNumber(contributor.hoursPerWeek, invalidCounter)} />\n            <div class=\"input-group-append\">\n              <span class=\"input-group-text\">h/week</span>\n            </div>\n          </div>\n        </div>\n        <button type=\"button\" class=\"close\" aria-label=\"Remove contributor\" onClick={() => ctrl.remove()}>\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </li>\n  );\n}\n\n\nfunction youTrackUserName(contributor: YouTrackContributor, youTrackUserMapSignal: () => Map<string, User>) {\n  const userMap: Map<string, User> = youTrackUserMapSignal();\n  return userMap.has(contributor.id)\n    ? userMap.get(contributor.id)!.fullName\n    : `Unknown name (User ID = ${contributor.id})`;\n}\n","import { mapSample, SDataArray } from 's-array';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { Counter } from '../../utils/counter';\nimport { bindNumber, bindString, focusOnChangeToValue, sortableBindSarray, withClassIff } from '../../utils/surplus';\nimport { User } from '../../youtrack-rest';\nimport {\n  DRAGGABLE_HANDLE_CLASS,\n  EDIT_AREA_CLASS,\n  FORM_GROUP_CLASS,\n  HELP_CLASS,\n  INPUT_CLASS,\n  INPUT_CLASS_RIGHT,\n  LABEL_CLASS,\n  SELECT_CLASS,\n} from '../bootstrap';\nimport { Contributor, ContributorKind } from '../contributor/contributor-model';\nimport {\n  ContributorView,\n  INPUT_WIDTH_3_DIGITS,\n  MAX_HOURS_PER_WEEK,\n  MAX_PERSONS_PER_CONTRIBUTORS,\n} from '../contributor/contributor-view';\nimport { ContributorsCtrl } from './contributors-ctrl';\nimport { ContributorEditArea, EXTERNAL_CONTRIBUTOR_VALUE } from './contributors-model';\n\nexport interface ContributorsProperties {\n  readonly label: string;\n  readonly contributors: SDataArray<Contributor>;\n  readonly contributorEditArea: ContributorEditArea;\n  readonly ctrl: ContributorsCtrl;\n  readonly youTrackUserMap: () => Map<string, User>;\n  readonly invalidCounter: Counter;\n}\n\nexport function ContributorsView({label, contributors, contributorEditArea, ctrl, youTrackUserMap, invalidCounter}:\n    ContributorsProperties): HTMLElement {\n  return (\n      <div class={FORM_GROUP_CLASS}>\n        <label class={LABEL_CLASS}>{label}</label>\n        <div className={EDIT_AREA_CLASS}>\n          <Placeholder fn={withClassIff(() => contributors().length > 0, 'd-none')} />\n          <ul class=\"list-group mb-3\"\n              fn1={sortableBindSarray(contributors, {handle: `.${DRAGGABLE_HANDLE_CLASS}`})}\n              fn2={withClassIff(() => contributors().length === 0, 'd-none')}>\n            {mapSample(ctrl.contributorCtrls, ([contributor, contributorCtrl]) =>\n                <ContributorView contributor={contributor} ctrl={contributorCtrl} youTrackUserMap={youTrackUserMap}\n                                 invalidCounter={invalidCounter} />\n            )}\n          </ul>\n          <div class=\"list-group-add d-flex\">\n            <div class=\"form-inline flex-grow-1\">\n              <div class=\"flex-fill mr-3 mb-1 mb-sm-0\"\n                   fn={withClassIff(() => ctrl.newEntryType() === ContributorKind.EXTERNAL, 'd-none')}>\n                <select class={`${SELECT_CLASS} w-100`} fn={bindString(contributorEditArea.id)}>\n                  {contributorEditArea.id().length === 0 &&\n                    <option value=\"\" selected disabled>Choose to add</option>\n                  }\n                  <option value={EXTERNAL_CONTRIBUTOR_VALUE}>External contributor</option>\n                  <optgroup label=\"YouTrack Users\">\n                    {Array.from(youTrackUserMap().values(), (user) =>\n                        <option value={user.id}>{user.fullName}</option>\n                    )}\n                  </optgroup>\n                </select>\n              </div>\n              <div class=\"input-group input-group-sm flex-nowrap flex-fill mr-3 mb-1 mb-sm-0\"\n                   fn={withClassIff(() => ctrl.newEntryType() !== ContributorKind.EXTERNAL, 'd-none')}>\n                <input class={INPUT_CLASS} size={10} required aria-label=\"Name of external contributor\"\n                       fn1={bindString(contributorEditArea.name)}\n                       fn2={focusOnChangeToValue<ContributorKind>(ctrl.newEntryType, ContributorKind.EXTERNAL)} />\n                <div class=\"input-group-append\">\n                  <button type=\"button\" class=\"btn btn-outline-secondary\" onClick={() => ctrl.reset()}>Reset</button>\n                </div>\n              </div>\n              <div class=\"input-group input-group-sm flex-nowrap mr-3 mb-1 mb-sm-0\"\n                   fn={withClassIff(() => ctrl.newEntryType() !== ContributorKind.EXTERNAL, 'd-none')}>\n                <input type=\"number\" class={INPUT_CLASS_RIGHT} min=\"1\" max={MAX_PERSONS_PER_CONTRIBUTORS} required\n                       style={{width: INPUT_WIDTH_3_DIGITS}}\n                       aria-label=\"Number of persons\" fn={bindNumber(contributorEditArea.numMembers)} />\n                <div class=\"input-group-append\">\n                  <span class=\"input-group-text\"></span>\n                </div>\n              </div>\n              <div class=\"input-group input-group-sm flex-nowrap mr-3 mb-1 mb-sm-0\">\n                <input type=\"number\" class={INPUT_CLASS_RIGHT} min=\"1\" max={MAX_HOURS_PER_WEEK} required\n                       style={{width: INPUT_WIDTH_3_DIGITS}}\n                       aria-label=\"Hours per week per person\" fn={bindNumber(contributorEditArea.hoursPerWeek)} />\n                <div class=\"input-group-append\">\n                  <span class=\"input-group-text\">h/week</span>\n                </div>\n              </div>\n            </div>\n            <button type=\"button\" class=\"close\" aria-label=\"Add contributor\" onClick={() => ctrl.create()}>\n              <span aria-hidden=\"true\">+</span>\n            </button>\n          </div>\n          <small class={HELP_CLASS}>\n            Define one or more contributors who can be assigned work. A contributor is either a single YouTrack user or\n            an external contributor which can be a group of multiple people. After entering the details for a new\n            contributor, click the + button.\n          </small>\n        </div>\n      </div>\n  );\n}\n\nfunction Placeholder(): HTMLElement {\n  return (\n      <div class=\"form-control form-control-sm is-invalid mb-3\">\n        <label class=\"col-form-label col-form-label-sm list-placeholder\">None added</label>\n      </div>\n  );\n}\n","import S, { DataSignal } from 's-js';\nimport { jsonable, Plain } from '../../utils/s';\nimport { ensureBoolean, ensureString } from '../../utils/typescript';\n\n/**\n * Non-transient state of the settings UI component.\n */\nexport interface DependsLinkType {\n  readonly dependsLinkTypeId: DataSignal<string>;\n  readonly doesInwardDependOnOutward: DataSignal<boolean>;\n}\n\n/**\n * Creates a new state for the settings UI component.\n */\nexport function createDependsLinkType(): DependsLinkType {\n  return {\n    dependsLinkTypeId: jsonable(S.value('')),\n    doesInwardDependOnOutward: jsonable(S.value(true)),\n  };\n}\n\n/**\n * Updates the state of the settings UI component to the given values in a plain JSON object.\n *\n * The update is performed within a single S.js transaction.\n *\n * @param type state of the settings UI component\n * @param plain plain JSON object\n */\nexport function assignDependsLinkType(type: DependsLinkType, plain: Plain<DependsLinkType>):\n    void {\n  S.freeze(() => {\n    type.dependsLinkTypeId(ensureString(plain.dependsLinkTypeId));\n    type.doesInwardDependOnOutward(ensureBoolean(plain.doesInwardDependOnOutward));\n  });\n}\n","import S, { DataSignal } from 's-js';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { Counter } from '../utils/counter';\nimport { bindString, bindStringSet, bindToOnValue, withClassIff } from '../utils/surplus';\nimport {\n  CHECK_CLASS,\n  CHECK_LABEL_CLASS,\n  EDIT_AREA_CLASS,\n  FORM_GROUP_CLASS,\n  HELP_CLASS,\n  LABEL_CLASS,\n  SELECT_CLASS,\n} from './bootstrap';\n\n/**\n * Properties for every control in a form.\n */\nexport interface ControlProperties {\n  readonly id: string;\n  readonly label: string;\n}\n\n/**\n * Properties for {@link SelectView}.\n */\nexport interface SelectProperties<T> extends ControlProperties {\n  readonly required?: boolean;\n  readonly elementId: DataSignal<string>;\n  readonly elements: () => Map<string, T>;\n  readonly idFromElement: (element: T) => string;\n  readonly optionTextFromElement: (element: T) => string;\n  readonly invalidCounter?: Counter;\n  readonly children: JSX.Children;\n}\n\n/**\n * Returns a newly created `<select>` control for choosing at most one from a list of option.\n *\n * The control shows a disabled placeholder option if the current value is empty. If the current value is not available,\n * the control shows Unknown (ID: <YouTrack entity ID>) as select option, and this option is *not* disabled. (If it\n * was disabled, we would be running into [Firefox bug 1569314](https://bugzilla.mozilla.org/show_bug.cgi?id=1569314).)\n */\nexport function SelectView<T>({id, label, required = false, elementId, elements, idFromElement, optionTextFromElement,\n    invalidCounter, children}: SelectProperties<T>): HTMLElement {\n  return (\n      <div class={FORM_GROUP_CLASS}>\n        <label for={id} class={LABEL_CLASS}>{label}</label>\n        <div class={EDIT_AREA_CLASS}>\n          <select id={id} class={SELECT_CLASS} aria-describedby={`${id}Help`} required={required}\n                  fn={bindString(elementId, invalidCounter)}>\n            {!required &&\n                <option value=\"\">None</option>\n            }\n            <SinglePlaceholder defaultPlaceholder={!required ? undefined : 'None selected'}\n                               unknownIdPlaceholder={(unknownId) => `Unknown (ID: ${unknownId})`}\n                               selectedId={elementId()}\n                               choices={elements()} >\n              <option value={elementId()} selected disabled={elementId().length === 0} />\n            </SinglePlaceholder>\n            {Array.from(elements().values(), (element) =>\n                <option value={idFromElement(element)}\n                        selected={idFromElement(element) === S.sample(elementId)}>\n                  {optionTextFromElement(element)}\n                </option>\n            )}\n          </select>\n          <small id={`${id}Help`} class={HELP_CLASS}>{children}</small>\n        </div>\n      </div>\n  );\n}\n\n/**\n * Properties for {@link SecondarySelectView}.\n */\nexport interface SecondarySelectProperties<T> extends SelectProperties<T> {\n  readonly primaryElementId: () => string;\n}\n\n/**\n * Returns a secondary `<select>` control that allows to choose a single element.\n *\n * The element must differ from the value that (typically) is already the active value of another primary control.\n * If the current value is not available, the control shows Unknown (ID: <YouTrack entity ID>) as select option, and\n * this option is *not* disabled (see {@link SelectView}).\n */\nexport function SecondarySelectView<T>(\n    {id, label, elementId, elements, idFromElement, optionTextFromElement, primaryElementId, children}:\n    SecondarySelectProperties<T>): HTMLElement {\n  return <div class={FORM_GROUP_CLASS}>\n      <label for={id} class={LABEL_CLASS}>{label}</label>\n      <div class={EDIT_AREA_CLASS}>\n        <select id={id} class={SELECT_CLASS} aria-describedby={`${id}Help`}\n                fn={bindString(elementId)}>\n          <option value=\"\">None</option>\n          <SinglePlaceholder unknownIdPlaceholder={(unknownId) => `Unknown (ID: ${unknownId})`}\n                             selectedId={elementId()}\n                             choices={elements()}>\n            <option value={elementId()} selected />\n          </SinglePlaceholder>\n          {Array.from(elements().values(), (element) =>\n              <option value={idFromElement(element)}\n                      selected={idFromElement(element) === S.sample(elementId)}\n                      disabled={idFromElement(element) === primaryElementId()}>\n                {optionTextFromElement(element)}\n              </option>\n          )}\n        </select>\n        <small id={`${id}Help`} class={HELP_CLASS}>{children}</small>\n      </div>\n    </div>;\n}\n\n/**\n * Properties for {@link MultiSelectView}.\n */\nexport interface MultiSelectProperties<T> extends ControlProperties {\n  readonly elementIds: DataSignal<Set<string>>;\n  readonly bundleElements: () => Map<string, T>;\n  readonly idFromElement: (element: T) => string;\n  readonly optionTextFromElement: (element: T) => string;\n  readonly children: JSX.Children;\n}\n\n/**\n * Returns a `<select multiple>` control that allows to choose zero or more elements.\n *\n * The user may choose zero or more elements, so the input is assumed to be always valid.\n */\nexport function MultiSelectView<T>(\n    {id, label, elementIds, bundleElements, idFromElement, optionTextFromElement, children}: MultiSelectProperties<T>):\n    HTMLElement {\n  return <div class={FORM_GROUP_CLASS}>\n        <label for={id} class={LABEL_CLASS}>{label}</label>\n        <div class={EDIT_AREA_CLASS}>\n          <select id={id} class={SELECT_CLASS} multiple\n                  aria-describedby={`${id}Help`} fn={bindStringSet(elementIds)}>\n            {multiplePlaceholders(elementIds(), bundleElements(), (inactiveStateId) =>\n                <option value={inactiveStateId} selected>Unknown (ID: {inactiveStateId})</option>\n            )}\n            {Array.from(bundleElements().values(), (bundleElement) =>\n              <option value={idFromElement(bundleElement)}\n                      selected={S.sample(elementIds).has(idFromElement(bundleElement))}>\n                {optionTextFromElement(bundleElement)}\n              </option>\n            )}\n          </select>\n          <small id={`${id}Help`} class={HELP_CLASS}>{children}</small>\n        </div>\n      </div>;\n}\n\n/**\n * Properties for {@link RadioToggleView}.\n */\nexport interface ToggleProperties extends ControlProperties {\n  readonly value: DataSignal<boolean>;\n  readonly names: () => [string, string];\n  readonly children: JSX.Children;\n}\n\nexport function RadioToggleView({id, label, value, names, children}: ToggleProperties): HTMLElement {\n  return <div class={FORM_GROUP_CLASS}>\n      <label for={id} class={LABEL_CLASS}>{label}</label>\n      <fieldset id={id} class={EDIT_AREA_CLASS} aria-describedby={`${id}Help`}>\n        <div class=\"form-check form-check-inline\">\n          <input class={CHECK_CLASS} type=\"radio\" id={`${id}True`}\n                 fn={bindToOnValue(value, true)}  />\n          <label class={CHECK_LABEL_CLASS} for={`${id}True`}>\n            {names()[0]}\n          </label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n          <input class={CHECK_CLASS} type=\"radio\" id={`${id}False`}\n                 fn={bindToOnValue(value, false)}/>\n          <label class={CHECK_LABEL_CLASS} for={`${id}False`}>\n            {names()[1]}\n          </label>\n        </div>\n        <small id={`${id}Help`} class={HELP_CLASS}>{children}</small>\n      </fieldset>\n    </div>;\n}\n\nexport interface ProgressBarProperties {\n  className?: string;\n  progress: () => number | undefined;\n}\n\nexport function ProgressBarView({className, progress}: ProgressBarProperties): HTMLElement {\n  return (\n      <div class={`progress ${className || ''}`} fn={withClassIff(() => progress() === undefined, 'd-none')}>\n        <div class=\"progress-bar progress-bar-striped progress-bar-animated\"\n             role=\"progressbar\" aria-valuenow={asString(progress)} aria-valuemin=\"0\" aria-valuemax=\"100\"\n             style={{width: asString(progress, '%')}} />\n      </div>\n  );\n}\n\n\n/**\n * Properties for {@link SinglePlaceholder}.\n */\ninterface SinglePlaceholderProperties {\n  readonly defaultPlaceholder?: string;\n  readonly unknownIdPlaceholder: (unknownId: string) => string;\n  readonly selectedId: string;\n  readonly choices: Map<string, unknown> | Set<string>;\n  readonly children: JSX.Element;\n}\n\n/**\n * Returns the `children` property (typically an `<option>` element) if certain conditions are met, or otherwise `null`.\n *\n * The {@link HTMLElement.innerText} of the placeholder is set to:\n * - the result of `unknownIdPlaceholder(selectedId)` if `selectedId` is contained in `choices`\n * - `defaultPlaceholder` if it is defined and if `selectedId` is empty.\n *\n * @return in the two cases above, the placeholder (that is, the `children` property), otherwise `null`\n */\nfunction SinglePlaceholder({defaultPlaceholder, unknownIdPlaceholder, selectedId, choices, children}:\n    SinglePlaceholderProperties): JSX.Element | null {\n  const existsAsOption: boolean = choices.has(selectedId);\n\n  let text: string = '';\n  if (!existsAsOption && selectedId.length > 0) {\n    text = unknownIdPlaceholder(selectedId);\n  } else if (defaultPlaceholder !== undefined && selectedId.length === 0) {\n    text = defaultPlaceholder;\n  }\n\n  if (text.length > 0) {\n    children.innerText = text;\n    return children;\n  } else {\n    return null;\n  }\n}\n\nfunction multiplePlaceholders(selectedIds: Set<string>, choices: Map<string, unknown>,\n    elementFactory: (selectedId: string) => JSX.Element): JSX.Element[] {\n  return Array.from(selectedIds)\n      .filter((inactiveStateId) => !choices.has(inactiveStateId))\n      .map(elementFactory);\n}\n\nfunction asString(progress: () => number | undefined, unit: string = ''): string {\n  const currentProgress: number | undefined = progress();\n  const value: number = currentProgress === undefined || currentProgress < 0\n      ? 0\n      : Math.min(100, currentProgress);\n  return value === 0\n      ? value.toString()\n      : `${value}${unit}`;\n}\n","import * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { BundleElement, CustomField, IssueLinkType, SavedQuery } from '../youtrack-rest';\nimport {\n  MultiSelectProperties,\n  MultiSelectView,\n  SecondarySelectProperties,\n  SecondarySelectView,\n  SelectProperties,\n  SelectView,\n} from './base-views';\n\ntype StandardProperties = 'idFromElement' | 'optionTextFromElement';\ntype ElementIdAndElements = Pick<SelectProperties<CustomField>, 'elementId' | 'elements'>;\n\nexport function IssueFieldView({id, label, required, elementId, elements, invalidCounter, children}:\n    Omit<SelectProperties<CustomField>, StandardProperties>): HTMLElement {\n  return (\n      <SelectView id={id} label={label} required={required} elementId={elementId} elements={elements}\n                  idFromElement={(field) => field.id}\n                  optionTextFromElement={(field) => field.name}\n                  invalidCounter={invalidCounter}>\n        {children}\n      </SelectView>\n  );\n}\n\n/**\n * Returns a control that allows to choose the assignee custom field.\n *\n * The assignee custom field is assumed to be optional (and hence the input is always valid, even if empty).\n */\nexport function AssigneeFieldView({elementId, elements}: ElementIdAndElements): HTMLElement {\n  return (\n      <IssueFieldView id=\"assigneeField\" label=\"Assignee Field:\" elementId={elementId} elements={elements}>\n        The custom field (of type user) that contains the assignee.\n      </IssueFieldView>\n  );\n}\n\n/**\n * Returns a control that allows to choose the issue type custom field.\n *\n * The issue type custom field is assumed to be optional (and hence the input is always valid, even if empty).\n */\nexport function IssueTypeFieldView({elementId, elements}: ElementIdAndElements): HTMLElement {\n  return (\n      <IssueFieldView id=\"typeField\" label=\"Type Field:\" elementId={elementId} elements={elements}>\n        The custom field (of type enum) that contains the issue type.\n      </IssueFieldView>\n  );\n}\n\nexport function LinkTypeView({id, label, required, elementId, elements, invalidCounter, children}:\n    Omit<SelectProperties<IssueLinkType>, StandardProperties>): HTMLElement {\n  return (\n      <SelectView id={id} label={label} required={required} elementId={elementId} elements={elements}\n                  idFromElement={(linkType) => linkType.id}\n                  optionTextFromElement={(linkType) =>\n                      `${linkType.name} (${linkType.sourceToTarget}  ${linkType.targetToSource})`}\n                  invalidCounter={invalidCounter}>\n        {children}\n      </SelectView>\n  );\n}\n\nexport function SavedQueryView({id, label, elementId, elements, invalidCounter, children}:\n    Omit<SelectProperties<SavedQuery>, StandardProperties>): HTMLElement {\n  return (\n      <SelectView id={id} label={label} required elementId={elementId} elements={elements}\n                  idFromElement={idFromElement} optionTextFromElement={optionTextFromSavedQuery}\n                  invalidCounter={invalidCounter}>\n        {children}\n      </SelectView>\n  );\n}\n\nexport function OverlaySavedQueryView({id, label, elementId, elements, primaryElementId, children}:\n    Omit<SecondarySelectProperties<SavedQuery>, StandardProperties>): HTMLElement {\n  return (\n      <SecondarySelectView id={id} label={label} elementId={elementId} elements={elements}\n                           idFromElement={idFromElement} optionTextFromElement={optionTextFromSavedQuery}\n                           primaryElementId={primaryElementId}>\n        {children}\n      </SecondarySelectView>\n  );\n}\n\nexport function BundleElementsView({id, label, elementIds, bundleElements, children}:\n    Omit<MultiSelectProperties<BundleElement>, StandardProperties>): HTMLElement {\n  return (\n      <MultiSelectView id={id} label={label} elementIds={elementIds} bundleElements={bundleElements}\n                          idFromElement={idFromElement} optionTextFromElement={optionTextFromElement}>\n        {children}\n      </MultiSelectView>\n  );\n}\n\n\nfunction idFromElement(element: {id: string}): string {\n  return element.id;\n}\n\nfunction optionTextFromElement(element: {name: string}): string {\n  return element.name;\n}\n\nfunction optionTextFromSavedQuery(savedQuery: SavedQuery): string {\n  return `${savedQuery.name} (${savedQuery.owner.fullName})`;\n}\n","import * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { Counter } from '../../utils/counter';\nimport { IssueLinkType } from '../../youtrack-rest';\nimport { RadioToggleView } from '../base-views';\nimport { LinkTypeView } from '../you-track-base-views';\nimport { DependsLinkType } from './depends-link-type-model';\n\nexport interface DependsLinkTypeProperties {\n  readonly dependsLinkType: DependsLinkType;\n  readonly directedIssueLinkTypes: () => Map<string, IssueLinkType>;\n  readonly invalidCounter: Counter;\n}\n\n/**\n * Returns a control that allows to choose the finish-to-start dependency link type.\n *\n * The bound value is assumed to be required.\n */\nexport function DependsLinkTypeView(\n    {dependsLinkType, directedIssueLinkTypes, invalidCounter}: DependsLinkTypeProperties): HTMLElement {\n  return (\n      <div>\n        <LinkTypeView id=\"dependsLinkType\" label=\"Dependency Link:\" required\n                      elementId={dependsLinkType.dependsLinkTypeId} elements={directedIssueLinkTypes}\n                      invalidCounter={invalidCounter}>\n          The type of issue link that indicates a finish-to-start dependency.\n        </LinkTypeView>\n        <RadioToggleView id=\"doesInwardDependOnOutward\" label=\"A before B:\"\n                         value={dependsLinkType.doesInwardDependOnOutward}\n                         names={() => issueLinkDirectionNames(\n                             directedIssueLinkTypes, dependsLinkType.dependsLinkTypeId)}>\n          The side of a dependency link synonymous with needs to be finished before.\n        </RadioToggleView>\n      </div>\n  );\n}\n\n\nfunction issueLinkDirectionNames(\n    directedIssueLinkTypes: () => Map<string, IssueLinkType>, dependsLinkTypeId: () => string): [string, string] {\n  const issueLinkType: IssueLinkType | undefined = directedIssueLinkTypes().get(dependsLinkTypeId());\n  return issueLinkType === undefined\n      ? ['A  B', 'A  B']\n      : [`A ${issueLinkType.sourceToTarget} B`, `A ${issueLinkType.targetToSource} B`];\n}\n","import { DataSignal } from 's-js';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { withClassIff } from '../../utils/surplus';\nimport { Page } from '../app/app-model';\nimport { ProgressBarView } from '../base-views';\n\nexport interface NavProperties {\n  className?: string;\n  appName: () => string;\n  currentPage: () => Page;\n  progress: () => number | undefined;\n  numWarnings: () => number;\n  isActionBtnVisible: () => boolean;\n  actionBtnLabel: () => string;\n  actionSignal: DataSignal<null>;\n  children?: JSX.Element | JSX.Element[];\n}\n\nexport function NavView({className, appName, currentPage, progress, numWarnings, isActionBtnVisible, actionBtnLabel,\n    actionSignal, children}: NavProperties): HTMLElement {\n  return (\n      <nav class={append('navbar navbar-expand navbar-light bg-light', className)}>\n        <ProgressBarView className=\"progress-navbar\" progress={progress} />\n        <a class=\"navbar-brand d-none d-md-inline-block\">{appName()}</a>\n        <ul class=\"navbar-nav mr-auto ml-n2 ml-md-0\">\n          <li class=\"nav-item\" fn={withClassIff(() => currentPage() === Page.HOME, 'active')}>\n            <a class=\"nav-link text-nowrap\" href={href(Page.HOME)}>\n              \n              <span class=\"ml-sm-1 d-none d-sm-inline\">Project Plan</span>\n            </a>\n          </li>\n          <li class=\"nav-item\" fn={withClassIff(() => currentPage() === Page.WARNINGS, 'active')}>\n            <a class=\"nav-link text-nowrap\" href={href(Page.WARNINGS)}>\n              \n              <span class=\"ml-sm-1 d-none d-sm-inline\">Warnings</span>\n              &nbsp;\n              <span class=\"badge badge-warning\"\n                    fn={withClassIff(() => numWarnings() === 0, 'd-none')}>\n                {numWarnings()}\n              </span>\n            </a>\n          </li>\n          <li class=\"nav-item\" fn={withClassIff(() => currentPage() === Page.SETTINGS, 'active')}>\n            <a class=\"nav-link text-nowrap\" href={href(Page.SETTINGS)}>\n              \n              <span class=\"ml-sm-1 d-none d-sm-inline\">Settings</span>\n            </a>\n          </li>\n        </ul>\n        {children}\n        <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onClick={() => actionSignal(null)}\n                fn={withClassIff(() => !isActionBtnVisible(), 'd-none')}>\n          {actionBtnLabel()}\n        </button>\n      </nav>\n  );\n}\n\n\nfunction append(list: string, additional: string | undefined) {\n  return additional === undefined\n    ? list\n    : `${list} ${additional}`;\n}\n\nfunction href(page: Page): string {\n  return `#/${page}`;\n}\n","import S from 's-js';\nimport {\n  CustomField,\n  EnumBundleCustomFieldDefaults,\n  EnumBundleElement,\n  StateBundleCustomFieldDefaults,\n  StateBundleElement,\n} from '../../youtrack-rest';\nimport { ContributorsCtrl } from '../contributors/contributors-ctrl';\nimport { SettingsCtrl } from '../settings/settings-ctrl';\nimport { YouTrackMetadataCtrl } from '../you-track-metadata/you-track-metadata-ctrl';\nimport { ProjectPlanningSettings } from './project-planning-settings-model';\n\n/**\n * Controller for settings related to project planning (YouTrack custom fields, list of available resources, etc.).\n */\nexport class ProjectPlanningSettingsCtrl {\n  public readonly enumFields: () => Map<string, CustomField>;\n  public readonly periodFields: () => Map<string, CustomField>;\n  public readonly stateFields: () => Map<string, CustomField>;\n  public readonly userFields: () => Map<string, CustomField>;\n  public readonly states: () => Map<string, StateBundleElement>;\n  public readonly types: () => Map<string, EnumBundleElement>;\n\n  public constructor(\n      private readonly settings_: ProjectPlanningSettings,\n      public readonly settingsCtrl: SettingsCtrl,\n      public readonly youTrackMetadataCtrl: YouTrackMetadataCtrl,\n      public readonly contributorsCtrl: ContributorsCtrl\n  ) {\n    this.enumFields = youTrackMetadataCtrl.mapOfCustomFieldTypes('enum[1]');\n    this.periodFields = youTrackMetadataCtrl.mapOfCustomFieldTypes('period');\n    this.stateFields = youTrackMetadataCtrl.mapOfCustomFieldTypes('state[1]');\n    this.userFields = youTrackMetadataCtrl.mapOfCustomFieldTypes('user[1]');\n    this.states = S(() => {\n      const customField: CustomField | undefined = this.stateFields().get(this.settings_.stateFieldId());\n      const array: StateBundleElement[] = customField === undefined\n          ? []\n          : (customField.fieldDefaults as StateBundleCustomFieldDefaults).bundle.values\n              .filter((stateBundleElement) => !stateBundleElement.isResolved)\n              .sort((left, right) => left.ordinal - right.ordinal);\n      return array.reduce((map, element) => map.set(element.id, element), new Map<string, StateBundleElement>());\n    });\n    this.types = S(() => {\n      const customField: CustomField | undefined = this.enumFields().get(this.settings_.typeFieldId());\n      const array: EnumBundleElement[] = customField === undefined\n          ? []\n          : (customField.fieldDefaults as EnumBundleCustomFieldDefaults).bundle.values\n              .sort((left, right) => left.ordinal - right.ordinal);\n      return array.reduce((map, element) => map.set(element.id, element), new Map<string, EnumBundleElement>());\n    });\n\n    // If saved search and overlay are the same, set the overlay to none.\n    S(() => {\n      if (this.settings_.savedQueryId() === this.settings_.overlaySavedQueryId()) {\n        this.settings_.overlaySavedQueryId('');\n      }\n    });\n  }\n}\n","export function deepEquals<T>(left: T, right: T): boolean {\n  if (Object.is(left, right)) {\n    return true;\n  } else if (typeof left !== typeof right) {\n    return false;\n  }\n\n  if (Array.isArray(left)) {\n    if (!Array.isArray(right)) {\n      return false;\n    }\n    if (left.length !== right.length) {\n      return false;\n    }\n    const length = left.length;\n    for (let i = 0; i < length; ++i) {\n      if (!deepEquals(left[i], right[i])) {\n        return false;\n      }\n    }\n    return true;\n  } else if (typeof left === 'object') {\n    const leftKeys: string[] = Object.keys(left);\n    const rightKeys: string[] = Object.keys(right);\n    if (leftKeys.length !== rightKeys.length) {\n      return false;\n    }\n\n    for (const leftKey of leftKeys) {\n      if (!(right as {}).hasOwnProperty(leftKey) ||\n          !deepEquals((left as Record<string, any>)[leftKey], (right as Record<string, any>)[leftKey])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n","import { SDataArray } from 's-array';\nimport { Contributor } from './contributor-model';\n\nexport class ContributorCtrl {\n  public constructor(\n      private readonly contributor_: Contributor,\n      private readonly contributors_: SDataArray<Contributor>\n  ) { }\n\n  public remove(): void {\n    this.contributors_.remove(this.contributor_);\n  }\n}\n","import {\n  appendSchedule,\n  Contributor,\n  Failure,\n  isFailure,\n  ProjectPlan,\n  retrieveProjectPlan,\n  RetrieveProjectPlanOptions,\n  Schedule,\n  scheduleUnresolved,\n  SchedulingOptions,\n  YouTrackConfig,\n  YouTrackIssue,\n} from '@fschopp/project-planning-for-you-track';\nimport { strict as assert } from 'assert';\nimport S, { DataSignal } from 's-js';\nimport { deepEquals } from '../../utils/deep-equals';\nimport { Plain } from '../../utils/s';\nimport { unreachableCase } from '../../utils/typescript';\nimport { AppCtrl } from '../app/app-ctrl';\nimport { App, Page } from '../app/app-model';\nimport { ContributorCtrl } from '../contributor/contributor-ctrl';\nimport { Contributor as ContributorModel, ContributorKind } from '../contributor/contributor-model';\nimport { ContributorsCtrl } from '../contributors/contributors-ctrl';\nimport { ProjectPlanningSettingsCtrl } from '../project-planning-settings/project-planning-settings-ctrl';\nimport { ProjectPlanningSettings } from '../project-planning-settings/project-planning-settings-model';\nimport { toNormalizedPlainSettings } from '../settings/settings-model';\nimport { YouTrackMetadata } from '../you-track-metadata/you-track-metadata-model';\nimport { ProjectPlanningAppComputation } from './project-planning-app-model';\n\nconst MIN_STATE_CHANGE_DURATION_MS = 60 * 60 * 1000;\nconst DEFAULT_REMAINING_EFFORT_MS = 0;\nconst DEFAULT_WAIT_TIME_MS = 0;\n\n/**\n * Resolution is 1 hour.\n */\nconst SCHEDULING_RESOLUTION_MS = 60 * 60 * 1000;\n\n/**\n * Cannot preempt or split issues that are less than 4 hours ideal time.\n */\nconst MIN_ACTIVITY_DURATION = 4;\n\n/**\n * Prefix for the IDs of external contributors.\n *\n * No YouTrack user ID must have the same prefix. Given that all\n * [YouTrack IDs are of form \"x-y\" where both x and y are integers](https://github.com/JetBrains/xodus/blob/master/entity-store/src/main/java/jetbrains/exodus/entitystore/PersistentEntityId.java)\n * (see also the\n * [`EntityId` interface](https://github.com/JetBrains/xodus/blob/master/openAPI/src/main/java/jetbrains/exodus/entitystore/EntityId.java)),\n * anything starting with a non-numeric character should already be safe.\n */\nconst EXTERNAL_CONTRIBUTOR_ID_PREFIX = '@fschopp/project-planning-ui-for-you-track/';\n\nexport enum Action {\n  COMPLETE_SETTINGS = 'complete',\n  CONNECT = 'connect',\n  BUILD_PLAN = 'build',\n  UPDATE_PREDICTION = 'update',\n  STOP = 'stop',\n  NOTHING = 'nothing',\n}\n\n/**\n * Project plan together the settings used to compute it.\n */\nexport interface ExtendedProjectPlan {\n  /**\n   * The project plan.\n   */\n  plan: ProjectPlan;\n\n  /**\n   * The settings from the user interface.\n   *\n   * The settings are guaranteed to have been normalized with {@link toNormalizedPlainSettings}().\n   */\n  settings: Plain<ProjectPlanningSettings>;\n\n  /**\n   * Time when the YouTrack activity log had been completely received and processed.\n   */\n  youTrackTimestamp: number;\n\n  /**\n   * Mapping from contributor IDs in {@link plan} to the index of the corresponding contributor in the\n   * {@link ProjectPlanningSettings.contributors} property of {@link settings}.\n   */\n  idToContributorIdx: Map<string, number>;\n}\n\n/**\n * Controller for {@link App}.\n */\nexport class ProjectPlanningAppCtrl {\n  /**\n   * Signal carrying the kind of action triggered by the button in the nav bar.\n   */\n  public readonly action: () => Action;\n\n  /**\n   * Signal carrying the latest project plan and the settings used to compute it, or undefined if no project plan was\n   * computed yet.\n   *\n   * The settings are the result of {@link toNormalizedPlainSettings}(); that is, they are normalized.\n   */\n  public readonly extendedProjectPlan: () => ExtendedProjectPlan | undefined;\n\n  /**\n   * Signal carrying the number of warnings in the project plan.\n   */\n  public readonly numWarnings: () => number;\n\n\n  private readonly extendedProjectPlan_: DataSignal<ExtendedProjectPlan | undefined> = S.value(undefined);\n  private retrievedProjectPlanTimestamp_: number | undefined;\n  private retrieveProjectPlanResult_: ProjectPlan | undefined;\n\n\n  public static createDefaultProjectPlanningAppCtrl(\n      app: App<ProjectPlanningSettings>, appComputation: ProjectPlanningAppComputation): ProjectPlanningAppCtrl {\n    const appCtrl: AppCtrl<ProjectPlanningSettings> = AppCtrl.createDefaultAppCtrl(app, appComputation);\n    const createContributorCtrl = (contributor: ContributorModel): ContributorCtrl =>\n        new ContributorCtrl(contributor, app.settings.contributors);\n    const contributorsCtrl: ContributorsCtrl = new ContributorsCtrl(\n        app.settings.contributors, app.settings.transient, createContributorCtrl, appCtrl.invalidCounter);\n    const settingsCtrl: ProjectPlanningSettingsCtrl = new ProjectPlanningSettingsCtrl(\n        app.settings, appCtrl.settingsCtrl, appCtrl.youTrackMetadataCtrl, contributorsCtrl);\n    return new ProjectPlanningAppCtrl(app, appComputation, appCtrl, settingsCtrl);\n  }\n\n  /**\n   * Constructor.\n   *\n   * @param app_ The user-provided application state.\n   * @param appComputation_ The computed application state.\n   * @param appCtrl Controller for {@link App}.\n   * @param settingsCtrl Controller for {@link ProjectPlanningSettings}.\n   */\n  public constructor(\n      private readonly app_: App<ProjectPlanningSettings>,\n      private readonly appComputation_: ProjectPlanningAppComputation,\n      public readonly appCtrl: AppCtrl<ProjectPlanningSettings>,\n      public readonly settingsCtrl: ProjectPlanningSettingsCtrl\n  ) {\n    this.action = S(() => actionFromState(\n        this.appComputation_.progress(), this.appCtrl.youTrackMetadataCtrl.pendingMetadata(),\n        this.appComputation_.youTrackMetadata(), this.extendedProjectPlan_(),\n        toNormalizedPlainSettings(this.app_.settings), app_.currentPage(), appComputation_.numInvalidSettings() === 0));\n    this.extendedProjectPlan = this.extendedProjectPlan_;\n    this.numWarnings = S(() => {\n      const extendedProjectPlan: ExtendedProjectPlan | undefined = this.extendedProjectPlan();\n      return extendedProjectPlan === undefined\n          ? 0\n          : extendedProjectPlan.plan.warnings.length;\n    });\n\n    // 'seed' is undefined (the calculation does not keep a state), and 'onchanges' is true (skip the initial run).\n    S.on(this.appComputation_.doAction, () => this.defaultAction(), undefined, true);\n  }\n\n  public defaultAction(): void {\n    const action: Action = this.action();\n    switch (action) {\n      case Action.COMPLETE_SETTINGS: this.app_.currentPage(Page.SETTINGS); return;\n      case Action.CONNECT: this.appComputation_.connect(null); return;\n      case Action.BUILD_PLAN:\n        return this.appCtrl.showErrorIfFailure(\n            'Failed to build project plan',\n            this.buildPlan(toNormalizedPlainSettings(this.app_.settings))\n        );\n      case Action.UPDATE_PREDICTION:\n        return this.appCtrl.showErrorIfFailure(\n            'Failed to update prediction',\n            this.updatePrediction(toNormalizedPlainSettings(this.app_.settings))\n        );\n      case Action.STOP: case Action.NOTHING: return;\n      default: return unreachableCase(action);\n    }\n  }\n\n  private async buildPlan(currentConfig: Plain<ProjectPlanningSettings>): Promise<void> {\n    const typeFieldId = currentConfig.typeFieldId;\n    const splittableTypeIds = new Set<string>(currentConfig.splittableTypeIds);\n    const youTrackConfig: YouTrackConfig = {\n      stateFieldId: currentConfig.stateFieldId,\n      inactiveStateIds: currentConfig.inactiveStateIds,\n      remainingEffortFieldId: currentConfig.remainingEffortFieldId,\n      remainingWaitFieldId: currentConfig.remainingWaitFieldId,\n      assigneeFieldId: currentConfig.assigneeFieldId,\n      otherCustomFieldIds: [typeFieldId],\n      dependsLinkTypeId: currentConfig.dependsLinkTypeId,\n      doesInwardDependOnOutward: currentConfig.doesInwardDependOnOutward,\n      savedQueryId: currentConfig.savedQueryId,\n      overlaySavedQueryId: currentConfig.overlaySavedQueryId,\n      minStateChangeDurationMs: MIN_STATE_CHANGE_DURATION_MS,\n      defaultRemainingEffortMs: DEFAULT_REMAINING_EFFORT_MS,\n      defaultWaitTimeMs: DEFAULT_WAIT_TIME_MS,\n      isSplittableFn: (issue: YouTrackIssue) => {\n        const value: string | undefined = issue.customFields[typeFieldId];\n        return splittableTypeIds.has(value);\n      },\n    };\n    const options: RetrieveProjectPlanOptions = {\n      progressCallback: (percentDone) => this.appComputation_.progress(percentDone),\n    };\n    this.retrieveProjectPlanResult_ = await retrieveProjectPlan(\n        this.appCtrl.settingsCtrl.normalizedBaseUrl(),\n        youTrackConfig,\n        options\n    );\n    this.retrievedProjectPlanTimestamp_ = Date.now();\n    await this.updatePrediction(currentConfig);\n  }\n\n  private async updatePrediction(currentConfig: Plain<ProjectPlanningSettings>): Promise<void> {\n    const youTrackMetadata: YouTrackMetadata | undefined = this.appComputation_.youTrackMetadata();\n    assert(this.retrieveProjectPlanResult_ !== undefined && youTrackMetadata !== undefined &&\n        this.retrievedProjectPlanTimestamp_ !== undefined);\n\n    const contributors: Contributor[] = [];\n    const idToContributorIdx = new Map<string, number>();\n    currentConfig.contributors.forEach((contributor, index) => {\n      let id: string;\n      let numMembers: number;\n      if (contributor.type === ContributorKind.EXTERNAL) {\n        id = `${EXTERNAL_CONTRIBUTOR_ID_PREFIX}${idToContributorIdx.size}`;\n        numMembers = contributor.numMembers;\n      } else {\n        id = contributor.id;\n        numMembers = 1;\n      }\n      idToContributorIdx.set(id, index);\n      contributors.push({\n        id,\n        minutesPerWeek: 60 * contributor.hoursPerWeek,\n        numMembers,\n      });\n    });\n    const schedulingOptions: SchedulingOptions = {\n      contributors,\n      minutesPerWeek: youTrackMetadata!.minutesPerWorkWeek,\n      resolutionMs: SCHEDULING_RESOLUTION_MS,\n      minActivityDuration: MIN_ACTIVITY_DURATION,\n      predictionStartTimeMs: this.retrievedProjectPlanTimestamp_,\n    };\n    const schedule: Schedule = await scheduleUnresolved(\n        this.retrieveProjectPlanResult_!.issues, schedulingOptions);\n    const finalPlan: ProjectPlan | Failure = appendSchedule(\n        this.retrieveProjectPlanResult_!, schedule, schedulingOptions.predictionStartTimeMs!);\n    if (isFailure(finalPlan)) {\n      throw finalPlan;\n    } else {\n      this.extendedProjectPlan_({\n        plan: finalPlan,\n        settings: currentConfig,\n        youTrackTimestamp: this.retrievedProjectPlanTimestamp_!,\n        idToContributorIdx,\n      });\n    }\n  }\n}\n\nfunction actionFromState(progress: number | undefined, pendingMetadata: boolean,\n    youTrackMetadata: YouTrackMetadata | undefined, extendedProjectPlan: ExtendedProjectPlan | undefined,\n    currentSettings: Plain<ProjectPlanningSettings>, currentPage: Page, validSettings: boolean): Action {\n  if (progress !== undefined || pendingMetadata) {\n    return Action.STOP;\n  } else if (!validSettings) {\n    return currentPage === Page.SETTINGS\n        ? Action.NOTHING\n        : Action.COMPLETE_SETTINGS;\n  } else if (youTrackMetadata === undefined) {\n    return Action.CONNECT;\n  } else if (extendedProjectPlan === undefined) {\n    return Action.BUILD_PLAN;\n  }\n\n  const newWithoutContributors = {...currentSettings};\n  const lastWithoutContributors = {...extendedProjectPlan.settings};\n  delete newWithoutContributors.contributors;\n  delete lastWithoutContributors.contributors;\n  const youTrackConfigChanged = !deepEquals(newWithoutContributors, lastWithoutContributors);\n  const contributorsChanged = !deepEquals(currentSettings.contributors, extendedProjectPlan.settings.contributors);\n\n  if (youTrackConfigChanged) {\n    return Action.BUILD_PLAN;\n  } else if (contributorsChanged) {\n    return Action.UPDATE_PREDICTION;\n  } else {\n    return Action.NOTHING;\n  }\n}\n","import { SDataArray } from 's-array';\nimport S, { DataSignal } from 's-js';\nimport { jsonable, Plain } from '../../utils/s';\nimport { ensureArray, ensureString } from '../../utils/typescript';\nimport { Contributor } from '../contributor/contributor-model';\nimport {\n  assignContributorEditArea,\n  assignContributors,\n  ContributorEditArea,\n  createContributorEditArea,\n  createContributors,\n} from '../contributors/contributors-model';\nimport {\n  assignDependsLinkType,\n  createDependsLinkType,\n  DependsLinkType,\n} from '../depends-link-type/depends-link-type-model';\nimport { assignSettings, createSettings, Settings } from '../settings/settings-model';\n\n/**\n * User-provided state of the settings UI component.\n */\nexport interface ProjectPlanningSettings extends Settings, DependsLinkType {\n  readonly stateFieldId: DataSignal<string>;\n  readonly inactiveStateIds: DataSignal<Set<string>>;\n  readonly remainingEffortFieldId: DataSignal<string>;\n  readonly remainingWaitFieldId: DataSignal<string>;\n  readonly assigneeFieldId: DataSignal<string>;\n  readonly typeFieldId: DataSignal<string>;\n  readonly splittableTypeIds: DataSignal<Set<string>>;\n  readonly savedQueryId: DataSignal<string>;\n  readonly overlaySavedQueryId: DataSignal<string>;\n  readonly contributors: SDataArray<Contributor>;\n  readonly transient: ContributorEditArea;\n}\n\n/**\n * Creates a new state for the settings UI component.\n */\nexport function createProjectPlanningSettings(): ProjectPlanningSettings {\n  return {\n    ...createSettings(),\n    stateFieldId: jsonable(S.value('')),\n    inactiveStateIds: jsonable(S.value(new Set<string>())),\n    remainingEffortFieldId: jsonable(S.value('')),\n    remainingWaitFieldId: jsonable(S.value('')),\n    assigneeFieldId: jsonable(S.value('')),\n    typeFieldId: jsonable(S.value('')),\n    splittableTypeIds: jsonable(S.value(new Set<string>())),\n    ...createDependsLinkType(),\n    savedQueryId: jsonable(S.value('')),\n    overlaySavedQueryId: jsonable(S.value('')),\n    contributors: createContributors(),\n    transient: createContributorEditArea(),\n  };\n}\n\n/**\n * Updates the state of the settings UI component to the given values in a plain JSON object.\n *\n * The update is performed within a single S.js transaction.\n *\n * @param settings state of the settings UI component\n * @param plain plain JSON object\n */\nexport function assignProjectPlanningSettings(settings: ProjectPlanningSettings, plain: Plain<ProjectPlanningSettings>):\n    void {\n  S.freeze(() => {\n    assignSettings(settings, plain);\n    settings.stateFieldId(ensureString(plain.stateFieldId));\n    settings.inactiveStateIds(new Set<string>(ensureArray(plain.inactiveStateIds, [], isValidId)));\n    settings.remainingEffortFieldId(ensureString(plain.remainingEffortFieldId));\n    settings.remainingWaitFieldId(ensureString(plain.remainingWaitFieldId));\n    settings.assigneeFieldId(ensureString(plain.assigneeFieldId));\n    settings.typeFieldId(ensureString(plain.typeFieldId));\n    settings.splittableTypeIds(new Set<string>(ensureArray(plain.splittableTypeIds, [], isValidId)));\n    assignDependsLinkType(settings, plain);\n    settings.savedQueryId(ensureString(plain.savedQueryId));\n    settings.overlaySavedQueryId(ensureString(plain.overlaySavedQueryId));\n    assignContributors(settings.contributors, plain.contributors);\n    if (plain.transient !== undefined) {\n      assignContributorEditArea(settings.transient, plain.transient);\n    }\n  });\n}\n\nfunction isValidId(value: unknown): boolean {\n  return typeof value === 'string' && value.length > 0;\n}\n","import S, { DataSignal } from 's-js';\nimport { Plain } from '../../utils/s';\nimport { App, AppComputation, assignApp, createApp, createAppComputation } from '../app/app-model';\nimport {\n  assignProjectPlanningSettings,\n  createProjectPlanningSettings,\n  ProjectPlanningSettings,\n} from '../project-planning-settings/project-planning-settings-model';\n\nexport interface ProjectPlanningAppComputation extends AppComputation {\n  /**\n   * Signal to trigger the current action ({@link ProjectPlanningAppCtrl.action}).\n   */\n  readonly doAction: DataSignal<null>;\n}\n\n/**\n * Returns a newly created object for keeping the user-provided application state.\n */\nexport function createProjectPlanningApp(): App<ProjectPlanningSettings> {\n  return createApp(createProjectPlanningSettings());\n}\n\n/**\n * Returns a newly created object for keeping the computed application state.\n */\nexport function createProjectPlanningAppComputation(): ProjectPlanningAppComputation {\n  return {\n    ...createAppComputation(),\n    doAction: S.data(null),\n  };\n}\n\n/**\n * Updates the application state to the given values in a plain JSON object.\n *\n * The update is performed within a single S.js transaction.\n *\n * @param app application state\n * @param plain plain JSON object\n */\nexport function assignProjectPlanningApp(\n    app: App<ProjectPlanningSettings>, plain: Plain<App<ProjectPlanningSettings>>) {\n  S.freeze(() => {\n    assignApp(app, plain);\n    assignProjectPlanningSettings(app.settings, plain.settings);\n  });\n}\n","import { unreachableCase } from '../../utils/typescript';\nimport { Action } from './project-planning-app-ctrl';\n\nexport function projectPlanningActionLabel(action: Action): string {\n  switch (action) {\n    case Action.COMPLETE_SETTINGS: return 'Finish settings...';\n    case Action.CONNECT: return 'Connect';\n    case Action.BUILD_PLAN: return 'Build plan';\n    case Action.UPDATE_PREDICTION: return 'Update prediction';\n    case Action.STOP: return 'Stop';\n    case Action.NOTHING: return 'Nothing';\n    default: return unreachableCase(action);\n  }\n}\n","import { DataSignal } from 's-js';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { Counter } from '../../utils/counter';\nimport { bindString } from '../../utils/surplus';\nimport { EDIT_AREA_CLASS, FORM_GROUP_CLASS, HELP_CLASS, INPUT_CLASS, LABEL_CLASS, OFFSET_CLASS } from '../bootstrap';\nimport { SettingsCtrl } from './settings-ctrl';\nimport { Settings } from './settings-model';\n\nexport interface SettingsProperties {\n  readonly settings: Settings;\n  readonly ctrl: SettingsCtrl;\n  readonly connectSignal: DataSignal<null>;\n  readonly invalidCounter: Counter;\n}\n\nexport function SettingsView({settings, ctrl, connectSignal, invalidCounter}: SettingsProperties):\n    HTMLElement {\n  return <div>\n    <div class={FORM_GROUP_CLASS}>\n      <label for=\"instanceName\" class={LABEL_CLASS}>Title:</label>\n      <div class={EDIT_AREA_CLASS}>\n        <input id=\"instanceName\" type=\"text\" class={INPUT_CLASS} aria-describedby=\"instanceNameHelp\"\n               fn={bindString(settings.name)} />\n        <small id=\"instanceNameHelp\" class=\"form-text text-muted\">\n          The tab/window title, which is also used for bookmarks.\n        </small>\n      </div>\n    </div>\n    <hr />\n    <div class={FORM_GROUP_CLASS}>\n      <label for=\"baseUrl\" class={LABEL_CLASS}>Base URL:</label>\n      <div class={EDIT_AREA_CLASS}>\n        <input id=\"baseUrl\" type=\"URL\" required class={INPUT_CLASS} aria-describedby=\"baseUrlHelp\"\n               fn={bindString(settings.youTrackBaseUrl, invalidCounter)} />\n        <small id=\"baseUrlHelp\" class=\"form-text text-muted\">\n          For YouTrack InCloud, enter the Base URL shown\n          at <a target=\"_blank\" fn={ctrl.hrefRelativeToBaseUrl('admin/domainSettings')}>Server Settings &gt; Domain\n          Settings</a>. The URL should be of form https://&lt;your-domain&gt;/youtrack. For YouTrack Standalone, enter\n          the Base URL shown at <a target=\"_blank\" fn={ctrl.hrefRelativeToBaseUrl('admin/settings')}>Server\n          Settings &gt; Global Settings</a>.\n        </small>\n      </div>\n    </div>\n    <div class={FORM_GROUP_CLASS}>\n      <label for=\"hubServiceUrl\" class={LABEL_CLASS}>Hub URL:</label>\n      <div class={EDIT_AREA_CLASS}>\n        <input id=\"hubServiceUrl\" type=\"URL\" required class={INPUT_CLASS} aria-describedby=\"hubServiceUrlHelp\"\n               disabled={ctrl.isInCloudUrl()} fn={bindString(settings.hubUrl, invalidCounter)} />\n        <small id=\"hubServiceUrlHelp\" class=\"form-text text-muted\">\n          For YouTrack InCloud without a custom domain, this setting is not configurable. Otherwise, enter the Hub URL\n          shown at <a target=\"_blank\" fn={ctrl.hrefRelativeToBaseUrl('admin/ring')}>Server Settings &gt; Hub\n          Integration</a>.\n        </small>\n      </div>\n    </div>\n    <div class={FORM_GROUP_CLASS}>\n      <label for=\"serviceId\" class={LABEL_CLASS}>Service ID in Hub:</label>\n      <div class={EDIT_AREA_CLASS}>\n        <input id=\"serviceId\" type=\"text\" required class={INPUT_CLASS} aria-describedby=\"serviceIdHelp\"\n               fn={bindString(settings.youTrackServiceId, invalidCounter)} />\n        <small id=\"serviceIdHelp\" class={HELP_CLASS}>\n          Enter the YouTrack Service ID in Hub shown\n          at <a target=\"_blank\" fn={ctrl.hrefRelativeToBaseUrl('admin/ring')}>Server Settings &gt; Hub\n          Integration</a>.\n        </small>\n      </div>\n    </div>\n    <div class={FORM_GROUP_CLASS}>\n      <div class={`${OFFSET_CLASS} ${EDIT_AREA_CLASS}`}>\n        <button type=\"button\" class=\"btn btn-sm btn-secondary\" aria-describedby=\"loginHelp\"\n                disabled={ctrl.normalizedBaseUrl().length === 0 || ctrl.normalizedHubUrl().length === 0 ||\n                    settings.youTrackServiceId().length === 0}\n                onClick={() => connectSignal(null)}>Connect</button>\n        <small id=\"loginHelp\" class={HELP_CLASS}>\n          If you are not logged into YouTrack yet, this will take you to the YouTrack login page. Once logged in, you\n          will be redirected back here. Please note: The URI of this web app (that is,\n          {SettingsCtrl.currentUri().toString()}) needs to be registered in the&#32;\n          <a target=\"_blank\"\n             fn={ctrl.hubRelativeToBaseUrlAndServiceId((serviceId) =>\n                 `admin/hub/services/${serviceId}?tab=settings`)}>\n            Hub Settings\n          </a> under Redirect URIs. The current origin (that is, {SettingsCtrl.currentOrigin().toString()}) also\n          needs to be added under Allowed origins\n          at <a target=\"_blank\" fn={ctrl.hrefRelativeToBaseUrl('admin/settings')}>Server Settings &gt; Global\n          Settings</a>.\n        </small>\n      </div>\n    </div>\n  </div>;\n}\n","import { DataSignal } from 's-js';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport { Counter } from '../../utils/counter';\nimport { ContributorsView } from '../contributors/contributors-view';\nimport { DependsLinkTypeView } from '../depends-link-type/depends-link-type-view';\nimport { SettingsView } from '../settings/settings-view';\nimport {\n  AssigneeFieldView,\n  BundleElementsView,\n  IssueFieldView,\n  IssueTypeFieldView,\n  OverlaySavedQueryView,\n  SavedQueryView,\n} from '../you-track-base-views';\nimport { ProjectPlanningSettingsCtrl } from './project-planning-settings-ctrl';\nimport { ProjectPlanningSettings } from './project-planning-settings-model';\n\nexport interface ProjectPlanningSettingsProperties {\n  readonly settings: ProjectPlanningSettings;\n  readonly ctrl: ProjectPlanningSettingsCtrl;\n  readonly connectSignal: DataSignal<null>;\n  readonly invalidCounter: Counter;\n}\n\nexport function ProjectPlanningSettingsView({settings, ctrl, connectSignal, invalidCounter}:\n    ProjectPlanningSettingsProperties): HTMLElement {\n  return (\n      <div>\n        <SettingsView settings={settings} ctrl={ctrl.settingsCtrl} connectSignal={connectSignal}\n                      invalidCounter={invalidCounter} />\n        <hr />\n        <IssueFieldView id=\"stateField\" label=\"State Field:\" elementId={settings.stateFieldId} required\n                        elements={ctrl.stateFields} invalidCounter={invalidCounter}>\n          The custom field (of type state) that contains the issue state.\n        </IssueFieldView>\n        <BundleElementsView id=\"inactiveStates\" label=\"Inactive States:\" elementIds={settings.inactiveStateIds}\n                            bundleElements={ctrl.states}>\n          The unresolved states indicating an issue should appear as inactive.\n        </BundleElementsView>\n        <IssueFieldView id=\"remainingEffortField\" label=\"Remaining Effort Field:\" required\n                        elementId={settings.remainingEffortFieldId} elements={ctrl.periodFields}\n                        invalidCounter={invalidCounter}>\n          The custom field (of type period) that contains the remaining effort.\n        </IssueFieldView>\n        <IssueFieldView id=\"remainingWaitField\" label=\"Remaining Wait Field:\"\n                        elementId={settings.remainingWaitFieldId} elements={ctrl.periodFields}>\n          The custom field (of type period) that contains the remaining wait.\n        </IssueFieldView>\n        <AssigneeFieldView elementId={settings.assigneeFieldId} elements={ctrl.userFields}/>\n        <IssueTypeFieldView elementId={settings.typeFieldId} elements={ctrl.enumFields}/>\n        <BundleElementsView id=\"splittableTypes\" label=\"Splittable Types:\" elementIds={settings.splittableTypeIds}\n                            bundleElements={ctrl.types}>\n          The issue types that allow splitting across multiple persons when planning.\n        </BundleElementsView>\n        <DependsLinkTypeView dependsLinkType={settings}\n                             directedIssueLinkTypes={ctrl.youTrackMetadataCtrl.directedIssueLinkTypes}\n                             invalidCounter={invalidCounter} />\n        <SavedQueryView id=\"savedQuery\" label=\"Saved Query:\" elementId={settings.savedQueryId}\n                        elements={ctrl.youTrackMetadataCtrl.savedQueries} invalidCounter={invalidCounter}>\n          The saved search containing the issues that will comprise the project plan. Issues will be scheduled in the\n          order of this saved search (unless also part of the overlay saved search).\n        </SavedQueryView>\n        <OverlaySavedQueryView id=\"overlaySavedQuery\" label=\"Overlay:\" elementId={settings.overlaySavedQueryId}\n                        elements={ctrl.youTrackMetadataCtrl.savedQueries} primaryElementId={settings.savedQueryId}>\n          Reorders the issues that are contained in both saved searches according to this overlay. The order (more\n          precisely, the rank) of all issues not contained in this overlay remains the same.\n        </OverlaySavedQueryView>\n        <hr />\n        <ContributorsView label=\"Contributors:\" contributors={settings.contributors}\n                          contributorEditArea={settings.transient} ctrl={ctrl.contributorsCtrl}\n                          youTrackUserMap={ctrl.youTrackMetadataCtrl.youTrackUserMap} invalidCounter={invalidCounter} />\n      </div>\n  );\n}\n","import { handlePotentialOauthRedirect } from '@fschopp/project-planning-for-you-track';\nimport { strict as assert } from 'assert';\nimport S, { DataSignal } from 's-js';\nimport { Plain } from '../utils/s';\nimport { App, Page } from './app/app-model';\nimport { Settings } from './settings/settings-model';\n\nconst FABRICATED_HOST = 'http://ignored-host';\n\ninterface ParsedHash {\n  path: string;\n  params: URLSearchParams;\n  raw: string;\n}\n\ntype RawHash = string;\n\ntype Hash = ParsedHash | RawHash;\n\nfunction isParsedHash(hash: Hash): hash is ParsedHash {\n  return typeof hash !== 'string';\n}\n\nfunction parseWindowLocation(): Hash {\n  const theHash = window.location.hash;\n  if (theHash.startsWith('#/')) {\n     const fabricatedUrl = new URL(theHash.slice(1), 'http://ignored-host/');\n     return {\n       path: fabricatedUrl.pathname,\n       params: fabricatedUrl.searchParams,\n       raw: theHash,\n     };\n  } else {\n    return theHash;\n  }\n}\n\n/**\n * Router that two-way binds the fragment (also called hash) of the URI of the current window/tab and the application\n * state.\n *\n * @typeparam T Type of the application subclass.\n * @typeparam U Type of of the user-provided state; that is, of {@link App.settings}.\n */\nexport class Router<T extends App<U>, U extends Settings = T['settings']> {\n  private hash: DataSignal<Hash> = S.value(parseWindowLocation());\n\n  /**\n   * Constructor.\n   *\n   * @param app The user-provided application state.\n   * @param assignApp Function that updates the application state to the given values in a plain JSON object.\n   * @param assignApp.app plain JSON object\n   * @param assignSettings Function that updates the application settings to the given values in a plain JSON object.\n   * @param assignSettings.app plain JSON object\n   */\n  public constructor(app: T, assignApp: (app: Plain<T>) => any, assignSettings: (settings: Plain<U>) => any) {\n    const savedState: Plain<T> | undefined = handlePotentialOauthRedirect<Plain<T>>();\n    if (savedState !== undefined) {\n      assignApp(savedState);\n    }\n\n    // Bind hash to react to changes of window.location.hash\n    const setStateFromHash = () => this.hash(parseWindowLocation());\n    window.addEventListener('hashchange', setStateFromHash, false);\n    S.cleanup(() => window.removeEventListener('hashchange', setStateFromHash));\n\n    // Bind config to react to changes of hash.\n    const needsNormalization: DataSignal<null> = S.data(null);\n    let hashFromConfig: string = '';\n    S(() => {\n      const currentHash: Hash = this.hash();\n      if (isParsedHash(currentHash)) {\n        if (currentHash.raw.slice(1) === hashFromConfig) {\n          // If this event is the result of us setting the hash ourselves (see below), ignore this update.\n          return;\n        }\n\n        const candidatePageName: string = currentHash.path.slice(1);\n        if (Object.values(Page).includes(candidatePageName)) {\n          app.currentPage(candidatePageName as Page);\n        }\n        if (currentHash.params.has('config')) {\n          const config: Plain<U> = JSON.parse(currentHash.params.get('config')!);\n          assignSettings(config);\n        } else {\n          needsNormalization(null);\n        }\n      }\n    });\n\n    // Bind browser hash to react to changes of config\n    S(() => {\n      // We need to depend on the following data signal, in order to guarantee normalization of the hash if the user\n      // changes it manually. (We cannot use S.on(), which may be a bit clearer, because we also depend on the\n      // configuration signals.)\n      needsNormalization();\n      const currentHash = window.location.hash.slice(1);\n      const url = new URL(`/${app.currentPage()}`, FABRICATED_HOST);\n      // JSON.stringify visits the object tree recursively, so even changes to nested data signal will trigger this\n      // computation to re-run. What is remarkable: nested data signals (say in a SDataArray) that do not yet exist will\n      // also trigger this computation in the future! The reason it works: The set of data signals a computation depends\n      // on is not static but updated whenever the computation runs. Now adding an element to SDataArray reruns this\n      // computation, which then records the dependency on the element's data signal(s). The same works when removing\n      // elements.\n      url.searchParams.set('config', JSON.stringify(app.settings));\n      assert(url.toString().startsWith(FABRICATED_HOST), 'URL.toString() returned unexpected result.');\n      hashFromConfig = url.toString().substring(FABRICATED_HOST.length);\n      if (currentHash !== hashFromConfig) {\n        window.location.hash = hashFromConfig;\n      }\n    });\n  }\n}\n","import { ProjectPlan, ProjectPlanWarning } from '@fschopp/project-planning-for-you-track';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\n\nexport function WarningsView({projectPlan}: {projectPlan: () => ProjectPlan | undefined}): HTMLElement {\n  return (\n      <ul class=\"list-group\">\n        {warnings(projectPlan()).map((warning) =>\n            <li class=\"list-group-item\">{warning.description}</li>\n        )}\n      </ul>\n  );\n}\n\nfunction warnings(projectPlan: ProjectPlan | undefined): ProjectPlanWarning[] {\n  return projectPlan === undefined\n      ? []\n      : projectPlan.warnings;\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","'use strict';\n\nvar objectAssign = require('object-assign');\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\n// Expose a strict only variant of assert\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","/*\nViz.js 2.1.2 (Graphviz 2.40.1, Expat 2.2.5, Emscripten 1.37.36)\nCopyright (c) 2014-2018 Michael Daines\nLicensed under MIT license\n\nThis distribution contains other software in object code form:\n\nGraphviz\nLicensed under Eclipse Public License - v 1.0\nhttp://www.graphviz.org\n\nExpat\nCopyright (c) 1998, 1999, 2000 Thai Open Source Software Center Ltd and Clark Cooper\nCopyright (c) 2001, 2002, 2003, 2004, 2005, 2006 Expat maintainers.\nLicensed under MIT license\nhttp://www.libexpat.org\n\nzlib\nCopyright (C) 1995-2013 Jean-loup Gailly and Mark Adler\nhttp://www.zlib.net/zlib_license.html\n*/\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar WorkerWrapper = function () {\n  function WorkerWrapper(worker) {\n    var _this = this;\n\n    classCallCheck(this, WorkerWrapper);\n\n    this.worker = worker;\n    this.listeners = [];\n    this.nextId = 0;\n\n    this.worker.addEventListener('message', function (event) {\n      var id = event.data.id;\n      var error = event.data.error;\n      var result = event.data.result;\n\n      _this.listeners[id](error, result);\n      delete _this.listeners[id];\n    });\n  }\n\n  createClass(WorkerWrapper, [{\n    key: 'render',\n    value: function render(src, options) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var id = _this2.nextId++;\n\n        _this2.listeners[id] = function (error, result) {\n          if (error) {\n            reject(new Error(error.message, error.fileName, error.lineNumber));\n            return;\n          }\n          resolve(result);\n        };\n\n        _this2.worker.postMessage({ id: id, src: src, options: options });\n      });\n    }\n  }]);\n  return WorkerWrapper;\n}();\n\nvar ModuleWrapper = function ModuleWrapper(module, render) {\n  classCallCheck(this, ModuleWrapper);\n\n  var instance = module();\n  this.render = function (src, options) {\n    return new Promise(function (resolve, reject) {\n      try {\n        resolve(render(instance, src, options));\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n\n\nfunction b64EncodeUnicode(str) {\n  return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  }));\n}\n\nfunction defaultScale() {\n  if ('devicePixelRatio' in window && window.devicePixelRatio > 1) {\n    return window.devicePixelRatio;\n  } else {\n    return 1;\n  }\n}\n\nfunction svgXmlToImageElement(svgXml) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$scale = _ref.scale,\n      scale = _ref$scale === undefined ? defaultScale() : _ref$scale,\n      _ref$mimeType = _ref.mimeType,\n      mimeType = _ref$mimeType === undefined ? \"image/png\" : _ref$mimeType,\n      _ref$quality = _ref.quality,\n      quality = _ref$quality === undefined ? 1 : _ref$quality;\n\n  return new Promise(function (resolve, reject) {\n    var svgImage = new Image();\n\n    svgImage.onload = function () {\n      var canvas = document.createElement('canvas');\n      canvas.width = svgImage.width * scale;\n      canvas.height = svgImage.height * scale;\n\n      var context = canvas.getContext(\"2d\");\n      context.drawImage(svgImage, 0, 0, canvas.width, canvas.height);\n\n      canvas.toBlob(function (blob) {\n        var image = new Image();\n        image.src = URL.createObjectURL(blob);\n        image.width = svgImage.width;\n        image.height = svgImage.height;\n\n        resolve(image);\n      }, mimeType, quality);\n    };\n\n    svgImage.onerror = function (e) {\n      var error;\n\n      if ('error' in e) {\n        error = e.error;\n      } else {\n        error = new Error('Error loading SVG');\n      }\n\n      reject(error);\n    };\n\n    svgImage.src = 'data:image/svg+xml;base64,' + b64EncodeUnicode(svgXml);\n  });\n}\n\nfunction svgXmlToImageElementFabric(svgXml) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$scale = _ref2.scale,\n      scale = _ref2$scale === undefined ? defaultScale() : _ref2$scale,\n      _ref2$mimeType = _ref2.mimeType,\n      mimeType = _ref2$mimeType === undefined ? 'image/png' : _ref2$mimeType,\n      _ref2$quality = _ref2.quality,\n      quality = _ref2$quality === undefined ? 1 : _ref2$quality;\n\n  var multiplier = scale;\n\n  var format = void 0;\n  if (mimeType == 'image/jpeg') {\n    format = 'jpeg';\n  } else if (mimeType == 'image/png') {\n    format = 'png';\n  }\n\n  return new Promise(function (resolve, reject) {\n    fabric.loadSVGFromString(svgXml, function (objects, options) {\n      // If there's something wrong with the SVG, Fabric may return an empty array of objects. Graphviz appears to give us at least one <g> element back even given an empty graph, so we will assume an error in this case.\n      if (objects.length == 0) {\n        reject(new Error('Error loading SVG with Fabric'));\n      }\n\n      var element = document.createElement(\"canvas\");\n      element.width = options.width;\n      element.height = options.height;\n\n      var canvas = new fabric.Canvas(element, { enableRetinaScaling: false });\n      var obj = fabric.util.groupSVGElements(objects, options);\n      canvas.add(obj).renderAll();\n\n      var image = new Image();\n      image.src = canvas.toDataURL({ format: format, multiplier: multiplier, quality: quality });\n      image.width = options.width;\n      image.height = options.height;\n\n      resolve(image);\n    });\n  });\n}\n\nvar Viz = function () {\n  function Viz() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        workerURL = _ref3.workerURL,\n        worker = _ref3.worker,\n        Module = _ref3.Module,\n        render = _ref3.render;\n\n    classCallCheck(this, Viz);\n\n    if (typeof workerURL !== 'undefined') {\n      this.wrapper = new WorkerWrapper(new Worker(workerURL));\n    } else if (typeof worker !== 'undefined') {\n      this.wrapper = new WorkerWrapper(worker);\n    } else if (typeof Module !== 'undefined' && typeof render !== 'undefined') {\n      this.wrapper = new ModuleWrapper(Module, render);\n    } else if (typeof Viz.Module !== 'undefined' && typeof Viz.render !== 'undefined') {\n      this.wrapper = new ModuleWrapper(Viz.Module, Viz.render);\n    } else {\n      throw new Error('Must specify workerURL or worker option, Module and render options, or include one of full.render.js or lite.render.js after viz.js.');\n    }\n  }\n\n  createClass(Viz, [{\n    key: 'renderString',\n    value: function renderString(src) {\n      var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref4$format = _ref4.format,\n          format = _ref4$format === undefined ? 'svg' : _ref4$format,\n          _ref4$engine = _ref4.engine,\n          engine = _ref4$engine === undefined ? 'dot' : _ref4$engine,\n          _ref4$files = _ref4.files,\n          files = _ref4$files === undefined ? [] : _ref4$files,\n          _ref4$images = _ref4.images,\n          images = _ref4$images === undefined ? [] : _ref4$images,\n          _ref4$yInvert = _ref4.yInvert,\n          yInvert = _ref4$yInvert === undefined ? false : _ref4$yInvert,\n          _ref4$nop = _ref4.nop,\n          nop = _ref4$nop === undefined ? 0 : _ref4$nop;\n\n      for (var i = 0; i < images.length; i++) {\n        files.push({\n          path: images[i].path,\n          data: '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n<svg width=\"' + images[i].width + '\" height=\"' + images[i].height + '\"></svg>'\n        });\n      }\n\n      return this.wrapper.render(src, { format: format, engine: engine, files: files, images: images, yInvert: yInvert, nop: nop });\n    }\n  }, {\n    key: 'renderSVGElement',\n    value: function renderSVGElement(src) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return this.renderString(src, _extends({}, options, { format: 'svg' })).then(function (str) {\n        var parser = new DOMParser();\n        return parser.parseFromString(str, 'image/svg+xml').documentElement;\n      });\n    }\n  }, {\n    key: 'renderImageElement',\n    value: function renderImageElement(src) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var scale = options.scale,\n          mimeType = options.mimeType,\n          quality = options.quality;\n\n\n      return this.renderString(src, _extends({}, options, { format: 'svg' })).then(function (str) {\n        if ((typeof fabric === 'undefined' ? 'undefined' : _typeof(fabric)) === \"object\" && fabric.loadSVGFromString) {\n          return svgXmlToImageElementFabric(str, { scale: scale, mimeType: mimeType, quality: quality });\n        } else {\n          return svgXmlToImageElement(str, { scale: scale, mimeType: mimeType, quality: quality });\n        }\n      });\n    }\n  }, {\n    key: 'renderJSONObject',\n    value: function renderJSONObject(src) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var format = options.format;\n\n\n      if (format !== 'json' || format !== 'json0') {\n        format = 'json';\n      }\n\n      return this.renderString(src, _extends({}, options, { format: format })).then(function (str) {\n        return JSON.parse(str);\n      });\n    }\n  }]);\n  return Viz;\n}();\n\nexport default Viz;\n","import { SettingsCtrl, YouTrackMetadataCtrl, YouTrackRest, } from '@fschopp/project-planning-ui-for-you-track';\n\n/**\n * Controller for settings related to the visual project plan.\n */\nexport class GraphvizSettingsCtrl {\n  public readonly enumFields: () => Map<string, YouTrackRest.CustomField>;\n  public readonly userFields: () => Map<string, YouTrackRest.CustomField>;\n\n  public constructor(\n      public readonly settingsCtrl: SettingsCtrl,\n      public readonly youTrackMetadataCtrl: YouTrackMetadataCtrl\n  ) {\n    this.enumFields = youTrackMetadataCtrl.mapOfCustomFieldTypes('enum[1]');\n    this.userFields = youTrackMetadataCtrl.mapOfCustomFieldTypes('user[1]');\n  }\n}\n","// tslint:disable-next-line:no-reference\n/// <reference path=\"module.d.ts\"/>\n\nimport {\n  IssueNode,\n  makeForest,\n  ProjectPlan,\n  retrieveProjectPlan,\n  RetrieveProjectPlanOptions,\n  traverseIssueForest,\n  YouTrackConfig,\n  YouTrackIssue,\n} from '@fschopp/project-planning-for-you-track';\nimport {\n  AppCtrl,\n  Page,\n  Plain,\n  toNormalizedPlainSettings,\n  unreachableCase,\n  YouTrackMetadata,\n} from '@fschopp/project-planning-ui-for-you-track';\nimport {\n  CustomField,\n  EnumBundleCustomFieldDefaults,\n  EnumBundleElement,\n  User,\n} from '@fschopp/project-planning-ui-for-you-track/dist/es6/youtrack-rest';\nimport { strict as assert } from 'assert';\nimport S, { DataSignal } from 's-js';\nimport Viz from 'viz.js';\nimport { GraphvizApp, GraphvizAppComputation } from './graphviz-app-model';\nimport { GraphvizSettingsCtrl } from './graphviz-settings-ctrl';\nimport { GraphvizSettings } from './graphviz-settings-model';\n\nexport enum Action {\n  COMPLETE_SETTINGS = 'complete',\n  CONNECT = 'connect',\n  BUILD_PLAN = 'build',\n  UPDATE_PLAN = 'update',\n  STOP = 'stop',\n}\n\nexport class GraphvizAppCtrl {\n  /**\n   * Signal carrying the kind of action triggered by the button in the nav bar.\n   */\n  public readonly action: () => Action;\n\n  private cancelLastInvocation_: (() => void) | undefined;\n  private readonly typeMap_: DataSignal<Map<string, EnumBundleElement>>;\n  private readonly aspectRatio_: DataSignal<WidthAndHeight | undefined> = S.value(undefined);\n  private readonly widthAndHeight_: () => WidthAndHeight | undefined;\n\n  public static createDefaultGraphvizCtrl(\n        app: GraphvizApp, appComputation: GraphvizAppComputation, vizWorkerUrl: string): GraphvizAppCtrl {\n    const appCtrl: AppCtrl<GraphvizSettings> = AppCtrl.createDefaultAppCtrl(app, appComputation);\n    const visualPlanSettingsCtrl = new GraphvizSettingsCtrl(appCtrl.settingsCtrl, appCtrl.youTrackMetadataCtrl);\n    return new GraphvizAppCtrl(app, appComputation, vizWorkerUrl, appCtrl, visualPlanSettingsCtrl);\n  }\n\n  public constructor(\n      private readonly visualPlanApp_: GraphvizApp,\n      private readonly visualPlanAppComputation_: GraphvizAppComputation,\n      private readonly vizWorkerUrl_: string,\n      public readonly appCtrl: AppCtrl<GraphvizSettings>,\n      public readonly visualPlanSettingsCtrl: GraphvizSettingsCtrl\n  ) {\n    this.action = S(() => actionFromState(\n        this.visualPlanAppComputation_.progress(), this.appCtrl.youTrackMetadataCtrl.pendingMetadata(),\n        this.appCtrl.youTrackMetadataCtrl.definedYouTrackMetadata(), this.visualPlanAppComputation_.projectPlan(),\n        this.visualPlanAppComputation_.numInvalidSettings() === 0));\n    this.typeMap_ = S(() => {\n      const youTrackMetadata: YouTrackMetadata = this.appCtrl.youTrackMetadataCtrl.definedYouTrackMetadata();\n      const typeFieldId: string = this.visualPlanApp_.settings.typeFieldId();\n      let typeField: CustomField | undefined;\n      for (const customField of youTrackMetadata.customFields) {\n        if (typeFieldId === customField.id) {\n          typeField = customField;\n          break;\n        }\n      }\n      const array: EnumBundleElement[] = typeField === undefined\n          ? []\n          : (typeField.fieldDefaults as EnumBundleCustomFieldDefaults).bundle.values\n              .sort((left, right) => left.ordinal - right.ordinal);\n      return array.reduce((map, element) => map.set(element.id, element), new Map<string, EnumBundleElement>());\n    });\n\n    // 'seed' is undefined (the calculation does not keep a state), and 'onchanges' is true (skip the initial run).\n    S.on(this.visualPlanAppComputation_.doAction, () => this.doAction(), undefined, true);\n\n    // The Graphviz (dot) source depends on multiple signals. See method for details.\n    S(() => this.updateDot());\n\n    // 'seed' is undefined (the calculation does not keep a state), and 'onchanges' is false (do the initial run).\n    S.on(visualPlanAppComputation_.dot, () => this.updateSvg(), undefined, false);\n\n    this.widthAndHeight_ = S(() => {\n      const svg: SVGSVGElement | undefined = S.sample(visualPlanAppComputation_.visualPlan);\n      const aspectRatio: WidthAndHeight | undefined = this.aspectRatio_();\n      const zoom: number = this.visualPlanApp_.zoom();\n      if (svg === undefined || aspectRatio === undefined) {\n        return undefined;\n      }\n\n      const zoomFactor = Math.pow(2, zoom / 100);\n      return {\n        width: aspectRatio.width * zoomFactor,\n        height: aspectRatio.height * zoomFactor,\n      };\n    });\n\n    S.on(this.widthAndHeight_, () => {\n      const svg: SVGSVGElement | undefined = S.sample(visualPlanAppComputation_.visualPlan);\n      const widthAndHeight: WidthAndHeight | undefined = this.widthAndHeight_();\n      if (svg === undefined || widthAndHeight === undefined) {\n        return;\n      }\n      svg.width.baseVal.value = widthAndHeight.width;\n      svg.height.baseVal.value = widthAndHeight.height;\n    }, undefined, false);\n  }\n\n  private doAction(): void {\n    const action: Action = this.action();\n    switch (action) {\n      case Action.COMPLETE_SETTINGS: this.visualPlanApp_.currentPage(Page.SETTINGS); return;\n      case Action.CONNECT: this.visualPlanAppComputation_.connect(null); return;\n      case Action.BUILD_PLAN: case Action.UPDATE_PLAN:\n        return this.appCtrl.showErrorIfFailure(\n            'Failed to build visual plan',\n            this.buildPlan(toNormalizedPlainSettings(this.visualPlanApp_.settings))\n        );\n      case Action.STOP: return;\n      default: return unreachableCase(action);\n    }\n  }\n\n  private async buildPlan(currentConfig: Plain<GraphvizSettings>): Promise<void> {\n    const typeFieldId = currentConfig.typeFieldId;\n    const youTrackConfig: YouTrackConfig = {\n      stateFieldId: '',\n      inactiveStateIds: [],\n      assigneeFieldId: currentConfig.assigneeFieldId,\n      otherCustomFieldIds: [typeFieldId],\n      dependsLinkTypeId: currentConfig.dependsLinkTypeId,\n      doesInwardDependOnOutward: currentConfig.doesInwardDependOnOutward,\n      savedQueryId: currentConfig.savedQueryId,\n    };\n    const options: RetrieveProjectPlanOptions = {\n      progressCallback: (percentDone) => this.visualPlanAppComputation_.progress(0.9 * percentDone),\n      omitIssueActivities: true,\n    };\n    const projectPlan: ProjectPlan = await retrieveProjectPlan(\n        this.appCtrl.settingsCtrl.normalizedBaseUrl(),\n        youTrackConfig,\n        options\n    );\n    this.visualPlanAppComputation_.projectPlan(projectPlan);\n  }\n\n  private updateDot(): void {\n    const projectPlan: ProjectPlan | undefined = this.visualPlanAppComputation_.projectPlan();\n    const normalizedBaseUrl: string = this.appCtrl.youTrackMetadataCtrl.definedYouTrackMetadata().baseUrl;\n    const userMap: Map<string, User> = this.appCtrl.youTrackMetadataCtrl.youTrackUserMap();\n    const typeFieldId: string = this.visualPlanApp_.settings.typeFieldId();\n    const typeMap: Map<string, EnumBundleElement> = this.typeMap_();\n    this.visualPlanAppComputation_.dot(\n        projectPlan === undefined || normalizedBaseUrl === undefined\n            ? undefined\n            : computeDotFromIssues(projectPlan.issues, normalizedBaseUrl, userMap, typeFieldId, typeMap)\n    );\n  }\n\n  private updateSvg(): void {\n    const dot: string | undefined = this.visualPlanAppComputation_.dot();\n    if (this.cancelLastInvocation_ !== undefined) {\n      this.cancelLastInvocation_();\n      this.cancelLastInvocation_ = undefined;\n      // Note that we still must update this.visualPlanAppComputation_.progress (which we do).\n    }\n    if (dot === undefined) {\n      this.visualPlanAppComputation_.visualPlan(undefined);\n      this.visualPlanAppComputation_.progress(undefined);\n    } else {\n      // Progress stays at 95% for the lack of a more accurate estimate. (Retrieving data from YouTrack accounts for the\n      // \"first\" 90%, and 95% is the center between 90% and 100%...)\n      this.visualPlanAppComputation_.progress(95);\n      const promiseAndCancel = computeSvgFromDot(dot, this.vizWorkerUrl_);\n      this.cancelLastInvocation_ = promiseAndCancel.cancel;\n      const promise = promiseAndCancel.promise.then((svg) => {\n        this.cancelLastInvocation_ = undefined;\n        this.visualPlanAppComputation_.visualPlan(svg);\n        this.aspectRatio_({\n          width: svg.viewBox.baseVal.width,\n          height: svg.viewBox.baseVal.height,\n        });\n      });\n      this.appCtrl.showErrorIfFailure('Failed to build visual plan', promise);\n    }\n  }\n}\n\n\nfunction opt<T, P extends keyof T>(obj: T | undefined, property: P): T[P] | undefined {\n  return obj === undefined\n      ? undefined\n      : obj[property];\n}\n\nfunction opt2<T, P extends keyof T, Q extends keyof T[P]>(\n    obj: T | undefined, property1: P, property2: Q): T[P][Q] | undefined {\n  return obj === undefined || obj[property1] === undefined\n      ? undefined\n      : obj[property1][property2];\n}\n\nfunction coalesce<T>(left: T | undefined, right: T): T {\n  return left !== undefined\n      ? left\n      : right;\n}\n\nfunction actionFromState(progress: number | undefined, pendingMetadata: boolean,\n    youTrackMetadata: YouTrackMetadata, projectPlan: ProjectPlan | undefined,\n    hasCompleteSettings: boolean): Action {\n  if (progress !== undefined || pendingMetadata) {\n    return Action.STOP;\n  } else if (!hasCompleteSettings) {\n    return Action.COMPLETE_SETTINGS;\n  } else if (youTrackMetadata.baseUrl.length === 0) {\n    return Action.CONNECT;\n  } else if (projectPlan === undefined) {\n    return Action.BUILD_PLAN;\n  } else {\n    return Action.UPDATE_PLAN;\n  }\n}\n\ninterface WidthAndHeight {\n  readonly width: number;\n  readonly height: number;\n}\n\ninterface GraphvizIssue {\n  id: string;\n  label: string;\n  summary: string;\n  escapedSummary: string;\n  isResolved: boolean;\n  assignee?: User;\n  type?: EnumBundleElement;\n}\n\ninterface ExtendedIssue extends YouTrackIssue {\n  graphvizIssue: GraphvizIssue;\n}\n\ninterface DotBuilder {\n  dot: string;\n  dependenciesDot: string;\n}\n\nfunction enterNode(dotBuilder: DotBuilder, currentIndent: string, node: IssueNode<ExtendedIssue>, baseUrl: string):\n    void {\n  const graphvizIssue: GraphvizIssue = node.issue.graphvizIssue;\n  const isSubgraph: boolean = node.children.length > 0;\n  dotBuilder.dot += currentIndent;\n  if (isSubgraph) {\n    dotBuilder.dot += `subgraph cluster_${graphvizIssue.label} {\\n`;\n  } else {\n    dotBuilder.dot += `${graphvizIssue.label} [\\n`;\n  }\n  const fgColor = sixDigitColor(coalesce(opt2(graphvizIssue.type, 'color', 'foreground'), '#000000'));\n  const bgColor = sixDigitColor(coalesce(opt2(graphvizIssue.type, 'color', 'background'), '#ffffff'));\n  let beginLabel: string = '';\n  let endLabel: string = '';\n  if (graphvizIssue.isResolved) {\n    beginLabel = '<s>';\n    endLabel = '</s>';\n  }\n  const assignee: string | undefined = opt(graphvizIssue.assignee, 'fullName');\n  dotBuilder.dot +=\n      currentIndent + `  label = <${beginLabel}${graphvizIssue.id}: ${graphvizIssue.escapedSummary}${endLabel}`;\n  if (assignee !== undefined) {\n    // noinspection HtmlUnknownAttribute,HtmlDeprecatedTag\n    dotBuilder.dot += `<br/><font point-size=\"12\">${assignee}</font>`;\n  }\n  dotBuilder.dot += '>;\\n' +\n      currentIndent + `  href = \"${baseUrl}issue/${graphvizIssue.id}\";\\n` +\n      currentIndent + `  fillcolor = \"${bgColor}\";\\n` +\n      currentIndent + `  fontcolor = \"${fgColor}\";\\n` +\n      currentIndent + `  color = \"${fgColor}\";\\n`;\n  const label: string = linkLabelForIssueNode(node);\n  for (const dependencyNode of node.dependencies) {\n    const dependency: GraphvizIssue = dependencyNode.issue.graphvizIssue;\n    const dependencyLabel: string = linkLabelForIssueNode(dependencyNode);\n    const isDependencySubgraph: boolean = dependencyLabel !== dependency.label;\n    dotBuilder.dependenciesDot += `  ${dependencyLabel} -> ${label}`;\n    if (isSubgraph || isDependencySubgraph) {\n      dotBuilder.dependenciesDot += ' [\\n';\n      if (isDependencySubgraph) {\n        dotBuilder.dependenciesDot += `    ltail = cluster_${dependency.label};\\n`;\n      }\n      if (isSubgraph) {\n        dotBuilder.dependenciesDot += `    lhead = cluster_${graphvizIssue.label};\\n`;\n      }\n      dotBuilder.dependenciesDot += '  ]';\n    }\n    dotBuilder.dependenciesDot += '\\n';\n  }\n  if (node.children.length > 0) {\n    dotBuilder.dot += '\\n';\n  }\n}\n\nfunction leaveNode(dotBuilder: DotBuilder, currentIndent: string, isParent: boolean): void {\n  if (isParent) {\n    dotBuilder.dot += currentIndent + '}\\n';\n  } else {\n    dotBuilder.dot += currentIndent + ']\\n';\n  }\n}\n\nfunction computeDotFromIssues(issues: YouTrackIssue[], baseUrl: string, userMap: Map<string, User>,\n    typeFieldId: string, typeMap: Map<string, EnumBundleElement>): string {\n  const dotBuilder: DotBuilder = {\n    dot:\n        'digraph ProjectPlan {\\n' +\n        '  graph [\\n' +\n        '    fontname = \"helvetica\";\\n' +\n        '    style = \"rounded,filled\";\\n' +\n        '    target = \"_blank\";\\n' +\n        '  ];\\n' +\n        '  node [\\n' +\n        '    fontname = \"helvetica\",\\n' +\n        '    shape = box;\\n' +\n        '    style = \"rounded,filled\";\\n' +\n        '    target = \"_blank\";\\n' +\n        '  ];\\n' +\n        '  edge [\\n' +\n        '    fontname = \"helvetica\";\\n' +\n        '  ];\\n' +\n        '\\n' +\n        '  rankdir = LR;\\n' +\n        '  compound = true;\\n' +\n        '  newrank = true;\\n' +\n        '  ranksep = 1;\\n' +\n        '\\n',\n    dependenciesDot: '',\n  };\n  const extendedIssues: ExtendedIssue[] = issues.map((issue) => {\n    const typeId: string | undefined = issue.customFields[typeFieldId];\n    const graphvizIssue: GraphvizIssue = {\n      id: issue.id,\n      label: labelFromId(issue.id),\n      summary: issue.summary,\n      escapedSummary: replaceWithHtmlEntities(issue.summary),\n      isResolved: issue.resolved < Number.MAX_SAFE_INTEGER,\n      assignee: userMap.get(issue.assignee),\n      type: typeId === undefined\n          ? undefined\n          : typeMap.get(typeId),\n    };\n    return {...issue, graphvizIssue};\n  });\n  let indentLevel = 0;\n  const indent: () => string = () => '  '.repeat(indentLevel);\n  traverseIssueForest(\n      makeForest(extendedIssues),\n      (node) => {\n        ++indentLevel;\n        enterNode(dotBuilder, indent(), node, baseUrl);\n      },\n      (node) => {\n        leaveNode(dotBuilder, indent(), node.children.length > 0);\n        --indentLevel;\n      }\n  );\n  if (dotBuilder.dependenciesDot.length > 0) {\n    dotBuilder.dot += '\\n' + dotBuilder.dependenciesDot;\n  }\n  dotBuilder.dot += '}\\n';\n  return dotBuilder.dot;\n}\n\nfunction computeSvgFromDot(dot: string, workerUrl: string):\n    {\n      promise: Promise<SVGSVGElement>,\n      cancel: () => void,\n    } {\n  const worker = new Worker(workerUrl);\n  const viz = new Viz({worker});\n  let isCanceled = false;\n\n  async function promise(): Promise<SVGSVGElement> {\n    let errorStr: string;\n    try {\n      const svg: SVGSVGElement = await viz.renderSVGElement(dot);\n      if (isCanceled) {\n        errorStr = 'Graphviz was canceled.';\n      } else {\n        return svg;\n      }\n    } catch (error) {\n      errorStr = error.toString();\n    } finally {\n      worker.terminate();\n    }\n    throw errorStr;\n  }\n\n  // If the cancel() method is called, we terminate the worker. That means that the promise will never be settled.\n  // However, the promise is expected to fall out of scope, and the garbage collector should do its job. There should be\n  // no memory leak. For reference, see: https://github.com/tc39/ecmascript-asyncawait/issues/89 and also\n  // https://stackoverflow.com/q/20068467\n  const cancel = () => {\n    isCanceled = true;\n    worker.terminate();\n  };\n  return {promise: promise(), cancel};\n}\n\nfunction labelFromId(id: string): string {\n  return id.replace(/^[0-9]/, '_$&').replace(/[^a-zA-Z0-9_]/g, () => '_');\n}\n\nfunction sixDigitColor(color: string) {\n  assert(color.match(/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/) !== null);\n  return (color.length === 4\n      ? `#${color[1]}${color[1]}${color[2]}${color[2]}${color[3]}${color[3]}`\n      : color);\n}\n\nfunction linkLabelForIssueNode(node: IssueNode<ExtendedIssue>): string {\n  let currentNode: IssueNode<ExtendedIssue> = node;\n  while (currentNode.children.length > 0) {\n    currentNode = currentNode.children[0];\n  }\n  return currentNode.issue.graphvizIssue.label;\n}\n\n/**\n * Escapes text for use within HTML.\n *\n * See, e.g., https://stackoverflow.com/a/4835406.\n */\nfunction replaceWithHtmlEntities(text: string): string {\n  const map: {[key: string]: string} = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;',\n  };\n  return text.replace(/[&<>\"']/g, (m) => map[m]);\n}\n","import {\n  assignDependsLinkType,\n  assignSettings,\n  createDependsLinkType,\n  createSettings,\n  DependsLinkType,\n  jsonable,\n  Plain,\n  Settings,\n} from '@fschopp/project-planning-ui-for-you-track';\nimport S, { DataSignal } from 's-js';\n\n/**\n * User-provided settings pertaining to invoking Graphviz on YouTrack data.\n */\nexport interface GraphvizSettings extends Settings, DependsLinkType {\n  readonly assigneeFieldId: DataSignal<string>;\n  readonly typeFieldId: DataSignal<string>;\n  readonly savedQueryId: DataSignal<string>;\n}\n\n/**\n * Creates a new settings (view model) object.\n */\nexport function createGraphvizSettings(): GraphvizSettings {\n  return {\n    ...createSettings(),\n    assigneeFieldId: jsonable(S.value('')),\n    typeFieldId: jsonable(S.value('')),\n    ...createDependsLinkType(),\n    savedQueryId: jsonable(S.value('')),\n  };\n}\n\n/**\n * Updates a settings (view model) object to the given values in a plain JSON object.\n *\n * The update is performed within a single S.js transaction.\n *\n * @param settings the settings (view model) object\n * @param plain plain JSON object\n */\nexport function assignGraphvizSettings(settings: GraphvizSettings, plain: Plain<GraphvizSettings>):\n    void {\n  S.freeze(() => {\n    assignSettings(settings, plain);\n    settings.assigneeFieldId(plain.assigneeFieldId);\n    settings.typeFieldId(plain.typeFieldId);\n    assignDependsLinkType(settings, plain);\n    settings.savedQueryId(plain.savedQueryId);\n  });\n}\n","import { ProjectPlan } from '@fschopp/project-planning-for-you-track';\nimport {\n  App,\n  AppComputation,\n  assignApp,\n  createApp,\n  createAppComputation,\n  jsonable,\n  Plain,\n} from '@fschopp/project-planning-ui-for-you-track';\nimport S, { DataSignal } from 's-js';\nimport { assignGraphvizSettings, createGraphvizSettings, GraphvizSettings } from './graphviz-settings-model';\n\nexport interface GraphvizApp extends App<GraphvizSettings> {\n  readonly zoom: DataSignal<number>;\n}\n\nexport interface GraphvizAppComputation extends AppComputation {\n  /**\n   * Signal to trigger the current action ({@link GraphvizAppCtrl.action}).\n   */\n  readonly doAction: DataSignal<null>;\n\n  /**\n   * Signal carrying YouTrack issue data.\n   */\n  readonly projectPlan: DataSignal<ProjectPlan | undefined>;\n\n  /**\n   * Signal carrying the Graphviz (dot) source code.\n   */\n  readonly dot: DataSignal<string | undefined>;\n\n  /**\n   * Signal carrying an SVG visualizing the project, or `undefined` if no visual plan was computed yet.\n   */\n  readonly visualPlan: DataSignal<SVGSVGElement | undefined>;\n}\n\n/**\n * Returns a newly created object for keeping the user-provided application state.\n */\nexport function createGraphvizApp(): GraphvizApp {\n  return {\n    ...createApp(createGraphvizSettings()),\n    zoom: jsonable(S.value(0)),\n  };\n}\n\n/**\n * Returns a newly created object for keeping the computed application state.\n */\nexport function createGraphvizAppComputation(): GraphvizAppComputation {\n  return {\n    ...createAppComputation(),\n    doAction: S.data(null),\n    projectPlan: S.value(undefined),\n    dot: S.value(undefined),\n    visualPlan: S.value(undefined),\n  };\n}\n\n/**\n * Updates the application state to the given values in a plain JSON object.\n *\n * The update is performed within a single S.js transaction.\n *\n * @param visualPlanApp application state\n * @param plain plain JSON object\n */\nexport function assignGraphvizApp(visualPlanApp: GraphvizApp, plain: Plain<GraphvizApp>) {\n  S.freeze(() => {\n    assignApp(visualPlanApp, plain);\n    assignGraphvizSettings(visualPlanApp.settings, plain.settings);\n    visualPlanApp.zoom(plain.zoom);\n  });\n}\n","import { S } from 'surplus';\nexport default function data(signal, arg1, arg2) {\n    var event = arg1 || 'input', on = arg1 === undefined ? true : arg1, off = arg2 === undefined ? (on === true ? false : null) : arg2;\n    return function (node) {\n        if (node instanceof HTMLInputElement) {\n            var type = node.type.toUpperCase();\n            if (type === 'CHECKBOX') {\n                checkboxData(node, signal, on, off);\n            }\n            else if (type === 'RADIO') {\n                radioData(node, signal, on);\n            }\n            else {\n                valueData(node, signal, event);\n            }\n        }\n        else if (node instanceof HTMLSelectElement || node instanceof HTMLTextAreaElement) {\n            valueData(node, signal, event);\n        }\n        else if (node.isContentEditable) {\n            textContentData(node, signal, event);\n        }\n        else {\n            throw new Error(\"@data can only be applied to a form control element, \\n\"\n                + \"such as <input/>, <textarea/> or <select/>, or to an element with \"\n                + \"'contentEditable' set.  Element ``\" + node.nodeName + \"'' is \\n\"\n                + \"not such an element.  Perhaps you applied it to the wrong node?\");\n        }\n    };\n}\nfunction valueData(node, signal, event) {\n    S(function updateValue() {\n        node.value = toString(signal());\n    });\n    node.addEventListener(event, valueListener, false);\n    S.cleanup(function () { node.removeEventListener(event, valueListener); });\n    function valueListener() {\n        var cur = toString(S.sample(signal)), update = node.value;\n        if (cur !== update)\n            signal(update);\n        return true;\n    }\n}\nfunction checkboxData(node, signal, on, off) {\n    S(function updateCheckbox() {\n        node.checked = signal() === on;\n    });\n    node.addEventListener(\"change\", checkboxListener, false);\n    S.cleanup(function () { node.removeEventListener(\"change\", checkboxListener); });\n    function checkboxListener() {\n        signal(node.checked ? on : off);\n        return true;\n    }\n}\nfunction radioData(node, signal, on) {\n    S(function updateRadio() {\n        node.checked = (signal() === on);\n    });\n    node.addEventListener(\"change\", radioListener, false);\n    S.cleanup(function () { node.removeEventListener(\"change\", radioListener); });\n    function radioListener() {\n        if (node.checked)\n            signal(on);\n        return true;\n    }\n}\nfunction textContentData(node, signal, event) {\n    S(function updateTextContent() {\n        node.textContent = toString(signal());\n    });\n    node.addEventListener(event, textContentListener, false);\n    S.cleanup(function () { node.removeEventListener(event, textContentListener); });\n    function textContentListener() {\n        var cur = toString(S.sample(signal)), update = node.textContent;\n        if (cur !== update)\n            signal(update);\n        return true;\n    }\n}\nfunction toString(v) {\n    return v == null ? '' : v.toString();\n}\n",null,null,"import { AlertsView, NavView, Page, WarningsView, withClassIff, } from '@fschopp/project-planning-ui-for-you-track';\nimport { unreachableCase } from '@fschopp/project-planning-ui-for-you-track/dist/es6/utils/typescript';\nimport S from 's-js';\nimport * as Surplus from 'surplus'; // lgtm [js/unused-local-variable]\nimport data from 'surplus-mixin-data';\nimport { Action } from './graphviz-app-ctrl';\nimport { GraphvizSettingsView } from './graphviz-settings-view';\nexport function GraphvizAppView({ app, appComputation, ctrl }) {\n    return (<div>\n        <NavView appName={appComputation.name} currentPage={app.currentPage} progress={appComputation.progress} numWarnings={() => numWarnings(appComputation.projectPlan())} isActionBtnVisible={() => ctrl.action() !== Action.COMPLETE_SETTINGS || app.currentPage() !== Page.SETTINGS} actionBtnLabel={() => actionLabel(ctrl.action())} actionSignal={appComputation.doAction}/>\n        \n        <main class=\"position-relative overflow-hidden flex-shrink-1 flex-grow-1 border-top\" role=\"main\">\n          <div class=\"overflow-hidden position-absolute fill-parent d-flex flex-column\" fn={withClassIff(() => app.currentPage() !== Page.HOME, 'invisible')}>\n            <div class=\"d-flex align-items-center border-bottom px-3 py-2 flex-shrink-0 flex-grow-0\">\n              <label for=\"zoom\" class=\"mb-0\"></label>\n              <input class=\"custom-range ml-2\" type=\"range\" id=\"zoom\" min=\"-200\" max=\"200\" step=\"1\" fn={data(app.zoom)}/>\n            </div>\n            <GraphvizContainer className=\"overflow-auto flex-shrink-1 flex-grow-1\" svg={appComputation.visualPlan}/>\n          </div>\n          <div class=\"overflow-auto position-absolute fill-parent\" fn={withClassIff(() => app.currentPage() !== Page.WARNINGS, 'invisible')}>\n            <div class=\"container\">\n              <h2 class=\"mt-3\">Visual Plan Warnings</h2>\n              <WarningsView projectPlan={appComputation.projectPlan}/>\n            </div>\n          </div>\n          <div class=\"overflow-auto position-absolute fill-parent\" fn={withClassIff(() => app.currentPage() !== Page.SETTINGS, 'invisible')}>\n            <form class=\"container was-validated\">\n              <h2 class=\"mt-3\">Settings</h2>\n              <GraphvizSettingsView settings={app.settings} ctrl={ctrl.visualPlanSettingsCtrl} connectSignal={appComputation.connect} invalidCounter={ctrl.appCtrl.invalidCounter}/>\n            </form>\n          </div>\n        </main>\n        <AlertsView alerts={appComputation.alerts} ctrl={ctrl.appCtrl.alertsCtrl}/>\n      </div>);\n}\nfunction GraphvizContainer({ className, svg }) {\n    const element = <div class={className}/>;\n    S(() => {\n        const currentChild = element.firstChild;\n        const newSvg = svg();\n        if (currentChild !== null) {\n            element.removeChild(currentChild);\n        }\n        if (newSvg !== undefined) {\n            element.appendChild(newSvg);\n        }\n    });\n    return element;\n}\nfunction numWarnings(projectPlan) {\n    return projectPlan === undefined\n        ? 0\n        : projectPlan.warnings.length;\n}\nfunction actionLabel(action) {\n    switch (action) {\n        case Action.COMPLETE_SETTINGS: return 'Finish settings...';\n        case Action.CONNECT: return 'Connect';\n        case Action.BUILD_PLAN: return 'Build plan';\n        case Action.UPDATE_PLAN: return 'Rebuild plan';\n        case Action.STOP: return 'Stop';\n        default: return unreachableCase(action);\n    }\n}\n//# sourceMappingURL=graphviz-app-view.jsx.map","import { Router } from '@fschopp/project-planning-ui-for-you-track';\nimport S from 's-js';\nimport { GraphvizAppCtrl } from './graphviz-app-ctrl';\nimport {\n  assignGraphvizApp,\n  createGraphvizApp,\n  createGraphvizAppComputation,\n  GraphvizApp,\n  GraphvizAppComputation,\n} from './graphviz-app-model';\nimport { GraphvizAppView } from './graphviz-app-view';\nimport { assignGraphvizSettings } from './graphviz-settings-model';\n\n// The path hard-codes the absolute path to the Viz.js worker. This is obviously fine while the web app is served from\n// GitHub pages, but it could be improved.\n// Note that we need full.render.js (instead of lite.render.js) for HTML-like labels\nconst VIZ_WORKER_PATH: string = '/graphviz-for-you-track/full.render.js';\n\n// Unfortunate workaround for Safari. See https://github.com/fschopp/project-planning-for-you-track/issues/1\nconst DELAY_BEFORE_ACCESSING_SESSION_STORAGE_MS = 50;\n\nwindow.setTimeout(run, DELAY_BEFORE_ACCESSING_SESSION_STORAGE_MS);\n\n\nfunction run() {\n  S.root(() => {\n    const app: GraphvizApp = createGraphvizApp();\n    const appComputation: GraphvizAppComputation = createGraphvizAppComputation();\n\n    const ctrl = GraphvizAppCtrl.createDefaultGraphvizCtrl(app, appComputation, VIZ_WORKER_PATH);\n    new Router(\n        app,\n        (plainApp) => assignGraphvizApp(app, plainApp),\n        (plainSettings) => assignGraphvizSettings(app.settings, plainSettings)\n    );\n\n    document.body.append(...GraphvizAppView({app, appComputation, ctrl}).children);\n  });\n}\n\n// The purpose of the exports is currently only documentation of the relevant elements.\nexport * from './graphviz-app-ctrl';\nexport * from './graphviz-app-model';\nexport * from './graphviz-app-view';\nexport * from './graphviz-settings-ctrl';\nexport * from './graphviz-settings-model';\nexport * from './graphviz-settings-view';\n"]}